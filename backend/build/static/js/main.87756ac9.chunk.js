(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{228:function(e,t,n){},374:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),i=n.n(r),o=n(19),c=n.n(o),s=n(18),d=(n(228),n(15)),l=n(422),u=n(98),m=n(66),b=n(178),j=n(12),p={user:void 0,token:void 0},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@prefix/SET_TOKEN":return Object(j.a)(Object(j.a)({},e),{},{token:t.payload});case"@prefix/SET_USER":return Object(j.a)(Object(j.a)({},e),{},{user:t.payload});case"@prefix/LOGOUT_USER":return Object(j.a)(Object(j.a)({},e),{},{user:void 0,token:void 0});default:return e}},g=n(27),h={accounts:[],updating:!1},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@prefix/START_ACTION":return Object(j.a)(Object(j.a)({},e),{},{updating:!0});case"@prefix/DONE_ACTION":return Object(j.a)(Object(j.a)({},e),{},{updating:!1});case"@prefix/ADD_ACCOUNT":return Object(j.a)(Object(j.a)({},e),{},{accounts:[t.payload].concat(Object(g.a)(e.accounts)),updating:!1});case"@prefix/SET_ACCOUNTS":return Object(j.a)(Object(j.a)({},e),{},{accounts:t.payload});case"@prefix/SET_SINGLE_ACCOUNT":return Object(j.a)(Object(j.a)({},e),{},{accounts:e.accounts.map((function(e){return e.id===t.payload.id?t.payload:e})),updating:!1});default:return e}},O={bookings:[],updating:!1,selectedDate:new Date,bookingFormVisible:!1},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@prefix/START_ACTION":return Object(j.a)(Object(j.a)({},e),{},{updating:!0});case"@prefix/ADD_BOOKING":return Object(j.a)(Object(j.a)({},e),{},{bookings:[t.payload].concat(Object(g.a)(e.bookings)),updating:!1});case"@prefix/SET_BOOKINGS":return Object(j.a)(Object(j.a)({},e),{},{bookings:t.payload,updating:!1});case"@prefix/SET_SELECTED_DATE":return Object(j.a)(Object(j.a)({},e),{},{selectedDate:t.payload});case"@prefix/SET_FORM_VISIBILITY":return Object(j.a)(Object(j.a)({},e),{},{bookingFormVisible:!e.bookingFormVisible});default:return e}},S=Object(m.c)({userdata:f,accountdata:x,bookingData:v});var y=n(24),T=n(423);function k(e){return{type:"@prefix/SET_TOKEN",payload:e}}var N=function(e){return{type:"@prefix/SET_USER",payload:e}},w=n(35),B=n.n(w),C="https://space-booker.herokuapp.com",A="api/v1";function I(e){return B.a.post("".concat(C,"/").concat(A,"/register"),e)}function _(e){return B.a.post("".concat(C,"/auth"),e)}function F(e){var t=localStorage.getItem("access_token"),n={headers:{Authorization:"JWT ".concat(t)}};return B.a.post("".concat(C,"/").concat(A,"/accounts"),e,n)}function E(e){var t=localStorage.getItem("access_token"),n={headers:{Authorization:"JWT ".concat(t)}};return B.a.put("".concat(C,"/").concat(A,"/accounts/").concat(e.id),e,n)}function z(){var e=localStorage.getItem("access_token"),t={headers:{Authorization:"JWT ".concat(e)}};return B.a.get("".concat(C,"/").concat(A,"/accounts"),t)}function W(e){var t=localStorage.getItem("access_token"),n={headers:{Authorization:"JWT ".concat(t)}};return B.a.post("".concat(C,"/").concat(A,"/services"),e,n)}function D(e){var t=localStorage.getItem("access_token"),n={headers:{Authorization:"JWT ".concat(t)}};return B.a.put("".concat(C,"/").concat(A,"/services/").concat(e.id),e,n)}function U(e){var t=localStorage.getItem("access_token"),n={headers:{Authorization:"JWT ".concat(t)}};return B.a.post("".concat(C,"/").concat(A,"/bookings"),e,n)}var L=n(401),P=n(426),M=n(406),R=n(407),q=n(404),G=Object(L.a)((function(){return Object(P.a)({logo:{zIndex:1250,width:"210px",marginRight:"2em"},logoImg:{width:"100%",height:"auto",display:"block"}})})),V=function(){var e=G();return Object(a.jsx)(q.a,{component:s.b,className:e.logo,to:"/",children:Object(a.jsx)("img",{src:"/img/logo.png",className:e.logoImg,alt:"SpaceBooker"})})},J=Object(L.a)((function(){return Object(P.a)({root:{flexGrow:1},appBar:{zIndex:1250,backgroundColor:"#ffffff"},linkBtnTransparent:{padding:"0.8em 1em",border:"1px solid transparent","&:hover":{textDecoration:"none",opacity:.8}},linkBtnBordered:{padding:"0.8em 1em",borderRadius:"4px",border:"1px solid rgba(98,0,238, 0.4)","&:hover":{textDecoration:"none",backgroundColor:"rgba(0,0,0,0.02)",opacity:.8}},loginGreet:{fontSize:".95em",marginRight:"1em",color:"#000"},sectionLeft:{flexGrow:1,textAlign:"left"},toggleButton:{marginRight:25}})})),Y=Object(d.b)((function(e){return{user:e.userdata.user}}),{logoutUser:function(){return{type:"@prefix/LOGOUT_USER"}}})((function(e){var t=e.user,n=e.logoutUser,r=J(),i=Object(y.f)();return Object(a.jsx)("div",{className:r.root,children:Object(a.jsx)(M.a,{position:"static",className:r.appBar,children:Object(a.jsxs)(R.a,{children:[Object(a.jsx)(V,{}),Object(a.jsx)("div",{className:r.sectionLeft,children:t&&Object(a.jsx)(q.a,{component:s.b,className:r.linkBtnTransparent,to:"/dashboard",children:"Dashboard"})}),Object(a.jsxs)("div",{children:[!t&&Object(a.jsxs)("div",{children:[Object(a.jsx)(q.a,{component:s.b,className:r.linkBtnTransparent,to:"/login",children:"Login"}),Object(a.jsx)(q.a,{component:s.b,className:r.linkBtnBordered,to:"/register",children:"Sign up"})]}),t&&Object(a.jsxs)("div",{children:[Object(a.jsxs)("span",{className:r.loginGreet,children:["Hello, ",t.username]}),Object(a.jsx)(q.a,{component:s.b,className:r.linkBtnBordered,to:"/",onClick:function(){localStorage.removeItem("access_token"),n(),i.push("/")},children:"Logout"})]})]})]})})})})),K=n(408),$=Object(L.a)((function(){return Object(P.a)({root:{background:"#6A0572",display:"flex",position:"relative",justifyContent:"center",alignItems:"center",height:"calc(100vh - 64px)"},intro:{color:"#ffffff",textAlign:"center",position:"relative",zIndex:1},heading:{fontSize:"4rem",position:"relative",fontWeight:"bold",letterSpacing:-1,marginBottom:"1rem"},introText:{fontSize:"1.5rem",marginTop:"0 auto 2rem"},containedBtn:{backgroundColor:"#df0cc4",padding:"12px 0",fontWeight:"bold",color:"#ffffff",margin:"0 0.5em",width:180},outlinedBtn:{padding:"12px 0",fontWeight:"bold",color:"#ffffff",margin:"0 0.5em",width:180,borderColor:"rgba(255,255,255,0.5)","&:hover":{borderColor:"#fff"}}})})),H=Object(d.b)((function(e){return{user:e.userdata.user}}))((function(e){var t=e.user;if(null===t||void 0===t?void 0:t.username)return Object(a.jsx)(y.a,{to:"/dashboard"});var n=$(),r=Object(y.f)(),i=function(e){return function(){r.push(e)}};return Object(a.jsx)("div",{className:n.root,children:Object(a.jsxs)("div",{className:n.intro,children:[Object(a.jsx)("h1",{className:n.heading,children:"Working spaces booking app"}),Object(a.jsx)("p",{className:n.introText,children:"Create a booking calendar for your working spaces in a few seconds."}),Object(a.jsx)(K.a,{color:"primary",className:n.containedBtn,variant:"contained",size:"large",onClick:i("/register"),disableElevation:!0,children:"Sign up"}),Object(a.jsx)(K.a,{color:"secondary",className:n.outlinedBtn,variant:"outlined",size:"large",onClick:i("/login"),disableElevation:!0,children:"Login"})]})})})),Z=n(32),Q=n.n(Z),X=n(46),ee=n(17),te=n(425),ne=n(31),ae=n(409),re=n(420),ie=n(20),oe=function(){return ie.b().shape({email:ie.d().email().required("Email address is mandatory."),username:ie.d().required("Please choose your username.").min(3,"Username must be at least 3 characters long.").max(50,"Username can be maximum 50 characters long.").required("Username is mandatory."),password:ie.d().min(8,"Password must be at least 8 characters long.").matches(/^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*[!?@#$%^&*()]).{7,30}\S$/).required("Password must have at least one number, one uppercase character, lowercase  character and special character from !?@#$%^&*() "),confirmPassword:ie.d().oneOf([ie.c("password"),""],"Passwords must match.").required("Passwords must match.")})},ce=Object(L.a)((function(e){return Object(P.a)({root:{maxWidth:"500px",display:"block",margin:"0 auto"},textField:{"& > *":{width:"100%"}},registerButton:{marginTop:"30px"},title:{textAlign:"left"},successMessage:{color:e.palette.success.main},errorMessage:{color:e.palette.error.main}})})),se={message:"Registered successfully.",type:"success"},de={message:"Registeration failed: username or email already registered.",type:"error"},le=Object(d.b)((function(e){return{user:e.userdata.user}}),{setToken:k,setUser:N})((function(e){var t=e.user,n=e.setToken,i=Object(r.useState)({message:"",type:""}),o=Object(ee.a)(i,2),c=o[0],s=o[1],d=Object(r.useState)(!1),l=Object(ee.a)(d,2),u=l[0],m=l[1],b=Object(r.useState)({username:"",password:""}),j=Object(ee.a)(b,2),p=j[0],f=j[1],g=Object(r.useState)(!1),h=Object(ee.a)(g,2),x=h[0],O=h[1],v=ce(),S=Object(te.a)(I,{onError:function(){s(de),m(!0)},onSuccess:function(){s(se),m(!0)}}),T=function(){var e=Object(X.a)(Q.a.mark((function e(t){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S.mutate({username:t.username,email:t.email,password:t.password}),f({username:t.username,password:t.password});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=Object(te.a)(_,{onError:function(){s(de),m(!0)}}),N=function(){var e=Object(X.a)(Q.a.mark((function e(t){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k.mutate({username:t.username,password:t.password});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){var e,t,a,r,i,o;(S.isSuccess&&p.username&&p.password&&!k.isLoading&&N(p),k.isSuccess)&&(localStorage.setItem("access_token",null!==(e=null===(t=k.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.access_token)&&void 0!==e?e:""),n(null!==(r=null===(i=k.data)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.access_token)&&void 0!==r?r:""),O(!0))}),[S,t,k]),x||(null===t||void 0===t?void 0:t.username)?Object(a.jsx)(y.a,{to:"/dashboard"}):Object(a.jsx)("div",{className:v.root,children:Object(a.jsx)(ne.b,{initialValues:{username:"",email:"",password:"",confirmPassword:""},onSubmit:function(e,t){T(e),setTimeout((function(){t.setSubmitting(!1)}),400)},validationSchema:oe,children:function(e){var t=e.handleBlur,n=e.handleChange,r=e.values,i=e.isSubmitting,o=e.touched,s=e.errors;return Object(a.jsx)(ne.a,{children:Object(a.jsxs)(ae.a,{container:!0,direction:"row",children:[Object(a.jsx)(ae.a,{item:!0,className:v.title,xs:12,children:Object(a.jsx)("h1",{children:"Sign up!"})}),Object(a.jsx)(ae.a,{item:!0,className:v.textField,xs:8,children:Object(a.jsx)(re.a,{id:"username",name:"username",type:"text",label:"Username",value:r.username,onChange:n,onBlur:t,helperText:o.username&&s.username?s.username:"",error:!(!o.username||!s.username)})}),Object(a.jsxs)(ae.a,{item:!0,className:v.textField,xs:8,children:[" ",Object(a.jsx)(re.a,{id:"email",name:"email",type:"text",label:"Email",value:r.email,onChange:n,onBlur:t,helperText:o.email&&s.email?s.email:"",error:!(!o.email||!s.email)})]}),Object(a.jsx)(ae.a,{item:!0,className:v.textField,xs:8,children:Object(a.jsx)(re.a,{id:"password",name:"password",type:"password",label:"Password",value:r.password,onChange:n,onBlur:t,helperText:o.password&&s.password?"Make sure your password is minimum of 8 characters long and consists of at least 1 uppercase, lowercase, number and one special character from !?@#$%^&*(). Password cannot end with an empty space.":"",error:!(!o.password||!s.password)})}),Object(a.jsx)(ae.a,{item:!0,className:v.textField,xs:8,children:Object(a.jsx)(re.a,{id:"confirmPassword",name:"confirmPassword",type:"password",label:"Confirm password",value:r.confirmPassword,onChange:n,onBlur:t,helperText:o.confirmPassword&&s.confirmPassword?"Your confirmation did not match with your password. Please try again.":"",error:!(!o.confirmPassword||!s.confirmPassword)})}),Object(a.jsxs)(ae.a,{item:!0,className:v.registerButton,xs:6,children:[Object(a.jsxs)(K.a,{color:"primary",type:"submit",variant:"contained",disabled:i,children:[" ","Sign up"]}),u&&Object(a.jsx)("div",{className:"formStatus",children:"success"===c.type?Object(a.jsx)("p",{className:v.successMessage,children:c.message}):"error"===c.type?Object(a.jsx)("p",{className:v.errorMessage,children:c.message}):null})]})]})})}})})})),ue=Object(L.a)((function(e){return Object(P.a)({root:{maxWidth:"500px",display:"block",margin:"0 auto"},textField:{"& > *":{width:"100%"}},loginButton:{marginTop:"30px"},title:{textAlign:"left"},successMessage:{color:e.palette.success.main},errorMessage:{color:e.palette.error.main}})})),me={message:"Invalid username or password. Please try again.",type:"error"},be=Object(d.b)((function(e){return{user:e.userdata.user}}),{setToken:k,setUser:N})((function(e){var t=e.user,n=e.setToken,i=Object(r.useState)({message:"",type:""}),o=Object(ee.a)(i,2),c=o[0],s=o[1],d=ue(),l=Object(r.useState)(!1),u=Object(ee.a)(l,2),m=u[0],b=u[1],j=Object(r.useState)(!1),p=Object(ee.a)(j,2),f=p[0],g=p[1],h=Object(te.a)(_,{onError:function(){s(me),b(!0)}}),x=function(){var e=Object(X.a)(Q.a.mark((function e(t){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.mutate({username:t.username,password:t.password});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(Object(r.useEffect)((function(){var e,t,a,r,i,o;h.isSuccess&&!h.isLoading&&(localStorage.setItem("access_token",null!==(e=null===(t=h.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.access_token)&&void 0!==e?e:""),n(null!==(r=null===(i=h.data)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.access_token)&&void 0!==r?r:""),g(!0))}),[h]),f&&h.isSuccess||(null===t||void 0===t?void 0:t.username))return Object(a.jsx)(y.a,{to:"/dashboard"});var O=ie.b().shape({username:ie.d().required("Please enter your username."),password:ie.d().required("Please enter your password.")});return Object(a.jsx)("div",{className:d.root,children:Object(a.jsx)(ne.b,{initialValues:{username:"",password:""},onSubmit:function(e,t){x(e),setTimeout((function(){t.setSubmitting(!1)}),400)},validationSchema:O,children:function(e){var t=e.handleBlur,n=e.handleChange,r=e.values,i=e.isSubmitting,o=e.touched,s=e.errors;return Object(a.jsx)(ne.a,{children:Object(a.jsxs)(ae.a,{container:!0,direction:"row",children:[Object(a.jsx)(ae.a,{item:!0,className:d.title,xs:12,children:Object(a.jsx)("h1",{children:"Login"})}),Object(a.jsx)(ae.a,{item:!0,className:d.textField,xs:8,children:Object(a.jsx)(re.a,{id:"username",name:"username",type:"text",label:"Username",value:r.username,onChange:n,onBlur:t,helperText:o.username&&s.username?s.username:"",error:!(!o.username||!s.username)})}),Object(a.jsx)(ae.a,{item:!0,className:d.textField,xs:8,children:Object(a.jsx)(re.a,{id:"password",name:"password",type:"password",label:"Password",value:r.password,onChange:n,onBlur:t,helperText:o.password&&s.password?s.password:"",error:!(!o.password||!s.password)})}),Object(a.jsxs)(ae.a,{item:!0,className:d.loginButton,xs:6,children:[Object(a.jsxs)(K.a,{color:"primary",type:"submit",variant:"contained",disabled:i,children:[" ","Log in"]}),m&&Object(a.jsx)("div",{className:"formStatus",children:Object(a.jsx)("p",{className:d.errorMessage,children:c.message})})]})]})})}})})})),je=n(412),pe=n(411),fe=n(413),ge=n(414);function he(){return{type:"@prefix/START_ACTION"}}var xe=function(e){return{type:"@prefix/SET_ACCOUNTS",payload:e}};function Oe(e){return{type:"@prefix/SET_SINGLE_ACCOUNT",payload:e}}var ve=Object(L.a)((function(){return Object(P.a)({root:{background:"#FFFFFF",position:"relative",justifyContent:"center",alignItems:"center"},header:{background:"#6A0572",justifyContent:"center",alignItems:"center",paddingTop:"40px",paddingBottom:"50px",color:"#ffffff"},content:{},intro:{color:"#ffffff",textAlign:"center",position:"relative",zIndex:1},heading_1:{fontSize:"3rem",position:"relative",fontWeight:"bold",letterSpacing:-1,margin:"1rem 0 0.5rem 0"},heading_2:{fontSize:"2rem",position:"relative",fontWeight:"bold",letterSpacing:-1,marginBottom:"1rem"},introText:{fontSize:"1.2rem",margin:"0.5rem auto 1rem"},notice:{fontSize:"1em",margin:"1rem 0 1.5rem",color:"#111"},listTitle:{fontSize:"1.2em",fontWeight:"bold",color:"#000"},containedBtn:{backgroundColor:"#6A0572",padding:"12px 20px",fontWeight:"bold",color:"#ffffff",margin:"0 0.5em",width:"auto"}})})),Se=Object(d.b)((function(e){return{accountdata:e.accountdata}}),{setAccounts:xe})((function(e){var t,n=e.accountdata,o=e.setAccounts,c=ve(),d=Object(y.f)(),l=Object(T.a)(["getAccounts",n],z,{enabled:0===n.accounts.length});return Object(r.useEffect)((function(){l.isSuccess&&0===n.accounts.length&&l.data.data&&o(l.data.data)}),[l,n]),Object(a.jsxs)("div",{className:c.root,children:[Object(a.jsx)("div",{className:c.header,children:Object(a.jsxs)(je.a,{maxWidth:"xl",children:[Object(a.jsx)("h1",{className:c.heading_1,children:"Dashboard"}),Object(a.jsx)("p",{className:c.introText,children:"Manage your organizations and bookings."})]})}),Object(a.jsx)("div",{className:c.content,children:Object(a.jsxs)(je.a,{maxWidth:"xl",children:[Object(a.jsx)("h2",{className:c.heading_2,children:"Your organizations"}),0===n.accounts.length?Object(a.jsxs)("p",{className:c.notice,children:["You haven't added any organizations yet. Add one to get started!"," "]}):Object(a.jsx)(pe.a,{children:n.accounts.map((function(e){return Object(a.jsx)(fe.a,{children:Object(a.jsx)(ge.a,{className:c.heading_2,primary:Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(q.a,{className:c.listTitle,component:s.b,to:"/account/".concat(e.id,"/services"),children:e.name})}),secondary:Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(q.a,{component:s.b,to:"/account/".concat(e.id,"/services"),children:"Edit services"})," | ",Object(a.jsx)(q.a,{component:s.b,to:"/account/".concat(e.id,"/edit"),children:"Edit details"})," | ",Object(a.jsx)(q.a,{component:s.b,to:"/account/".concat(e.id,"/calendar"),children:"View Calendar"})]})})},e.id)}))}),Object(a.jsx)(K.a,{color:"primary",className:c.containedBtn,variant:"contained",disableElevation:!0,onClick:(t="/add-account",function(){d.push(t)}),children:"Add new organization"})]})})]})})),ye=Object(L.a)((function(e){return Object(P.a)({root:{background:"#FFFFFF",position:"relative",justifyContent:"center",alignItems:"center"},header:{background:"#6A0572",justifyContent:"center",alignItems:"center",paddingTop:"40px",paddingBottom:"50px",color:"#ffffff"},content:{},intro:{color:"#ffffff",textAlign:"center",position:"relative",zIndex:1},heading_1:{fontSize:"3rem",position:"relative",fontWeight:"bold",letterSpacing:-1,margin:"1rem 0 0.5rem 0"},heading_2:{fontSize:"2rem",position:"relative",fontWeight:"bold",letterSpacing:-1,marginBottom:"1rem"},introText:{fontSize:"1.2rem",margin:"0.5rem auto 1rem"},notice:{fontSize:"1em",margin:"1rem 0 1.5rem",color:"#111"},containedBtn:{backgroundColor:"#6A0572",padding:"12px 20px",fontWeight:"bold",color:"#ffffff",margin:"0 0.5em",width:"auto"},outlinedBtn:{padding:"12px 20px",fontWeight:"bold",color:"#6A0572",margin:"0 0.5em",width:"auto",borderColor:"rgba(0,0,0,0.5)","&:hover":{borderColor:"#6A0572"}},textField:{"& > *":{width:"100%"}},loginButton:{marginTop:"30px"},title:{textAlign:"left"},successMessage:{color:e.palette.success.main},errorMessage:{color:e.palette.error.main}})})),Te={message:"Something went wrong. Please try again.",type:"error"},ke={message:"Organisation details saved!",type:"success"},Ne=Object(d.b)((function(e){return{accountdata:e.accountdata}}),{setAccounts:xe,addAccount:function(e){return{type:"@prefix/ADD_ACCOUNT",payload:e}},startAction:he,setSingleAccount:Oe})((function(e){var t=e.accountdata,n=e.addAccount,i=e.accountToEdit,o=e.startAction,c=e.setSingleAccount,s=Object(y.f)(),d=Object(r.useState)({message:"",type:""}),l=Object(ee.a)(d,2),u=l[0],m=l[1],b=ye(),j=Object(r.useState)(!1),p=Object(ee.a)(j,2),f=p[0],g=p[1],h=ie.b().shape({name:ie.d().required("Please enter the name of your organisation."),siteUrl:ie.d(),description:ie.d()}),x=Object(te.a)(F,{onError:function(){m(Te),g(!0)},onSuccess:function(){m(ke),g(!0),o()}}),O=Object(te.a)(E,{onError:function(){m(Te),g(!0)},onSuccess:function(){m(ke),g(!0),o()}}),v=function(){var e=Object(X.a)(Q.a.mark((function e(t){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i?O.mutate({id:i.id,name:t.name,siteUrl:t.siteUrl,description:t.description,services:i.services}):x.mutate({name:t.name,siteUrl:t.siteUrl,description:t.description});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){var e,a,r=null===(e=x.data)||void 0===e?void 0:e.data;x.isSuccess&&!x.isLoading&&r&&t.updating&&n(r);var i=null===(a=O.data)||void 0===a?void 0:a.data;O.isSuccess&&!O.isLoading&&i&&t.updating&&c(i)}),[x,O,t]);return Object(a.jsx)(ne.b,{initialValues:{name:i?i.name:"",siteUrl:i?i.siteUrl:"",description:i?i.description:""},onSubmit:function(e,t){v(e),setTimeout((function(){t.setSubmitting(!1)}),400)},validationSchema:h,children:function(e){var t,n=e.handleBlur,r=e.handleChange,i=e.values,o=e.isSubmitting,c=e.touched,d=e.errors;return Object(a.jsx)(ne.a,{children:Object(a.jsxs)(ae.a,{container:!0,direction:"row",children:[Object(a.jsx)(ae.a,{item:!0,className:b.textField,xs:8,children:Object(a.jsx)(re.a,{id:"name",name:"name",type:"text",label:"Organisation name",value:i.name,onChange:r,onBlur:n,helperText:c.name&&d.name?d.name:"",error:!(!c.name||!d.name)})}),Object(a.jsx)(ae.a,{item:!0,className:b.textField,xs:8,children:Object(a.jsx)(re.a,{id:"siteUrl",name:"siteUrl",type:"siteUrl",label:"Website",value:i.siteUrl,onChange:r,onBlur:n,helperText:c.siteUrl&&d.siteUrl?d.siteUrl:"",error:!(!c.siteUrl||!d.siteUrl)})}),Object(a.jsx)(ae.a,{item:!0,className:b.textField,xs:8,children:Object(a.jsx)(re.a,{id:"description",name:"description",type:"description",label:"Description",value:i.description,onChange:r,onBlur:n,helperText:c.description&&d.description?d.description:"",error:!(!c.description||!d.description)})}),Object(a.jsxs)(ae.a,{item:!0,className:b.loginButton,xs:6,children:[Object(a.jsxs)(K.a,{color:"primary",type:"submit",variant:"contained",disabled:o,className:b.containedBtn,children:[" ","Save"]}),Object(a.jsxs)(K.a,{color:"primary",variant:"outlined",className:b.outlinedBtn,onClick:(t="/dashboard",function(){s.push(t)}),children:[" ","Cancel"]}),f&&Object(a.jsx)("div",{className:"formStatus",children:"success"===u.type?Object(a.jsx)("p",{className:b.successMessage,children:u.message}):"error"===u.type?Object(a.jsx)("p",{className:b.errorMessage,children:u.message}):null})]})]})})}})})),we=Object(L.a)((function(e){return Object(P.a)({root:{background:"#FFFFFF",position:"relative",justifyContent:"center",alignItems:"center"},header:{background:"#6A0572",justifyContent:"center",alignItems:"center",paddingTop:"40px",paddingBottom:"50px",color:"#ffffff"},content:{},intro:{color:"#ffffff",textAlign:"center",position:"relative",zIndex:1},heading_1:{fontSize:"3rem",position:"relative",fontWeight:"bold",letterSpacing:-1,margin:"1rem 0 0.5rem 0"},heading_2:{fontSize:"2rem",position:"relative",fontWeight:"bold",letterSpacing:-1,marginBottom:"1rem"},introText:{fontSize:"1.2rem",margin:"0.5rem auto 1rem"},notice:{fontSize:"1em",margin:"1rem 0 1.5rem",color:"#111"}})})),Be=Object(d.b)((function(e){return{accountdata:e.accountdata}}))((function(e){var t=e.accountdata,n=Object(y.g)().id,r=n?t.accounts.find((function(e){return e.id===parseInt(n)})):void 0,i=n?"Edit organization":"Add new organization",o=we();return Object(a.jsxs)("div",{className:o.root,children:[Object(a.jsx)("div",{className:o.header,children:Object(a.jsx)(je.a,{maxWidth:"xl",children:Object(a.jsx)("h1",{className:o.heading_1,children:i})})}),Object(a.jsx)("div",{className:o.content,children:Object(a.jsxs)(je.a,{maxWidth:"xl",children:[Object(a.jsx)("h2",{className:o.heading_2,children:"General information"}),Object(a.jsx)("p",{className:o.introText,children:"Edit the name, website url and free description of your organization."}),Object(a.jsx)(Ne,{accountToEdit:r})]})})]})})),Ce=Object(L.a)((function(){return Object(P.a)({root:{background:"#FFFFFF",position:"relative",justifyContent:"center",alignItems:"center"},header:{background:"#6A0572",justifyContent:"center",alignItems:"center",paddingTop:"40px",paddingBottom:"50px",color:"#ffffff"},content:{},intro:{color:"#ffffff",textAlign:"center",position:"relative",zIndex:1},heading_1:{fontSize:"3rem",position:"relative",fontWeight:"bold",letterSpacing:-1,margin:"1rem 0 0.5rem 0"},heading_2:{fontSize:"2rem",position:"relative",fontWeight:"bold",letterSpacing:-1,marginBottom:"1rem"},introText:{fontSize:"1.2rem",margin:"0.5rem auto 1rem"},notice:{fontSize:"1em",margin:"1rem 0 1.5rem",color:"#111"},listTitle:{fontSize:"1.2em",fontWeight:"bold",color:"#000"},containedBtn:{backgroundColor:"#6A0572",padding:"12px 20px",fontWeight:"bold",color:"#ffffff",margin:"0 0.5em",width:"auto"}})})),Ae=Object(d.b)((function(e){return{accountdata:e.accountdata}}),{setAccounts:xe})((function(e){var t,n=e.accountdata,o=e.setAccounts,c=Object(r.useState)("/dashboard"),d=Object(ee.a)(c,2),l=d[0],u=d[1],m=Object(r.useState)("Your services"),b=Object(ee.a)(m,2),j=b[0],p=b[1],f=Ce(),g=Object(y.f)(),h=Object(y.g)().accountId,x=h?n.accounts.find((function(e){return e.id===parseInt(h)})):void 0,O=Object(T.a)(["getAccounts",n],z,{enabled:0===n.accounts.length});return Object(r.useEffect)((function(){x&&(u("/account/".concat(x.id,"/services/add")),p("Services for ".concat(x.name))),!x&&O.isSuccess&&0===n.accounts.length&&O.data.data&&o(O.data.data)}),[O,n,x]),Object(a.jsxs)("div",{className:f.root,children:[Object(a.jsx)("div",{className:f.header,children:Object(a.jsxs)(je.a,{maxWidth:"xl",children:[Object(a.jsx)("h1",{className:f.heading_1,children:"Manage services"}),Object(a.jsx)("p",{className:f.introText,children:"Manage account services."})]})}),Object(a.jsx)("div",{className:f.content,children:Object(a.jsxs)(je.a,{maxWidth:"xl",children:[Object(a.jsx)("h2",{className:f.heading_2,children:j}),x&&0===x.services.length?Object(a.jsxs)("p",{className:f.notice,children:["You haven't added any services yet. Add one to get started!"," "]}):Object(a.jsx)(pe.a,{children:x&&x.services.map((function(e){return Object(a.jsx)(fe.a,{children:Object(a.jsx)(ge.a,{className:f.heading_2,primary:Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(q.a,{className:f.listTitle,component:s.b,to:"/account/".concat(x.id,"/services/").concat(e.id,"/edit"),children:e.name})}),secondary:Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(q.a,{component:s.b,to:"/account/".concat(x.id,"/services/").concat(e.id,"/edit"),children:"Edit service"})})})},e.id)}))}),Object(a.jsx)(K.a,{color:"primary",className:f.containedBtn,variant:"contained",disableElevation:!0,onClick:(t=l,function(){g.push(t)}),children:"Add new service"})]})})]})})),Ie=Object(L.a)((function(e){return Object(P.a)({root:{background:"#FFFFFF",position:"relative",justifyContent:"center",alignItems:"center"},header:{background:"#6A0572",justifyContent:"center",alignItems:"center",paddingTop:"40px",paddingBottom:"50px",color:"#ffffff"},content:{},intro:{color:"#ffffff",textAlign:"center",position:"relative",zIndex:1},heading_1:{fontSize:"3rem",position:"relative",fontWeight:"bold",letterSpacing:-1,margin:"1rem 0 0.5rem 0"},heading_2:{fontSize:"2rem",position:"relative",fontWeight:"bold",letterSpacing:-1,marginBottom:"1rem"},introText:{fontSize:"1.2rem",margin:"0.5rem auto 1rem"},notice:{fontSize:"1em",margin:"1rem 0 1.5rem",color:"#111"},containedBtn:{backgroundColor:"#6A0572",padding:"12px 20px",fontWeight:"bold",color:"#ffffff",margin:"0 0.5em",width:"auto"},outlinedBtn:{padding:"12px 20px",fontWeight:"bold",color:"#6A0572",margin:"0 0.5em",width:"auto",borderColor:"rgba(0,0,0,0.5)","&:hover":{borderColor:"#6A0572"}},textField:{"& > *":{width:"100%"}},loginButton:{marginTop:"30px"},title:{textAlign:"left"},successMessage:{color:e.palette.success.main},errorMessage:{color:e.palette.error.main}})})),_e={message:"Something went wrong. Please try again.",type:"error"},Fe={message:"Space details saved!",type:"success"},Ee=Object(d.b)((function(e){return{accountdata:e.accountdata}}),{startAction:he,setSingleAccount:Oe})((function(e){var t=e.accountdata,n=e.serviceToEdit,i=e.startAction,o=e.setSingleAccount,c=e.account,s=Object(y.f)(),d=Object(r.useState)({message:"",type:""}),l=Object(ee.a)(d,2),u=l[0],m=l[1],b=Ie(),p=Object(r.useState)(!1),f=Object(ee.a)(p,2),h=f[0],x=f[1],O=Object(r.useState)(!1),v=Object(ee.a)(O,2),S=v[0],T=v[1],k=ie.b().shape({name:ie.d().required("Please enter the name for the space."),description:ie.d(),maxBookings:ie.a().required("Please enter maximum number of bookings"),startTime:ie.d().required("Please enter starting time"),endTime:ie.d().required("Please enter ending time."),timeSlotLen:ie.a().required("Please enter time slot length.")}),N=Object(te.a)(W,{onError:function(){m(_e),x(!0)},onSuccess:function(){m(Fe),x(!0),i()}}),w=Object(te.a)(D,{onError:function(){m(_e),x(!0)},onSuccess:function(){m(Fe),x(!0),i()}}),B=function(){var e=Object(X.a)(Q.a.mark((function e(t){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=2;break}return e.abrupt("return");case 2:n?w.mutate({id:n.id,name:t.name,description:t.description,maxBookings:t.maxBookings,startTime:t.startTime,endTime:t.endTime,timeSlotLen:t.timeSlotLen,account_id:c.id}):N.mutate({name:t.name,description:t.description,maxBookings:t.maxBookings,startTime:t.startTime,endTime:t.endTime,timeSlotLen:t.timeSlotLen,account_id:c.id});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();console.log(c,N),Object(r.useEffect)((function(){var e,n,a=null===(e=N.data)||void 0===e?void 0:e.data;if(N.isSuccess&&!N.isLoading&&a&&c&&t.updating){var r=Object(j.a)(Object(j.a)({},c),{},{services:[a].concat(Object(g.a)(c.services))});o(r),T(!0)}var i=null===(n=w.data)||void 0===n?void 0:n.data;if(w.isSuccess&&!w.isLoading&&i&&c&&t.updating){var s=Object(j.a)(Object(j.a)({},c),{},{services:c.services.map((function(e){return e.id===i.id?i:e}))});o(s),T(!0)}}),[N,w,t]);return S?Object(a.jsx)(y.a,{to:c?"/account/".concat(c.id,"/services/"):"/dashboard"}):Object(a.jsx)(ne.b,{initialValues:{name:n?n.name:"",description:n?n.description:"",maxBookings:n?n.maxBookings:"",startTime:n?n.startTime:"",endTime:n?n.endTime:"",timeSlotLen:n?n.timeSlotLen:""},onSubmit:function(e,t){B(e),setTimeout((function(){t.setSubmitting(!1)}),400)},validationSchema:k,children:function(e){var t,n=e.handleBlur,r=e.handleChange,i=e.values,o=e.isSubmitting,d=e.touched,l=e.errors;return Object(a.jsx)(ne.a,{children:Object(a.jsxs)(ae.a,{container:!0,direction:"row",children:[Object(a.jsx)(ae.a,{item:!0,className:b.textField,xs:8,children:Object(a.jsx)(re.a,{id:"name",name:"name",type:"text",label:"Space name",value:i.name,onChange:r,onBlur:n,helperText:d.name&&l.name?l.name:"",error:!(!d.name||!l.name)})}),Object(a.jsx)(ae.a,{item:!0,className:b.textField,xs:8,children:Object(a.jsx)(re.a,{id:"description",name:"description",type:"text",label:"Description",value:i.description,onChange:r,onBlur:n,helperText:d.description&&l.description?l.description:"",error:!(!d.description||!l.description)})}),Object(a.jsx)(ae.a,{item:!0,className:b.textField,xs:8,children:Object(a.jsx)(re.a,{id:"maxBookings",name:"maxBookings",type:"number",label:"Max bookings",value:i.maxBookings,onChange:r,onBlur:n,helperText:d.description&&l.description?l.description:"",error:!(!d.description||!l.description)})}),Object(a.jsx)(ae.a,{item:!0,className:b.textField,xs:8,children:Object(a.jsx)(re.a,{id:"startTime",name:"startTime",type:"text",label:"Start time",value:i.startTime,onChange:r,onBlur:n,helperText:d.description&&l.description?l.description:"",error:!(!d.description||!l.description)})}),Object(a.jsx)(ae.a,{item:!0,className:b.textField,xs:8,children:Object(a.jsx)(re.a,{id:"endTime",name:"endTime",type:"text",label:"End time",value:i.endTime,onChange:r,onBlur:n,helperText:d.description&&l.description?l.description:"",error:!(!d.description||!l.description)})}),Object(a.jsx)(ae.a,{item:!0,className:b.textField,xs:8,children:Object(a.jsx)(re.a,{id:"timeSlotLen",name:"timeSlotLen",type:"number",label:"Time slot (i.e. 30 mins, 60 mins, etc.)",value:i.timeSlotLen,onChange:r,onBlur:n,helperText:d.description&&l.description?l.description:"",error:!(!d.description||!l.description)})}),Object(a.jsxs)(ae.a,{item:!0,className:b.loginButton,xs:6,children:[Object(a.jsxs)(K.a,{color:"primary",type:"submit",variant:"contained",disabled:o,className:b.containedBtn,children:[" ","Save"]}),Object(a.jsxs)(K.a,{color:"primary",variant:"outlined",className:b.outlinedBtn,onClick:(t=c?"/account/".concat(c.id,"/services/"):"/dashboard",function(){s.push(t)}),children:[" ","Cancel"]}),h&&Object(a.jsx)("div",{className:"formStatus",children:"success"===u.type?Object(a.jsx)("p",{className:b.successMessage,children:u.message}):"error"===u.type?Object(a.jsx)("p",{className:b.errorMessage,children:u.message}):null})]})]})})}})})),ze=Object(L.a)((function(e){return Object(P.a)({root:{background:"#FFFFFF",position:"relative",justifyContent:"center",alignItems:"center"},header:{background:"#6A0572",justifyContent:"center",alignItems:"center",paddingTop:"40px",paddingBottom:"50px",color:"#ffffff"},content:{},intro:{color:"#ffffff",textAlign:"center",position:"relative",zIndex:1},heading_1:{fontSize:"3rem",position:"relative",fontWeight:"bold",letterSpacing:-1,margin:"1rem 0 0.5rem 0"},heading_2:{fontSize:"2rem",position:"relative",fontWeight:"bold",letterSpacing:-1,marginBottom:"1rem"},introText:{fontSize:"1.2rem",margin:"0.5rem auto 1rem"},notice:{fontSize:"1em",margin:"1rem 0 1.5rem",color:"#111"}})})),We=Object(d.b)((function(e){return{accountdata:e.accountdata}}))((function(e){var t=e.accountdata,n=Object(y.g)(),r=n.accountId,i=n.serviceId;r||y.a;var o=r?t.accounts.find((function(e){return e.id===parseInt(r)})):void 0,c=i?null===o||void 0===o?void 0:o.services.find((function(e){return e.id===parseInt(i)})):void 0;console.log(r,i,o,c);var s=i?"Edit space":"Add new space",d=ze();return Object(a.jsxs)("div",{className:d.root,children:[Object(a.jsx)("div",{className:d.header,children:Object(a.jsx)(je.a,{maxWidth:"xl",children:Object(a.jsx)("h1",{className:d.heading_1,children:s})})}),Object(a.jsx)("div",{className:d.content,children:Object(a.jsxs)(je.a,{maxWidth:"xl",children:[Object(a.jsx)("h2",{className:d.heading_2,children:"General information"}),Object(a.jsx)("p",{className:d.introText,children:"Enter the space information."}),Object(a.jsx)(Ee,{account:o,serviceToEdit:c})]})})]})})),De=n(424),Ue=n(417),Le=n(415),Pe=n(418),Me=n(416),Re=n(419),qe=n(29),Ge=n(187);var Ve=Object(d.b)((function(e){return{selectedDate:e.bookingData.selectedDate}}),{setSelectedDate:function(e){return{type:"@prefix/SET_SELECTED_DATE",payload:e}}})((function(e){var t=e.selectedDate,n=e.setSelectedDate;return Object(a.jsx)(qe.a,{utils:Ge.a,children:Object(a.jsx)(Re.a,{value:t,onChange:function(e){e&&n(e)},variant:"inline",inputVariant:"outlined",label:"Date"})})})),Je=Object(L.a)((function(e){return Object(P.a)({root:{background:"#FFFFFF",position:"relative",justifyContent:"center",alignItems:"center"},header:{background:"#6A0572",justifyContent:"center",alignItems:"center",paddingTop:"40px",paddingBottom:"50px",color:"#ffffff"},content:{},intro:{color:"#ffffff",textAlign:"center",position:"relative",zIndex:1},heading_1:{fontSize:"3rem",position:"relative",fontWeight:"bold",letterSpacing:-1,margin:"1rem 0 0.5rem 0"},heading_2:{fontSize:"2rem",position:"relative",fontWeight:"bold",letterSpacing:-1,marginBottom:"1rem"},introText:{fontSize:"1.2rem",margin:"0.5rem auto 1rem"},notice:{fontSize:"1em",margin:"1rem 0 1.5rem",color:"#111"},containedBtn:{backgroundColor:"#6A0572",padding:"12px 20px",fontWeight:"bold",color:"#ffffff",margin:"0 0.5em",width:"auto"},outlinedBtn:{padding:"12px 20px",fontWeight:"bold",color:"#6A0572",margin:"0 0.5em",width:"auto",borderColor:"rgba(0,0,0,0.5)","&:hover":{borderColor:"#6A0572"}},textField:{"& > *":{width:"100%"}},loginButton:{marginTop:"30px"},title:{textAlign:"left"},successMessage:{color:e.palette.success.main},errorMessage:{color:e.palette.error.main}})})),Ye={message:"Something went wrong. Please try again.",type:"error"},Ke={message:"Organisation details saved!",type:"success"},$e=Object(d.b)((function(e){return{updating:e.bookingData.updating}}),{startAction:function(){return{type:"@prefix/START_ACTION"}},addBooking:function(e){return{type:"@prefix/ADD_BOOKING",payload:e}}})((function(e){var t=e.selectedSlot,n=e.handleCloseBookingForm,i=e.updating,o=e.startAction,c=e.addBooking,s=Object(r.useState)({message:"",type:""}),d=Object(ee.a)(s,2),l=d[0],u=d[1],m=Object(r.useState)(!1),b=Object(ee.a)(m,2),j=b[0],p=b[1],f=Je(),g=ie.b().shape({email:ie.d().required("Please enter your email.")}),h=Object(te.a)(U,{onError:function(){console.log("error"),u(Ye),p(!0)},onSuccess:function(){console.log("success"),u(Ke),p(!0),o()}});return Object(r.useEffect)((function(){var e,t=null===(e=h.data)||void 0===e?void 0:e.data;h.isSuccess&&!h.isLoading&&t&&i&&(c(t),n())}),[h,i]),Object(a.jsx)(ne.b,{initialValues:{email:""},onSubmit:function(e,n){!function(e){if(t){var n=t.date?t.date:new Date,a=new Date(n.getTime()-6e4*n.getTimezoneOffset()).toISOString().split("T")[0];h.mutate({email:e.email,date:a,slotNumber:t.slotNumber,service_id:t.service.id})}}(e),setTimeout((function(){n.setSubmitting(!1)}),400)},validationSchema:g,children:function(e){var t=e.handleBlur,n=e.handleChange,r=e.values,i=e.isSubmitting,o=e.touched,c=e.errors;return Object(a.jsx)(ne.a,{children:Object(a.jsxs)(ae.a,{container:!0,direction:"row",children:[Object(a.jsx)(ae.a,{item:!0,className:f.textField,xs:8,children:Object(a.jsx)(re.a,{id:"email",name:"email",type:"email",label:"Your email",value:r.email,onChange:n,onBlur:t,helperText:o.email&&c.email?c.email:"",error:!(!o.email||!c.email)})}),Object(a.jsxs)(ae.a,{item:!0,className:f.loginButton,xs:6,children:[Object(a.jsxs)(K.a,{color:"primary",type:"submit",variant:"contained",disabled:i,className:f.containedBtn,children:[" ","Make booking"]}),j&&Object(a.jsx)("div",{className:"formStatus",children:"success"===l.type?Object(a.jsx)("p",{className:f.successMessage,children:l.message}):"error"===l.type?Object(a.jsx)("p",{className:f.errorMessage,children:l.message}):null})]})]})})}})})),He=Object(L.a)((function(){return Object(P.a)({root:{background:"#eee",position:"relative",justifyContent:"center",alignItems:"center"},gridContainer:{display:"flex",width:"100%",flexDirection:"row"},gridItem:{minWidth:"200px",maxWidth:"50%",width:"100%",flex:"auto",margin:"5px"},gridContent:{display:"flex",flexDirection:"column"},header:{background:"#6A0572",justifyContent:"center",alignItems:"center",paddingTop:"20px",paddingBottom:"30px",color:"#ffffff"},content:{},heading_1:{fontSize:"3rem",position:"relative",fontWeight:"bold",letterSpacing:-1,margin:"1rem 0 0.5rem 0"},heading_2:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"1rem",textAlign:"center"},slotContainer:{background:"#fff",display:"flex",padding:"15px",alignItems:"center",justifyContent:"center",margin:"2px",cursor:"pointer"},slotContent:{},containedBtn:{backgroundColor:"#6A0572",padding:"12px 20px",fontWeight:"bold",color:"#ffffff",margin:"0 0.5em",width:"auto"},row:{padding:"15px 0",background:"#ddd"}})})),Ze=Object(d.b)((function(e){return{accountdata:e.accountdata,bookingData:e.bookingData}}),{setAccounts:xe,setSingleAccount:Oe})((function(e){var t,n=e.accountdata,i=e.bookingData,o=e.setAccounts,c=Object(r.useState)(!1),s=Object(ee.a)(c,2),d=s[0],l=s[1],u=Object(r.useState)(null),m=Object(ee.a)(u,2),b=m[0],j=m[1],p=function(){l(!1)},f=Object(y.g)().accountId,g=n&&f&&n.accounts.find((function(e){return e.id===parseInt(f)}));console.log("account first",g,n,i,d);var h=He(),x=Object(T.a)(["getAccountById",f],(function(){return function(e){var t=localStorage.getItem("access_token"),n={headers:{Authorization:"JWT ".concat(t)}};return B.a.get("".concat(C,"/").concat(A,"/accounts/").concat(e),n)}(f)}),{enabled:!g});Object(r.useEffect)((function(){!g&&x.isSuccess&&x.data.data&&o([x.data.data])}),[x,g]);var O=function(e){var t=e.split(":");return 60*parseInt(t[0])*60+60*parseInt(t[1])},v=function(e){for(var t=function(e){var t=O(e.startTime);return(O(e.endTime)-t)/(60*e.timeSlotLen)}(e),n=[],a=0;a<t;a++){var r=e.startTime.split(":"),o=e.timeSlotLen*a,c="".concat(Math.floor(parseInt(r[0])+o/60)),s="".concat(o%60),d="".concat(1===c.length?0:"").concat(c,":").concat(s).concat(1===s.length?0:"");n.push({id:a,slotNumber:a,isReserved:!1,time:d,service:e,date:i.selectedDate})}return n},S=g?g.services:[];return Object(a.jsxs)("div",{className:h.root,children:[Object(a.jsx)("div",{className:h.header,children:Object(a.jsx)(je.a,{maxWidth:"xl",children:Object(a.jsx)("h1",{className:h.heading_1,children:g?"Booking calendar for ".concat(g.name):"Booking calendar"})})}),Object(a.jsx)("div",{className:h.row,children:Object(a.jsx)(je.a,{maxWidth:"xl",children:Object(a.jsx)(Ve,{})})}),Object(a.jsx)("div",{className:h.content,children:Object(a.jsx)(je.a,{maxWidth:"xl",children:Object(a.jsx)("div",{className:h.gridContainer,children:S.map((function(e){var t=v(e);return Object(a.jsxs)("div",{className:h.gridItem,children:[Object(a.jsx)("h2",{className:h.heading_2,children:e.name}),Object(a.jsx)("div",{className:h.gridContent,children:t.map((function(t){if(t)return Object(a.jsx)("div",{className:h.slotContainer,onClick:function(){return function(e){j(e),l(!0)}(t)},children:Object(a.jsx)("div",{className:h.slotContent,children:t.time})},"".concat(e.id,"-").concat(t.id))}))})]},e.id)}))})})}),Object(a.jsxs)(De.a,{open:d,onClose:p,"aria-labelledby":"form-dialog-title",children:[Object(a.jsx)(Ue.a,{id:"form-dialog-title",children:"Make a booking"}),Object(a.jsxs)(Le.a,{children:[Object(a.jsx)(Pe.a,{children:b&&"To confirm your booking of ".concat(b.service.name," for ").concat(null===b||void 0===b||null===(t=b.date)||void 0===t?void 0:t.toDateString()," at ").concat(null===b||void 0===b?void 0:b.time,", add your email below.")}),Object(a.jsx)($e,{selectedSlot:b,handleCloseBookingForm:p})]}),Object(a.jsx)(Me.a,{children:Object(a.jsx)(K.a,{onClick:p,color:"primary",children:"Cancel"})})]})]})})),Qe=Object(d.b)((function(e){return{token:e.userdata.token}}),{setToken:k,setUser:N})((function(e){var t=e.token,n=e.setToken,i=e.setUser,o=Object(T.a)(["me",t],(function(){return function(e){var t={headers:{Authorization:"JWT ".concat(e)}};return B.a.get("".concat(C,"/").concat(A,"/me"),t)}(t)}),{enabled:!!t,onError:function(){n(""),localStorage.removeItem("access_token")}});return Object(r.useEffect)((function(){var e,t,a,r,c;(n(null!==(e=localStorage.getItem("access_token"))&&void 0!==e?e:""),o.isSuccess)&&i({username:null===(t=o.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.username,email:null===(r=o.data)||void 0===r||null===(c=r.data)||void 0===c?void 0:c.email})}),[o]),Object(a.jsxs)("div",{children:[Object(a.jsx)(Y,{}),Object(a.jsx)(y.b,{exact:!0,path:"/",component:H}),Object(a.jsx)(y.b,{exact:!0,path:"/dashboard",component:Se}),Object(a.jsx)(y.b,{exact:!0,path:"/add-account",component:Be}),Object(a.jsx)(y.b,{path:"/account/:id/edit",component:Be}),Object(a.jsx)(y.b,{path:"/account/:accountId/calendar",component:Ze}),Object(a.jsx)(y.b,{exact:!0,path:"/account/:accountId/services",component:Ae}),Object(a.jsx)(y.b,{path:"/account/:accountId/services/add",component:We}),Object(a.jsx)(y.b,{path:"/account/:accountId/services/:serviceId/edit",component:We}),Object(a.jsx)(y.b,{exact:!0,path:"/register",component:le}),Object(a.jsx)(y.b,{exact:!0,path:"/login",component:be})]})})),Xe=Object(m.d)(S,{},Object(m.a)(b.a)),et=new l.a;var tt=function(){return Object(a.jsx)(d.a,{store:Xe,children:Object(a.jsx)(u.a,{client:et,children:Object(a.jsx)(Qe,{})})})};c.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(s.a,{children:Object(a.jsx)(tt,{})})}),document.getElementById("root"))}},[[374,1,2]]]);
//# sourceMappingURL=main.87756ac9.chunk.js.map