(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{259:function(e,t,n){},405:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n(0),r=n.n(i),o=n(24),c=n.n(o),s=n(17),d=(n(259),n(13)),l=n(461),u=n(129),m=n(243),b=n(458),j=n(88),g=n(219),p=n(10),f={user:void 0,token:void 0,loggedOut:!1,updateUser:!0},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@prefix/SET_TOKEN":return Object(p.a)(Object(p.a)({},e),{},{token:t.payload});case"@prefix/SET_USER":return Object(p.a)(Object(p.a)({},e),{},{user:t.payload,loggedOut:!1,updateUser:!1});case"@prefix/LOGOUT_USER":return Object(p.a)(Object(p.a)({},e),{},{user:void 0,token:void 0,loggedOut:!0,updateUser:!1});default:return e}},h=n(35),O={accounts:[],updatingAccounts:!0},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@prefix/START_ACCOUNT_ACTION":return Object(p.a)(Object(p.a)({},e),{},{updatingAccounts:!0});case"@prefix/DONE_ACCOUNT_ACTION":return Object(p.a)(Object(p.a)({},e),{},{updatingAccounts:!1});case"@prefix/ADD_ACCOUNT":return Object(p.a)(Object(p.a)({},e),{},{accounts:[t.payload].concat(Object(h.a)(e.accounts)),updatingAccounts:!1});case"@prefix/REMOVE_ACCOUNT":return Object(p.a)(Object(p.a)({},e),{},{accounts:e.accounts.filter((function(e){return e.id!==t.payload.id})),updatingAccounts:!1});case"@prefix/SET_ACCOUNTS":return Object(p.a)(Object(p.a)({},e),{},{accounts:t.payload,updatingAccounts:!1});case"@prefix/SET_SINGLE_ACCOUNT":return Object(p.a)(Object(p.a)({},e),{},{accounts:e.accounts.map((function(e){return e.id===t.payload.id?t.payload:e})),updatingAccounts:!1});default:return e}},S={bookings:[],updatingBookings:!1,selectedDate:new Date,bookingFormVisible:!1},k=function(e,t){return e.concat(t).reduce((function(e,t){return e.some((function(e){return JSON.stringify(t)===JSON.stringify(e)}))?e:[].concat(Object(h.a)(e),[t])}),[])},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@prefix/START_BOOKING_ACTION":return Object(p.a)(Object(p.a)({},e),{},{updatingBookings:!0});case"@prefix/ADD_BOOKING":return Object(p.a)(Object(p.a)({},e),{},{bookings:[t.payload].concat(Object(h.a)(e.bookings)),updatingBookings:!1});case"@prefix/REMOVE_BOOKING":return Object(p.a)(Object(p.a)({},e),{},{bookings:e.bookings.filter((function(e){return e.id!==t.payload.id})),updatingBookings:!1});case"@prefix/SET_BOOKINGS":return Object(p.a)(Object(p.a)({},e),{},{bookings:k(e.bookings,t.payload),updatingBookings:!1});case"@prefix/EDIT_BOOKINGS":return Object(p.a)(Object(p.a)({},e),{},{bookings:t.payload,updatingBookings:!1});case"@prefix/RESET_BOOKINGS":return Object(p.a)(Object(p.a)({},e),{},{bookings:S.bookings,updatingBookings:!1});case"@prefix/SET_SELECTED_DATE":return Object(p.a)(Object(p.a)({},e),{},{selectedDate:t.payload});case"@prefix/SET_FORM_VISIBILITY":return Object(p.a)(Object(p.a)({},e),{},{bookingFormVisible:!e.bookingFormVisible});default:return e}},y=Object(j.c)({userdata:x,accountdata:v,bookingData:N});var T=n(31),B=n(462);function w(e){return{type:"@prefix/SET_TOKEN",payload:e}}var C=function(e){return{type:"@prefix/SET_USER",payload:e}},A=function(){return{type:"@prefix/LOGOUT_USER"}},I=n(36),F=n.n(I),_="https://space-booker.herokuapp.com",z="api/v1";function E(e){return F.a.post("".concat(_,"/").concat(z,"/register"),e)}function W(e){return F.a.post("".concat(_,"/auth"),e)}function D(e){var t=localStorage.getItem("access_token"),n={headers:{Authorization:"JWT ".concat(t)}};return F.a.post("".concat(_,"/").concat(z,"/accounts"),e,n)}function U(e){var t=localStorage.getItem("access_token"),n={headers:{Authorization:"JWT ".concat(t)}};return F.a.put("".concat(_,"/").concat(z,"/accounts/").concat(e.id),e,n)}function L(e){var t=e.account,n=e.username,a=e.role,i=localStorage.getItem("access_token"),r={headers:{Authorization:"JWT ".concat(i)}};return F.a.put("".concat(_,"/").concat(z,"/users/account/").concat(t.id),{username:n,role:a},r)}function M(e){var t=localStorage.getItem("access_token"),n={headers:{Authorization:"JWT ".concat(t)}};return F.a.delete("".concat(_,"/").concat(z,"/accounts/").concat(e.id),n)}function R(){var e=localStorage.getItem("access_token"),t={headers:{Authorization:"JWT ".concat(e)}};return F.a.get("".concat(_,"/").concat(z,"/accounts"),t)}function P(e){var t=localStorage.getItem("access_token"),n={headers:{Authorization:"JWT ".concat(t)}};return F.a.post("".concat(_,"/").concat(z,"/services"),e,n)}function G(e){var t=localStorage.getItem("access_token"),n={headers:{Authorization:"JWT ".concat(t)}};return F.a.put("".concat(_,"/").concat(z,"/services/").concat(e.id),e,n)}function V(e){var t=localStorage.getItem("access_token"),n={headers:{Authorization:"JWT ".concat(t)}};return F.a.delete("".concat(_,"/").concat(z,"/services/").concat(e.id),n)}function J(e){var t=localStorage.getItem("access_token"),n={headers:{Authorization:"JWT ".concat(t)}};return F.a.post("".concat(_,"/").concat(z,"/bookings"),e,n)}function q(e){var t=localStorage.getItem("access_token"),n={headers:{Authorization:"JWT ".concat(t)}};return F.a.delete("".concat(_,"/").concat(z,"/bookings/").concat(e.id),n)}function H(){return{type:"@prefix/START_ACCOUNT_ACTION"}}var K=function(e){return{type:"@prefix/SET_ACCOUNTS",payload:e}};function Z(e){return{type:"@prefix/SET_SINGLE_ACCOUNT",payload:e}}var Y=n(68),$=n(172),Q=n(445),X=n(446),ee=n(443),te=Object(Y.a)((function(){return Object($.a)({logo:{zIndex:1250,width:"210px",marginRight:"2em"},logoImg:{width:"100%",height:"auto",display:"block"}})})),ne=function(){var e=te();return Object(a.jsx)(ee.a,{component:s.b,className:e.logo,to:"/",children:Object(a.jsx)("img",{src:"/img/logo.png",className:e.logoImg,alt:"SpaceBooker"})})},ae=Object(Y.a)((function(){return Object($.a)({root:{flexGrow:1},appBar:{zIndex:1250,backgroundColor:"#ffffff"},linkBtnTransparent:{padding:"0.8em 1em",border:"1px solid transparent","&:hover":{textDecoration:"none",opacity:.8}},linkBtnBordered:{padding:"0.8em 1em",borderRadius:"4px",border:"1px solid rgba(98,0,238, 0.4)","&:hover":{textDecoration:"none",backgroundColor:"rgba(0,0,0,0.02)",opacity:.8}},loginGreet:{fontSize:".95em",marginRight:"1em",color:"#000"},sectionLeft:{flexGrow:1,textAlign:"left"},toggleButton:{marginRight:25}})})),ie=Object(d.b)((function(e){return{user:e.userdata.user}}),{logoutUser:A})((function(e){var t=e.user,n=e.logoutUser,i=ae(),r=Object(T.f)();return Object(a.jsx)("div",{className:i.root,children:Object(a.jsx)(Q.a,{position:"static",className:i.appBar,children:Object(a.jsxs)(X.a,{children:[Object(a.jsx)(ne,{}),Object(a.jsx)("div",{className:i.sectionLeft,children:t&&Object(a.jsx)(ee.a,{component:s.b,className:i.linkBtnTransparent,to:"/dashboard",children:"Dashboard"})}),Object(a.jsxs)("div",{children:[!t&&Object(a.jsxs)("div",{children:[Object(a.jsx)(ee.a,{component:s.b,className:i.linkBtnTransparent,to:"/login",children:"Login"}),Object(a.jsx)(ee.a,{component:s.b,className:i.linkBtnBordered,to:"/register",children:"Sign up"})]}),t&&Object(a.jsxs)("div",{children:[Object(a.jsxs)("span",{className:i.loginGreet,children:["Hello, ",t.username]}),Object(a.jsx)(ee.a,{component:s.b,className:i.linkBtnBordered,to:"/",onClick:function(){localStorage.removeItem("access_token"),n(),r.push("/")},children:"Logout"})]})]})]})})})})),re=n(138),oe=Object(Y.a)((function(){return Object($.a)({root:{background:"#6A0572",display:"flex",position:"relative",justifyContent:"center",alignItems:"center",height:"calc(100vh - 64px)"},intro:{color:"#ffffff",textAlign:"center",position:"relative",zIndex:1},heading:{fontSize:"4rem",position:"relative",fontWeight:"bold",letterSpacing:-1,marginBottom:"1rem"},introText:{fontSize:"1.5rem",marginTop:"0 auto 2rem"},containedBtn:{backgroundColor:"#df0cc4",padding:"12px 0",fontWeight:"bold",color:"#ffffff",margin:"0 0.5em",width:180},outlinedBtn:{padding:"12px 0",fontWeight:"bold",color:"#ffffff",margin:"0 0.5em",width:180,borderColor:"rgba(255,255,255,0.5)","&:hover":{borderColor:"#fff"}}})})),ce=Object(d.b)((function(e){return{user:e.userdata.user}}))((function(e){var t=e.user;if(null===t||void 0===t?void 0:t.username)return Object(a.jsx)(T.a,{to:"/dashboard"});var n=oe(),i=Object(T.f)(),r=function(e){return function(){i.push(e)}};return Object(a.jsx)("div",{className:n.root,children:Object(a.jsxs)("div",{className:n.intro,children:[Object(a.jsx)("h1",{className:n.heading,children:"Working spaces booking app"}),Object(a.jsx)("p",{className:n.introText,children:"Create a booking calendar for your working spaces in a few seconds."}),Object(a.jsx)(re.a,{color:"primary",className:n.containedBtn,variant:"contained",size:"large",onClick:r("/register"),disableElevation:!0,children:"Sign up"}),Object(a.jsx)(re.a,{color:"secondary",className:n.outlinedBtn,variant:"outlined",size:"large",onClick:r("/login"),disableElevation:!0,children:"Login"})]})})})),se=n(37),de=n.n(se),le=n(48),ue=n(19),me=n(463),be=n(16),je=n(447),ge=n(459),pe=n(22),fe=function(){return pe.b().shape({email:pe.d().email().required("Email address is mandatory."),username:pe.d().required("Please choose your username.").min(3,"Username must be at least 3 characters long.").max(50,"Username can be maximum 50 characters long.").required("Username is mandatory."),password:pe.d().min(8,"Password must be at least 8 characters long.").matches(/^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*[!?@#$%^&*()]).{7,30}\S$/).required("Password must have at least one number, one uppercase character, lowercase  character and special character from !?@#$%^&*() "),confirmPassword:pe.d().oneOf([pe.c("password"),""],"Passwords must match.").required("Passwords must match.")})},xe=Object(Y.a)((function(e){return Object($.a)({root:{maxWidth:"500px",display:"block",margin:"0 auto"},textField:{"& > *":{width:"100%"}},registerButton:{marginTop:"30px"},title:{textAlign:"left"},successMessage:{color:e.palette.success.main},errorMessage:{color:e.palette.error.main}})})),he={message:"Registered successfully.",type:"success"},Oe={message:"Registeration failed: username or email already registered.",type:"error"},ve=Object(d.b)((function(e){return{user:e.userdata.user}}),{setToken:w,setUser:C})((function(e){var t=e.user,n=e.setToken,r=Object(i.useState)({message:"",type:""}),o=Object(ue.a)(r,2),c=o[0],s=o[1],d=Object(i.useState)(!1),l=Object(ue.a)(d,2),u=l[0],m=l[1],b=Object(i.useState)({username:"",password:""}),j=Object(ue.a)(b,2),g=j[0],p=j[1],f=Object(i.useState)(!1),x=Object(ue.a)(f,2),h=x[0],O=x[1],v=xe(),S=Object(me.a)(E,{onError:function(){s(Oe),m(!0)},onSuccess:function(){s(he),m(!0)}}),k=function(){var e=Object(le.a)(de.a.mark((function e(t){return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S.mutate({username:t.username,email:t.email,password:t.password}),p({username:t.username,password:t.password});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=Object(me.a)(W,{onError:function(){s(Oe),m(!0)}}),y=function(){var e=Object(le.a)(de.a.mark((function e(t){return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N.mutate({username:t.username,password:t.password});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e,t,a,i,r,o;(S.isSuccess&&g.username&&g.password&&!N.isLoading&&y(g),N.isSuccess)&&(localStorage.setItem("access_token",null!==(e=null===(t=N.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.access_token)&&void 0!==e?e:""),n(null!==(i=null===(r=N.data)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.access_token)&&void 0!==i?i:""),O(!0))}),[S,t,N]),h||(null===t||void 0===t?void 0:t.username)?Object(a.jsx)(T.a,{to:"/dashboard"}):Object(a.jsx)("div",{className:v.root,children:Object(a.jsx)(be.c,{initialValues:{username:"",email:"",password:"",confirmPassword:""},onSubmit:function(e,t){k(e),setTimeout((function(){t.setSubmitting(!1)}),400)},validationSchema:fe,children:function(e){var t=e.handleBlur,n=e.handleChange,i=e.values,r=e.isSubmitting,o=e.touched,s=e.errors;return Object(a.jsx)(be.b,{children:Object(a.jsxs)(je.a,{container:!0,direction:"row",children:[Object(a.jsx)(je.a,{item:!0,className:v.title,xs:12,children:Object(a.jsx)("h1",{children:"Sign up!"})}),Object(a.jsx)(je.a,{item:!0,className:v.textField,xs:8,children:Object(a.jsx)(ge.a,{id:"username",name:"username",type:"text",label:"Username",value:i.username,onChange:n,onBlur:t,helperText:o.username&&s.username?s.username:"",error:!(!o.username||!s.username)})}),Object(a.jsxs)(je.a,{item:!0,className:v.textField,xs:8,children:[" ",Object(a.jsx)(ge.a,{id:"email",name:"email",type:"text",label:"Email",value:i.email,onChange:n,onBlur:t,helperText:o.email&&s.email?s.email:"",error:!(!o.email||!s.email)})]}),Object(a.jsx)(je.a,{item:!0,className:v.textField,xs:8,children:Object(a.jsx)(ge.a,{id:"password",name:"password",type:"password",label:"Password",value:i.password,onChange:n,onBlur:t,helperText:o.password&&s.password?"Make sure your password is minimum of 8 characters long and consists of at least 1 uppercase, lowercase, number and one special character from !?@#$%^&*(). Password cannot end with an empty space.":"",error:!(!o.password||!s.password)})}),Object(a.jsx)(je.a,{item:!0,className:v.textField,xs:8,children:Object(a.jsx)(ge.a,{id:"confirmPassword",name:"confirmPassword",type:"password",label:"Confirm password",value:i.confirmPassword,onChange:n,onBlur:t,helperText:o.confirmPassword&&s.confirmPassword?"Your confirmation did not match with your password. Please try again.":"",error:!(!o.confirmPassword||!s.confirmPassword)})}),Object(a.jsxs)(je.a,{item:!0,className:v.registerButton,xs:6,children:[Object(a.jsxs)(re.a,{color:"primary",type:"submit",variant:"contained",disabled:r,children:[" ","Sign up"]}),u&&Object(a.jsx)("div",{className:"formStatus",children:"success"===c.type?Object(a.jsx)("p",{className:v.successMessage,children:c.message}):"error"===c.type?Object(a.jsx)("p",{className:v.errorMessage,children:c.message}):null})]})]})})}})})})),Se=Object(Y.a)((function(e){return Object($.a)({root:{maxWidth:"500px",display:"block",margin:"0 auto"},textField:{"& > *":{width:"100%"}},loginButton:{marginTop:"30px"},title:{textAlign:"left"},successMessage:{color:e.palette.success.main},errorMessage:{color:e.palette.error.main}})})),ke={message:"Invalid username or password. Please try again.",type:"error"},Ne=Object(d.b)((function(e){return{user:e.userdata.user}}),{setToken:w,setUser:C})((function(e){var t=e.user,n=e.setToken,r=Object(i.useState)({message:"",type:""}),o=Object(ue.a)(r,2),c=o[0],s=o[1],d=Se(),l=Object(i.useState)(!1),u=Object(ue.a)(l,2),m=u[0],b=u[1],j=Object(i.useState)(!1),g=Object(ue.a)(j,2),p=g[0],f=g[1],x=Object(me.a)(W,{onError:function(){s(ke),b(!0)}}),h=function(){var e=Object(le.a)(de.a.mark((function e(t){return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x.mutate({username:t.username,password:t.password});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(Object(i.useEffect)((function(){var e,t,a,i,r,o;x.isSuccess&&!x.isLoading&&(localStorage.setItem("access_token",null!==(e=null===(t=x.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.access_token)&&void 0!==e?e:""),n(null!==(i=null===(r=x.data)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.access_token)&&void 0!==i?i:""),f(!0))}),[x]),p&&x.isSuccess||(null===t||void 0===t?void 0:t.username))return Object(a.jsx)(T.a,{to:"/dashboard"});var O=pe.b().shape({username:pe.d().required("Please enter your username."),password:pe.d().required("Please enter your password.")});return Object(a.jsx)("div",{className:d.root,children:Object(a.jsx)(be.c,{initialValues:{username:"",password:""},onSubmit:function(e,t){h(e),setTimeout((function(){t.setSubmitting(!1)}),400)},validationSchema:O,children:function(e){var t=e.handleBlur,n=e.handleChange,i=e.values,r=e.isSubmitting,o=e.touched,s=e.errors;return Object(a.jsx)(be.b,{children:Object(a.jsxs)(je.a,{container:!0,direction:"row",children:[Object(a.jsx)(je.a,{item:!0,className:d.title,xs:12,children:Object(a.jsx)("h1",{children:"Login"})}),Object(a.jsx)(je.a,{item:!0,className:d.textField,xs:8,children:Object(a.jsx)(ge.a,{id:"username",name:"username",type:"text",label:"Username",value:i.username,onChange:n,onBlur:t,helperText:o.username&&s.username?s.username:"",error:!(!o.username||!s.username)})}),Object(a.jsx)(je.a,{item:!0,className:d.textField,xs:8,children:Object(a.jsx)(ge.a,{id:"password",name:"password",type:"password",label:"Password",value:i.password,onChange:n,onBlur:t,helperText:o.password&&s.password?s.password:"",error:!(!o.password||!s.password)})}),Object(a.jsxs)(je.a,{item:!0,className:d.loginButton,xs:6,children:[Object(a.jsxs)(re.a,{color:"primary",type:"submit",variant:"contained",disabled:r,children:[" ","Log in"]}),m&&Object(a.jsx)("div",{className:"formStatus",children:Object(a.jsx)("p",{className:d.errorMessage,children:c.message})})]})]})})}})})})),ye=n(449),Te=n(448),Be=n(450),we=n(451),Ce=function(e){return new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().split("T")[0]},Ae=function(e,t){if(!e||!t)return!1;var n=t.user_roles.find((function(t){return t.user.username===(null===e||void 0===e?void 0:e.username)}));return!(!n||"owner"!==n.role.role)},Ie=function(e,t){if(!e||!t)return!1;var n=t.user_roles.find((function(t){return t.user.username===(null===e||void 0===e?void 0:e.username)}));return!(!n||"admin"!==n.role.role)},Fe=Object(Y.a)((function(){return Object($.a)({root:{display:"flex",alignItems:"center",minHeight:"600px",height:"100vh",width:"100%",justifyContent:"center"}})})),_e=function(){var e=Fe();return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)("h2",{children:"Sorry, that\u2018s not allowed."})})},ze=Object(Y.a)((function(){return Object($.a)({root:{background:"#FFFFFF",position:"relative",justifyContent:"center",alignItems:"center"},header:{background:"#6A0572",justifyContent:"center",alignItems:"center",paddingTop:"40px",paddingBottom:"50px",color:"#ffffff"},content:{},intro:{color:"#ffffff",textAlign:"center",position:"relative",zIndex:1},heading_1:{fontSize:"3rem",position:"relative",fontWeight:"bold",letterSpacing:-1,margin:"1rem 0 0.5rem 0"},heading_2:{fontSize:"2rem",position:"relative",fontWeight:"bold",letterSpacing:-1,marginBottom:"1rem"},introText:{fontSize:"1.2rem",margin:"0.5rem auto 1rem"},notice:{fontSize:"1em",margin:"1rem 0 1.5rem",color:"#111"},listItem:{paddingLeft:0},listTitle:{fontSize:"1.2em",fontWeight:"bold",color:"#000"},itemsLeft:{display:"inline-block"},sep:{borderLeft:"1px solid #ddd",padding:"0 4px 0 0",margin:"0 4px 0 8px"},containedBtn:{backgroundColor:"#6A0572",padding:"12px 20px",fontWeight:"bold",color:"#ffffff",margin:0,width:"auto"}})})),Ee=Object(d.b)((function(e){return{accountdata:e.accountdata,me:e.userdata.user,updateUser:e.userdata.updateUser}}))((function(e){var t=e.accountdata,n=e.me,i=e.updateUser,o=ze();if(!n&&!i)return Object(a.jsx)(_e,{});var c,d=Object(T.f)();return Object(a.jsxs)("div",{className:o.root,children:[Object(a.jsx)("div",{className:o.header,children:Object(a.jsxs)(ye.a,{maxWidth:"xl",children:[Object(a.jsx)("h1",{className:o.heading_1,children:"Dashboard"}),Object(a.jsx)("p",{className:o.introText,children:"Manage your organizations and bookings."})]})}),Object(a.jsx)("div",{className:o.content,children:Object(a.jsxs)(ye.a,{maxWidth:"xl",children:[Object(a.jsx)("h2",{className:o.heading_2,children:"Your organizations"}),0===t.accounts.length?Object(a.jsxs)("p",{className:o.notice,children:["You haven't added any organizations yet. Add one to get started!"," "]}):Object(a.jsx)(Te.a,{children:t.accounts.map((function(e){return Object(a.jsx)(Be.a,{className:o.listItem,children:Object(a.jsx)(we.a,{className:o.heading_2,primary:Object(a.jsx)(r.a.Fragment,{children:Object(a.jsx)(ee.a,{className:o.listTitle,component:s.b,to:Ie(n,e)||Ae(n,e)?"/account/".concat(e.id,"/manage"):"/account/".concat(e.id,"/calendar"),children:e.name})}),secondary:Object(a.jsxs)(r.a.Fragment,{children:[(Ie(n,e)||Ae(n,e))&&Object(a.jsxs)("div",{className:o.itemsLeft,children:[Object(a.jsx)(ee.a,{component:s.b,to:"/account/".concat(e.id,"/manage"),children:"Manage"}),Object(a.jsx)("span",{className:o.sep}),Object(a.jsx)(ee.a,{component:s.b,to:"/account/".concat(e.id,"/edit"),children:"Edit details"}),Object(a.jsx)("span",{className:o.sep})]}),Object(a.jsx)(ee.a,{component:s.b,to:"/account/".concat(e.id,"/calendar"),children:"View Calendar"})]})})},e.id)}))}),Object(a.jsx)(re.a,{color:"primary",className:o.containedBtn,variant:"contained",disableElevation:!0,onClick:(c="/add-account",function(){d.push(c)}),children:"Add new organization"})]})})]})})),We=Object(Y.a)((function(e){return Object($.a)({root:{background:"#FFFFFF",position:"relative",justifyContent:"center",alignItems:"center"},header:{background:"#6A0572",justifyContent:"center",alignItems:"center",paddingTop:"40px",paddingBottom:"50px",color:"#ffffff"},content:{},intro:{color:"#ffffff",textAlign:"center",position:"relative",zIndex:1},heading_1:{fontSize:"3rem",position:"relative",fontWeight:"bold",letterSpacing:-1,margin:"1rem 0 0.5rem 0"},heading_2:{fontSize:"2rem",position:"relative",fontWeight:"bold",letterSpacing:-1,marginBottom:"1rem"},introText:{fontSize:"1.2rem",margin:"0.5rem auto 1rem"},notice:{fontSize:"1em",margin:"1rem 0 1.5rem",color:"#111"},containedBtn:{backgroundColor:"#6A0572",padding:"12px 20px",fontWeight:"bold",color:"#ffffff",margin:"0 0.5em",width:"auto"},outlinedBtn:{padding:"12px 20px",fontWeight:"bold",color:"#6A0572",margin:"0 0.5em",width:"auto",borderColor:"rgba(0,0,0,0.5)","&:hover":{borderColor:"#6A0572"}},deleteBtn:{padding:"12px 20px",fontWeight:"bold",color:"red",margin:"1em 0.5em",width:"auto",borderColor:"rgba(0,0,0,0.5)","&:hover":{borderColor:"#6A0572"}},dangerZone:{margin:"4em 0"},textField:{margin:"5px 0 30px","& > *":{width:"100%"}},submitButton:{marginTop:"0"},title:{textAlign:"left"},successMessage:{color:e.palette.success.main},errorMessage:{color:e.palette.error.main}})})),De={message:"Something went wrong. Please try again.",type:"error"},Ue={message:"Organisation details saved!",type:"success"},Le=Object(d.b)((function(e){return{accountdata:e.accountdata,me:e.userdata.user}}),{setAccounts:K,addAccount:function(e){return{type:"@prefix/ADD_ACCOUNT",payload:e}},removeAccount:function(e){return{type:"@prefix/REMOVE_ACCOUNT",payload:e}},startAction:H,setSingleAccount:Z})((function(e){var t=e.accountdata,n=e.accountToEdit,r=e.me,o=e.addAccount,c=e.removeAccount,s=e.startAction,d=e.setSingleAccount,l=Object(T.f)(),u=Object(i.useState)({message:"",type:""}),m=Object(ue.a)(u,2),b=m[0],j=m[1],g=We(),p=Object(i.useState)(!1),f=Object(ue.a)(p,2),x=f[0],h=f[1],O=pe.b().shape({name:pe.d().required("Please enter the name of your organisation."),siteUrl:pe.d(),description:pe.d()}),v=Object(me.a)(D,{onError:function(){j(De),h(!0)},onSuccess:function(){j(Ue),h(!0),s()}}),S=Object(me.a)(U,{onError:function(){j(De),h(!0)},onSuccess:function(){j(Ue),h(!0),s()}}),k=function(){var e=Object(le.a)(de.a.mark((function e(t){return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n?S.mutate({id:n.id,name:t.name,siteUrl:t.siteUrl,description:t.description,services:n.services,user_roles:n.user_roles}):v.mutate({name:t.name,siteUrl:t.siteUrl,description:t.description});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){var e,n,a=null===(e=v.data)||void 0===e?void 0:e.data;v.isSuccess&&!v.isLoading&&a&&t.updatingAccounts&&(o(a),l.goBack());var i=null===(n=S.data)||void 0===n?void 0:n.data;S.isSuccess&&!S.isLoading&&i&&t.updatingAccounts&&(d(i),l.goBack())}),[v,S,t]);var N=Object(me.a)(M);return Object(a.jsxs)("div",{className:g.root,children:[Object(a.jsx)(be.c,{initialValues:{name:n?n.name:"",siteUrl:n?n.siteUrl:"",description:n?n.description:""},onSubmit:function(e,t){k(e),setTimeout((function(){t.setSubmitting(!1)}),400)},validationSchema:O,children:function(e){var t=e.handleBlur,n=e.handleChange,i=e.values,r=e.isSubmitting,o=e.touched,c=e.errors;return Object(a.jsx)(be.b,{children:Object(a.jsxs)(je.a,{container:!0,direction:"row",children:[Object(a.jsx)(je.a,{item:!0,className:g.textField,xs:8,children:Object(a.jsx)(ge.a,{id:"name",name:"name",type:"text",label:"Organisation name",variant:"outlined",value:i.name,onChange:n,onBlur:t,helperText:o.name&&c.name?c.name:"",error:!(!o.name||!c.name)})}),Object(a.jsx)(je.a,{item:!0,className:g.textField,xs:8,children:Object(a.jsx)(ge.a,{id:"siteUrl",name:"siteUrl",type:"siteUrl",label:"Website",variant:"outlined",value:i.siteUrl,onChange:n,onBlur:t,helperText:o.siteUrl&&c.siteUrl?c.siteUrl:"",error:!(!o.siteUrl||!c.siteUrl)})}),Object(a.jsx)(je.a,{item:!0,className:g.textField,xs:8,children:Object(a.jsx)(ge.a,{id:"description",name:"description",type:"description",label:"Description",variant:"outlined",value:i.description,onChange:n,onBlur:t,helperText:o.description&&c.description?c.description:"",error:!(!o.description||!c.description)})}),Object(a.jsxs)(je.a,{item:!0,className:g.submitButton,xs:6,children:[Object(a.jsxs)(re.a,{color:"primary",type:"submit",variant:"contained",disabled:r,className:g.containedBtn,children:[" ","Save"]}),Object(a.jsxs)(re.a,{color:"primary",variant:"outlined",className:g.outlinedBtn,onClick:function(){return l.goBack()},children:[" ","Cancel"]}),x&&Object(a.jsx)("div",{className:"formStatus",children:"success"===b.type?Object(a.jsx)("p",{className:g.successMessage,children:b.message}):"error"===b.type?Object(a.jsx)("p",{className:g.errorMessage,children:b.message}):null})]})]})})}}),n&&Ae(r,n)?Object(a.jsxs)("div",{className:g.dangerZone,children:[Object(a.jsx)("h2",{children:"Danger Zone"}),Object(a.jsx)("p",{children:"Be careful here, deleting the organization will wipe out all data related to it."}),Object(a.jsxs)(re.a,{color:"primary",variant:"outlined",className:g.deleteBtn,onClick:function(){var e;(e=n)&&(N.mutate(e),c(e),l.push("/dashboard"))},children:[" ","Delete organization"]})]}):Object(a.jsx)(a.Fragment,{})]})})),Me=Object(Y.a)((function(){return Object($.a)({root:{background:"#FFFFFF",position:"relative",justifyContent:"center",alignItems:"center"},header:{background:"#6A0572",justifyContent:"center",alignItems:"center",paddingTop:"40px",paddingBottom:"50px",color:"#ffffff"},content:{},intro:{color:"#ffffff",textAlign:"center",position:"relative",zIndex:1},heading_1:{fontSize:"3rem",position:"relative",fontWeight:"bold",letterSpacing:-1,margin:"1rem 0 0.5rem 0"},heading_2:{fontSize:"2rem",position:"relative",fontWeight:"bold",letterSpacing:-1,marginBottom:"1rem"},introText:{fontSize:"1.2rem",margin:"0.5rem auto 1rem"},notice:{fontSize:"1em",margin:"1rem 0 1.5rem",color:"#111"}})})),Re=Object(d.b)((function(e){return{accountdata:e.accountdata,me:e.userdata.user,updateUser:e.userdata.updateUser}}))((function(e){var t=e.accountdata,n=e.me,i=e.updateUser,r=Object(T.g)().id,o=r?t.accounts.find((function(e){return e.id===parseInt(r)})):void 0,c=r?"Edit organization":"Add new organization",s=Me();return i||n||Ie(n,o)||Ae(n,o)?Object(a.jsxs)("div",{className:s.root,children:[Object(a.jsx)("div",{className:s.header,children:Object(a.jsx)(ye.a,{maxWidth:"xl",children:Object(a.jsx)("h1",{className:s.heading_1,children:c})})}),Object(a.jsx)("div",{className:s.content,children:Object(a.jsxs)(ye.a,{maxWidth:"xl",children:[Object(a.jsx)("h2",{className:s.heading_2,children:"General information"}),Object(a.jsx)("p",{className:s.introText,children:"Edit the name, website url and free description of your organization."}),Object(a.jsx)(Le,{accountToEdit:o})]})})]}):Object(a.jsx)(_e,{})})),Pe=n(452),Ge=n(464),Ve=Object(Y.a)((function(e){return Object($.a)({root:{background:"#FFFFFF",position:"relative",justifyContent:"center",alignItems:"center"},header:{background:"#6A0572",justifyContent:"center",alignItems:"center",paddingTop:"40px",paddingBottom:"50px",color:"#ffffff"},content:{},intro:{color:"#ffffff",textAlign:"center",position:"relative",zIndex:1},heading_1:{fontSize:"3rem",position:"relative",fontWeight:"bold",letterSpacing:-1,margin:"1rem 0 0.5rem 0"},heading_2:{fontSize:"2rem",position:"relative",fontWeight:"bold",letterSpacing:-1,marginBottom:"1rem"},introText:{fontSize:"1.2rem",margin:"0.5rem auto 1rem"},notice:{fontSize:"1em",margin:"1rem 0 1.5rem",color:"#111"},containedBtn:{backgroundColor:"#6A0572",padding:"12px 20px",fontWeight:"bold",color:"#ffffff",margin:"0 0.5em",width:"auto"},outlinedBtn:{padding:"12px 20px",fontWeight:"bold",color:"#6A0572",margin:"0 0.5em",width:"auto",borderColor:"rgba(0,0,0,0.5)","&:hover":{borderColor:"#6A0572"}},deleteBtn:{padding:"12px 20px",fontWeight:"bold",color:"red",margin:"1em 0.5em",width:"auto",borderColor:"rgba(0,0,0,0.5)","&:hover":{borderColor:"#6A0572"}},dangerZone:{margin:"4em 0"},textField:{margin:"5px 0 30px","& > *":{width:"100%"}},select:{marginTop:"6px",paddingTop:"12px",paddingBottom:"12px"},submitButton:{marginTop:"0"},title:{textAlign:"left"},successMessage:{color:e.palette.success.main},errorMessage:{color:e.palette.error.main},userList:{margin:"1em 0 2em"},userListItem:{padding:"0.5em 0",color:"#444"}})})),Je={message:"Username not found. Please try again.",type:"error"},qe={message:"User added to account!",type:"success"},He=Object(d.b)((function(e){return{accountdata:e.accountdata,userdata:e.userdata}}),{startAction:H,setSingleAccount:Z})((function(e){var t=e.accountdata,n=e.accountToEdit,r=e.startAction,o=e.setSingleAccount,c=Object(i.useState)({message:"",type:""}),s=Object(ue.a)(c,2),d=s[0],l=s[1],u=Ve(),m=Object(i.useState)(!1),b=Object(ue.a)(m,2),j=b[0],g=b[1],p=pe.b().shape({username:pe.d().required("Please enter a username."),role:pe.d().required("Please enter a role.")}),f=Object(me.a)(L,{onError:function(){l(Je),g(!0)},onSuccess:function(){l(qe),g(!0),r()}}),x=function(){var e=Object(le.a)(de.a.mark((function e(t){return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n&&f.mutate({account:n,username:t.username,role:t.role});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e,n=null===(e=f.data)||void 0===e?void 0:e.data;f.isSuccess&&!f.isLoading&&n&&t.updatingAccounts&&o(n)}),[f,t]),Object(a.jsxs)("div",{className:u.root,children:[Object(a.jsx)("div",{className:u.userList,children:n.user_roles.map((function(e){return Object(a.jsxs)("div",{className:u.userListItem,children:[Object(a.jsx)("strong",{children:e.user.username})," (",e.user.email,") - ",e.role.role]},e.id)}))}),Object(a.jsx)(be.c,{initialValues:{username:"",role:"admin"},onSubmit:function(e,t){x(e),setTimeout((function(){t.setSubmitting(!1)}),400)},validationSchema:p,children:function(e){var t=e.handleBlur,n=e.handleChange,i=e.values,r=e.isSubmitting,o=e.touched,c=e.errors;return Object(a.jsx)(be.b,{children:Object(a.jsxs)(je.a,{container:!0,direction:"row",children:[Object(a.jsx)(je.a,{item:!0,className:u.textField,xs:8,children:Object(a.jsx)(ge.a,{id:"username",name:"username",type:"text",label:"Username",variant:"outlined",value:i.username,onChange:n,onBlur:t,helperText:o.username&&c.username?c.username:"",error:!(!o.username||!c.username)})}),Object(a.jsxs)(je.a,{item:!0,className:u.textField,xs:8,children:[Object(a.jsx)(Ge.a,{children:"Role"}),Object(a.jsxs)(be.a,{as:"select",name:"role",onChange:n,className:u.select,value:i.role,children:[Object(a.jsx)("option",{value:"admin",children:"Admin (can edit services, account info and manage bookings)"}),Object(a.jsx)("option",{value:"user",children:"User (can use the booking calendar)"})]})]}),Object(a.jsxs)(je.a,{item:!0,className:u.submitButton,xs:6,children:[Object(a.jsxs)(re.a,{color:"primary",type:"submit",variant:"contained",disabled:r,className:u.containedBtn,children:[" ","Add user to account"]}),j&&Object(a.jsx)("div",{className:"formStatus",children:"success"===d.type?Object(a.jsx)("p",{className:u.successMessage,children:d.message}):"error"===d.type?Object(a.jsx)("p",{className:u.errorMessage,children:d.message}):null})]})]})})}})]})})),Ke=Object(Y.a)((function(){return Object($.a)({root:{background:"#FFFFFF",position:"relative",justifyContent:"center",alignItems:"center"},header:{background:"#6A0572",justifyContent:"center",alignItems:"center",paddingTop:"40px",paddingBottom:"50px",color:"#ffffff"},banner:{background:"#eee",padding:"0.5em",display:"flex",alignItems:"center"},bannerLeft:{textAlign:"left"},bannerRight:{textAlign:"right"},bannerText:{marginRight:"1em",color:"#666"},content:{marginTop:"1em"},contentLeft:{borderRight:"1px solid #ddd",paddingRight:"2em"},contentRight:{paddingLeft:"4em"},intro:{color:"#ffffff",textAlign:"center",position:"relative",zIndex:1},heading_1:{fontSize:"3rem",position:"relative",fontWeight:"bold",letterSpacing:-1,margin:"1rem 0 0.5rem 0"},heading_2:{fontSize:"1.6rem",position:"relative",fontWeight:"bold",letterSpacing:-1,marginBottom:"0.8rem"},introText:{fontSize:"1.2rem",margin:"0.5rem auto 1rem"},containedBtn:{padding:"12px 20px",fontWeight:"bold",margin:0,width:"auto"},textBtn:{padding:"12px 0",fontWeight:"bold",margin:0,width:"auto"},sep:{padding:"0 15px"},adminLink:{textTransform:"uppercase",fontSize:"14px",marginBottom:"1em",display:"block"}})})),Ze=Object(d.b)((function(e){return{accountdata:e.accountdata,me:e.userdata.user}}))((function(e){var t=e.accountdata,n=e.me,i=Ke(),r=Object(T.f)(),o=Object(T.g)().accountId,c=o?t.accounts.find((function(e){return e.id===parseInt(o)})):void 0;if(!c||!n||!Ae(n,c))return Object(a.jsx)(_e,{});var s;return Object(a.jsxs)("div",{className:i.root,children:[Object(a.jsx)("div",{className:i.header,children:Object(a.jsx)(ye.a,{maxWidth:"xl",children:Object(a.jsxs)("h1",{className:i.heading_1,children:["Edit ",null===c||void 0===c?void 0:c.name," users"]})})}),Object(a.jsx)("div",{className:i.banner,children:Object(a.jsx)(ye.a,{maxWidth:"xl",children:Object(a.jsxs)(je.a,{container:!0,direction:"row",children:[Object(a.jsx)(je.a,{item:!0,xs:6,className:i.bannerLeft,children:Object(a.jsxs)(re.a,{color:"primary",className:i.textBtn,variant:"text",disableElevation:!0,onClick:function(){return r.goBack()},children:[Object(a.jsx)(Pe.a,{})," Manage org"]})}),Object(a.jsx)(je.a,{item:!0,xs:6,className:i.bannerRight,children:Object(a.jsx)(re.a,{color:"primary",className:i.containedBtn,variant:"contained",size:"small",disableElevation:!0,onClick:(s="/account/".concat(null===c||void 0===c?void 0:c.id,"/calendar"),function(){r.push(s)}),children:"View calendar"})})]})})}),Object(a.jsx)("div",{className:i.content,children:Object(a.jsx)(ye.a,{maxWidth:"xl",children:Object(a.jsx)(je.a,{container:!0,direction:"row",children:Object(a.jsxs)(je.a,{item:!0,xs:12,className:i.contentLeft,children:[Object(a.jsx)("h2",{className:i.heading_2,children:"Users"}),c&&Object(a.jsx)(He,{accountToEdit:c})]})})})})]})})),Ye=Object(Y.a)((function(){return Object($.a)({heading_2:{fontSize:"2rem",position:"relative",fontWeight:"bold",letterSpacing:-1,marginBottom:"1rem"},introText:{fontSize:"1.2rem",margin:"0.5rem auto 1rem"},notice:{fontSize:"1em",margin:"1rem 0 1.5rem",color:"#111"},listItem:{paddingLeft:0},itemMeta:{margin:"2px 0 5px"},listTitle:{fontSize:"1.2em",fontWeight:"bold",color:"#000"}})})),$e=function(e){var t=e.account,n=Ye();return t&&0!==t.services.length?Object(a.jsx)(Te.a,{children:t&&t.services.map((function(e){return Object(a.jsx)(Be.a,{className:n.listItem,children:Object(a.jsx)(we.a,{className:n.heading_2,primary:Object(a.jsx)(r.a.Fragment,{children:Object(a.jsx)(ee.a,{className:n.listTitle,component:s.b,to:"/account/".concat(t.id,"/services/").concat(e.id,"/edit"),children:e.name})}),secondary:Object(a.jsx)(r.a.Fragment,{children:Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:n.itemMeta,children:Object(a.jsxs)("span",{children:["Hours: ",e.startTime.substr(0,5)," - ",e.endTime.substr(0,5)," | Timeslot: ",e.timeSlotLen," min | Max bookings: ",e.maxBookings," per slot"]})}),Object(a.jsx)(ee.a,{component:s.b,to:"/account/".concat(t.id,"/services/").concat(e.id,"/edit"),children:"Edit"})]})})})},e.id)}))}):Object(a.jsxs)("p",{className:n.notice,children:["You haven't added any services yet. Add one to get started!"," "]})};function Qe(e){return{type:"@prefix/REMOVE_BOOKING",payload:e}}var Xe=function(e){return{type:"@prefix/SET_BOOKINGS",payload:e}};var et=n(453),tt=Object(Y.a)((function(){return Object($.a)({root:{width:"100%",height:"calc(100vh - 66px)",alignItems:"center",justifyItems:"center",justifyContent:"center","& > * + *":{marginTop:"5em"},background:"#fff",borderTop:"1px solid #eee",position:"absolute",top:"64px",left:0,display:"flex",zIndex:10}})})),nt=function(){var e=tt();return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(et.a,{color:"secondary"})})},at=Object(Y.a)((function(){return Object($.a)({root:{background:"#FFFFFF",position:"relative",justifyContent:"center",alignItems:"center"},header:{background:"#6A0572",justifyContent:"center",alignItems:"center",paddingTop:"40px",paddingBottom:"50px",color:"#ffffff"},content:{},intro:{color:"#ffffff",textAlign:"center",position:"relative",zIndex:1},heading_1:{fontSize:"3rem",position:"relative",fontWeight:"bold",letterSpacing:-1,margin:"1rem 0 0.5rem 0"},heading_2:{fontSize:"2rem",position:"relative",fontWeight:"bold",letterSpacing:-1,marginBottom:"1rem"},introText:{fontSize:"1.2rem",margin:"0.5rem auto 1rem"},listItem:{paddingLeft:0},listTitle:{fontSize:"1.1em",fontWeight:"bold",color:"#000"},containedBtn:{backgroundColor:"#6A0572",padding:"12px 20px",fontWeight:"bold",color:"#ffffff",margin:"0 0.5em",width:"auto"},textBtn:{padding:0,fontWeight:"normal",margin:"0 0 0 2px",width:"auto",textTransform:"none"},notice:{fontSize:"1em",margin:"1rem 0 1.5rem",color:"#111"}})})),it=Object(d.b)((function(e){return{bookingData:e.bookingData}}),{setBookings:Xe,removeBooking:Qe})((function(e){var t=e.account,n=e.bookingData,o=e.itemCount,c=e.setBookings,s=e.removeBooking,d=at();if(!t)return Object(a.jsx)(a.Fragment,{});var l=Object(B.a)(["getBookingsByAccountId",t],(function(){return function(e){var t=e.accountId,n=e.limit,a=void 0===n?10:n,i=localStorage.getItem("access_token"),r={headers:{Authorization:"JWT ".concat(i)}};return F.a.get("".concat(_,"/").concat(z,"/bookings/account/").concat(t,"?limit=").concat(a),r)}({accountId:t.id.toString(),limit:40})}),{enabled:!!t}),u=Object(me.a)(q);if(Object(i.useEffect)((function(){var e;l.isSuccess&&l.data.data&&c(l.data.data),u.isSuccess&&(null===(e=u.data)||void 0===e?void 0:e.data)&&s(u.data.data)}),[l,u]),l.isFetching||l.isLoading)return Object(a.jsx)(nt,{});var m=o>0?n.bookings.filter((function(e){var n;return(null===(n=e.service)||void 0===n?void 0:n.account_id)===t.id})).slice(0,o):n.bookings.filter((function(e){var n;return(null===(n=e.service)||void 0===n?void 0:n.account_id)===t.id}));return 0===m.length?Object(a.jsxs)("p",{className:d.notice,children:["There are not bookings yet."," "]}):Object(a.jsx)("div",{className:d.root,children:Object(a.jsx)(Te.a,{children:m.map((function(e){var t,n=new Date(e.dateTime).toString().split(" GMT")[0];return Object(a.jsx)(Be.a,{className:d.listItem,children:Object(a.jsx)(we.a,{className:d.heading_2,primary:Object(a.jsx)(r.a.Fragment,{children:Object(a.jsx)("div",{className:d.listTitle,children:"".concat(null===(t=e.service)||void 0===t?void 0:t.name," - ").concat(n.substr(0,n.length-3))})}),secondary:Object(a.jsx)(r.a.Fragment,{children:Object(a.jsxs)("div",{children:["User: ".concat(e.email),Object(a.jsx)(re.a,{color:"primary",className:d.textBtn,variant:"text",disableElevation:!0,onClick:function(){return function(e){u.mutate(e)}(e)},children:"Cancel"})]})})})},e.id)}))})})})),rt=Object(Y.a)((function(){return Object($.a)({root:{background:"#FFFFFF",position:"relative",justifyContent:"center",alignItems:"center"},header:{background:"#6A0572",justifyContent:"center",alignItems:"center",paddingTop:"40px",paddingBottom:"50px",color:"#ffffff"},banner:{background:"#eee",padding:"0.5em",display:"flex",alignItems:"center"},bannerLeft:{textAlign:"left"},bannerRight:{textAlign:"right"},bannerText:{marginRight:"1em",color:"#666"},content:{marginTop:"1em"},contentLeft:{borderRight:"1px solid #ddd",paddingRight:"2em"},contentRight:{paddingLeft:"4em"},intro:{color:"#ffffff",textAlign:"center",position:"relative",zIndex:1},heading_1:{fontSize:"3rem",position:"relative",fontWeight:"bold",letterSpacing:-1,margin:"1rem 0 0.5rem 0"},heading_2:{fontSize:"1.6rem",position:"relative",fontWeight:"bold",letterSpacing:-1,marginBottom:"0.8rem"},introText:{fontSize:"1.2rem",margin:"0.5rem auto 1rem"},containedBtn:{padding:"12px 20px",fontWeight:"bold",margin:0,width:"auto"},textBtn:{padding:"12px 0",fontWeight:"bold",margin:0,width:"auto"},sep:{padding:"0 15px"},adminLink:{textTransform:"uppercase",fontSize:"14px",marginBottom:"1em",display:"block"}})})),ot=Object(d.b)((function(e){return{accountdata:e.accountdata,me:e.userdata.user}}))((function(e){var t=e.accountdata,n=e.me,i=rt(),r=Object(T.f)(),o=Object(T.g)().accountId,c=o?t.accounts.find((function(e){return e.id===parseInt(o)})):void 0;if(!c||!n||!Ie(n,c)&&!Ae(n,c))return Object(a.jsx)(_e,{});var d=function(e){return function(){r.push(e)}};return Object(a.jsxs)("div",{className:i.root,children:[Object(a.jsx)("div",{className:i.header,children:Object(a.jsxs)(ye.a,{maxWidth:"xl",children:[Object(a.jsxs)("h1",{className:i.heading_1,children:["Manage ",null===c||void 0===c?void 0:c.name]}),Object(a.jsx)("p",{className:i.introText,children:"Manage services and bookings."})]})}),Object(a.jsx)("div",{className:i.banner,children:Object(a.jsx)(ye.a,{maxWidth:"xl",children:Object(a.jsxs)(je.a,{container:!0,direction:"row",children:[Object(a.jsx)(je.a,{item:!0,xs:6,className:i.bannerLeft,children:Object(a.jsxs)(re.a,{color:"primary",className:i.textBtn,variant:"text",disableElevation:!0,onClick:d("/dashboard"),children:[Object(a.jsx)(Pe.a,{})," Dashboard"]})}),Object(a.jsxs)(je.a,{item:!0,xs:6,className:i.bannerRight,children:[Object(a.jsx)(re.a,{color:"primary",className:i.textBtn,variant:"text",size:"small",disableElevation:!0,onClick:d("/account/".concat(null===c||void 0===c?void 0:c.id,"/edit")),children:"Edit organization"}),Object(a.jsx)("span",{className:i.sep}),Ae(n,c)&&Object(a.jsx)(re.a,{color:"primary",className:i.textBtn,variant:"text",size:"small",disableElevation:!0,onClick:d("/account/".concat(null===c||void 0===c?void 0:c.id,"/users")),children:"Edit users"}),Object(a.jsx)("span",{className:i.sep}),Object(a.jsx)(re.a,{color:"primary",className:i.containedBtn,variant:"contained",size:"small",disableElevation:!0,onClick:d("/account/".concat(null===c||void 0===c?void 0:c.id,"/calendar")),children:"View calendar"})]})]})})}),Object(a.jsx)("div",{className:i.content,children:Object(a.jsx)(ye.a,{maxWidth:"xl",children:Object(a.jsxs)(je.a,{container:!0,direction:"row",children:[Object(a.jsxs)(je.a,{item:!0,xs:4,className:i.contentLeft,children:[Object(a.jsx)("h2",{className:i.heading_2,children:"Services"}),Object(a.jsx)(ee.a,{component:s.b,to:"/account/".concat(c.id,"/services/add"),className:i.adminLink,children:"Add new service"}),Object(a.jsx)($e,{account:c}),Object(a.jsx)(re.a,{color:"primary",className:i.containedBtn,variant:"contained",disableElevation:!0,onClick:d("/account/".concat(c.id,"/services/add")),children:"Add new service"})]}),Object(a.jsxs)(je.a,{item:!0,xs:6,className:i.contentRight,children:[Object(a.jsx)("h2",{className:i.heading_2,children:"Recent bookings"}),Object(a.jsx)(ee.a,{component:s.b,to:"/account/".concat(null===c||void 0===c?void 0:c.id,"/bookings"),className:i.adminLink,children:"View all"}),o?Object(a.jsx)(it,{account:c,itemCount:4}):Object(a.jsx)(a.Fragment,{}),Object(a.jsx)(re.a,{color:"primary",className:i.containedBtn,variant:"contained",disableElevation:!0,onClick:d("/account/".concat(null===c||void 0===c?void 0:c.id,"/bookings")),children:"View all"})]})]})})})]})})),ct=Object(Y.a)((function(){return Object($.a)({root:{background:"#FFFFFF",position:"relative",justifyContent:"center",alignItems:"center"},header:{background:"#6A0572",justifyContent:"center",alignItems:"center",paddingTop:"40px",paddingBottom:"50px",color:"#ffffff"},banner:{background:"#eee",padding:"0.5em"},bannerLeft:{textAlign:"left"},bannerRight:{textAlign:"right"},bannerText:{marginRight:"1em",color:"#666"},content:{marginTop:"1em"},contentLeft:{borderRight:"1px solid #ddd",paddingRight:"2em"},contentRight:{paddingLeft:"4em"},intro:{color:"#ffffff",textAlign:"center",position:"relative",zIndex:1},heading_1:{fontSize:"3rem",position:"relative",fontWeight:"bold",letterSpacing:-1,margin:"1rem 0 0.5rem 0"},heading_2:{fontSize:"1.6rem",position:"relative",fontWeight:"bold",letterSpacing:-1,marginBottom:"0.8rem"},introText:{fontSize:"1.2rem",margin:"0.5rem auto 1rem"},containedBtn:{padding:"12px 20px",fontWeight:"bold",margin:0,width:"auto"},textBtn:{padding:"12px 0",fontWeight:"bold",margin:0,width:"auto"},sep:{padding:"0 5px"},adminLink:{textTransform:"uppercase",fontSize:"14px",marginBottom:"1em",display:"block"}})})),st=Object(d.b)((function(e){return{accountdata:e.accountdata,me:e.userdata.user,updateUser:e.userdata.updateUser}}))((function(e){var t=e.accountdata,n=e.me,i=e.updateUser,r=ct(),o=Object(T.f)(),c=Object(T.g)().accountId,s=c?t.accounts.find((function(e){return e.id===parseInt(c)})):void 0;if(!i&&!n&&!Ie(n,s)&&!Ae(n,s))return Object(a.jsx)(_e,{});var d=function(e){return function(){o.push(e)}};return Object(a.jsxs)("div",{className:r.root,children:[Object(a.jsx)("div",{className:r.header,children:Object(a.jsx)(ye.a,{maxWidth:"xl",children:Object(a.jsxs)("h1",{className:r.heading_1,children:[null===s||void 0===s?void 0:s.name," bookings"]})})}),Object(a.jsx)("div",{className:r.banner,children:Object(a.jsx)(ye.a,{maxWidth:"xl",children:Object(a.jsxs)(je.a,{container:!0,direction:"row",children:[Object(a.jsx)(je.a,{item:!0,xs:6,className:r.bannerLeft,children:Object(a.jsxs)(re.a,{color:"primary",className:r.textBtn,variant:"text",disableElevation:!0,onClick:d("/account/".concat(null===s||void 0===s?void 0:s.id,"/manage")),children:[Object(a.jsx)(Pe.a,{})," Back to account"]})}),Object(a.jsxs)(je.a,{item:!0,xs:6,className:r.bannerRight,children:[Object(a.jsx)(re.a,{color:"primary",className:r.containedBtn,variant:"outlined",size:"small",disableElevation:!0,onClick:d("/account/".concat(null===s||void 0===s?void 0:s.id,"/edit")),children:"Edit organization"}),Object(a.jsx)("span",{className:r.sep}),Object(a.jsx)(re.a,{color:"primary",className:r.containedBtn,variant:"contained",size:"small",disableElevation:!0,onClick:d("/account/".concat(null===s||void 0===s?void 0:s.id,"/calendar")),children:"View calendar"})]})]})})}),Object(a.jsx)("div",{className:r.content,children:Object(a.jsx)(ye.a,{maxWidth:"xl",children:Object(a.jsx)(je.a,{container:!0,direction:"row",children:Object(a.jsxs)(je.a,{item:!0,xs:12,children:[Object(a.jsx)("h2",{className:r.heading_2,children:"All bookings"}),c?Object(a.jsx)(it,{account:s,itemCount:-1}):Object(a.jsx)(a.Fragment,{})]})})})})]})})),dt=n(27),lt=n(170),ut=n(133),mt=Object(Y.a)((function(e){return Object($.a)({root:{background:"#FFFFFF",position:"relative",justifyContent:"center",alignItems:"center"},header:{background:"#6A0572",justifyContent:"center",alignItems:"center",paddingTop:"40px",paddingBottom:"50px",color:"#ffffff"},content:{},intro:{color:"#ffffff",textAlign:"center",position:"relative",zIndex:1},heading_1:{fontSize:"3rem",position:"relative",fontWeight:"bold",letterSpacing:-1,margin:"1rem 0 0.5rem 0"},heading_2:{fontSize:"2rem",position:"relative",fontWeight:"bold",letterSpacing:-1,marginBottom:"1rem"},introText:{fontSize:"1.2rem",margin:"0.5rem auto 1rem"},notice:{fontSize:"1em",margin:"1rem 0 1.5rem",color:"#111"},containedBtn:{backgroundColor:"#6A0572",padding:"12px 20px",fontWeight:"bold",color:"#ffffff",margin:"0 0.5em",width:"auto"},outlinedBtn:{padding:"12px 20px",fontWeight:"bold",color:"#6A0572",margin:"0 0.5em",width:"auto",borderColor:"rgba(0,0,0,0.5)","&:hover":{borderColor:"#6A0572"}},deleteBtn:{padding:"12px 20px",fontWeight:"bold",color:"red",margin:"1em 0.5em",width:"auto",borderColor:"rgba(0,0,0,0.5)","&:hover":{borderColor:"#6A0572"}},dangerZone:{margin:"4em 0"},formColumn:{},textField:{margin:"5px 0 30px","& > *":{width:"100%"}},textAreaField:{height:"100px",width:"97%",lineHeight:"22px",display:"block",margin:"5px 0 40px",padding:"15px",fontFamily:"Roboto, Helvetica, Arial, sans-serif"},dateField:{margin:"5px 0 20px"},submitButton:{marginTop:"0"},title:{textAlign:"left"},successMessage:{color:e.palette.success.main},errorMessage:{color:e.palette.error.main}})})),bt={message:"Something went wrong. Please try again.",type:"error"},jt={message:"Space details saved!",type:"success"},gt=Object(d.b)((function(e){return{accountdata:e.accountdata,bookingData:e.bookingData}}),{startAction:H,setSingleAccount:Z,removeBooking:Qe,resetBookings:function(){return{type:"@prefix/RESET_BOOKINGS"}}})((function(e){var t=e.accountdata,n=e.bookingData,r=e.serviceToEdit,o=e.startAction,c=e.setSingleAccount,s=e.removeBooking,d=e.resetBookings,l=e.account,u=Object(T.f)(),m=Object(i.useState)({message:"",type:""}),b=Object(ue.a)(m,2),j=b[0],g=b[1],f=mt(),x=Object(i.useState)(!1),O=Object(ue.a)(x,2),v=O[0],S=O[1],k=Object(i.useState)(!1),N=Object(ue.a)(k,2),y=N[0],B=N[1],w=pe.b().shape({name:pe.d().required("Please enter the name for the space."),description:pe.d(),maxBookings:pe.a().required("Please enter maximum number of bookings"),startTime:pe.d().required("Please enter starting time"),endTime:pe.d().required("Please enter ending time."),timeSlotLen:pe.a().required("Please enter time slot length.")}),C=Object(me.a)(P,{onError:function(){g(bt),S(!0)},onSuccess:function(){g(jt),S(!0),o()}}),A=Object(me.a)(G,{onError:function(){g(bt),S(!0)},onSuccess:function(){g(jt),S(!0),o()}}),I=Object(me.a)(V),F=function(){var e=Object(le.a)(de.a.mark((function e(t){return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}return e.abrupt("return");case 2:r?A.mutate({id:r.id,name:t.name,description:t.description,maxBookings:t.maxBookings,startTime:"".concat(t.startTime.getHours(),":").concat(t.startTime.getMinutes()),endTime:"".concat(t.endTime.getHours(),":").concat(t.endTime.getMinutes()),timeSlotLen:t.timeSlotLen,account_id:l.id}):C.mutate({name:t.name,description:t.description,maxBookings:t.maxBookings,startTime:"".concat(t.startTime.getHours(),":").concat(t.startTime.getMinutes()),endTime:"".concat(t.endTime.getHours(),":").concat(t.endTime.getMinutes()),timeSlotLen:t.timeSlotLen,account_id:l.id});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){var e,n,a=null===(e=C.data)||void 0===e?void 0:e.data;if(C.isSuccess&&!C.isLoading&&a&&l&&t.updatingAccounts){var i=Object(p.a)(Object(p.a)({},l),{},{services:[a].concat(Object(h.a)(l.services))});c(i),B(!0)}var r=null===(n=A.data)||void 0===n?void 0:n.data;if(A.isSuccess&&!A.isLoading&&r&&l&&t.updatingAccounts){var o=Object(p.a)(Object(p.a)({},l),{},{services:l.services.map((function(e){return e.id===r.id?r:e}))});c(o),d(),B(!0)}}),[C,A,t]);var _=new Date;_.setHours(9),_.setMinutes(0);var z=new Date;z.setHours(17),z.setMinutes(0);var E=function(e){var t=new Date,n=e.split(":");return t.setHours(parseInt(n[0])),t.setMinutes(parseInt(n[1])),t};return y?Object(a.jsx)(T.a,{to:l?"/account/".concat(l.id,"/manage/"):"/dashboard"}):Object(a.jsxs)(dt.a,{utils:ut.a,children:[Object(a.jsx)(be.c,{initialValues:{name:r?r.name:"",description:r?r.description:"",maxBookings:r?r.maxBookings:1,startTime:r?E(r.startTime):_,endTime:r?E(r.endTime):z,timeSlotLen:r?r.timeSlotLen:30},onSubmit:function(e,t){F(e),setTimeout((function(){t.setSubmitting(!1)}),400)},validationSchema:w,children:function(e){var t=e.handleBlur,n=e.handleChange,i=e.values,r=e.isSubmitting,o=e.touched,c=e.errors;return Object(a.jsxs)(be.b,{children:[Object(a.jsx)(je.a,{container:!0,direction:"row",children:Object(a.jsx)(je.a,{item:!0,className:f.formColumn,xs:8,children:Object(a.jsx)(ge.a,{id:"name",name:"name",type:"text",label:"Space name",variant:"outlined",fullWidth:!0,value:i.name,className:f.textField,onChange:n,onBlur:t,helperText:o.name&&c.name?c.name:"",error:!(!o.name||!c.name)})})}),Object(a.jsx)(je.a,{container:!0,direction:"row",children:Object(a.jsxs)(je.a,{item:!0,className:f.formColumn,xs:8,children:[Object(a.jsx)("label",{htmlFor:"description",children:"Description"}),Object(a.jsx)(be.a,{id:"description",name:"description",label:"Description",placeholder:"Write a short description here...",component:"textarea",rowsMin:6,className:f.textAreaField,value:i.description,onChange:n})]})}),Object(a.jsxs)(je.a,{container:!0,direction:"row",children:[Object(a.jsx)(je.a,{item:!0,className:f.formColumn,xs:2,children:Object(a.jsx)(be.a,{component:lt.a,id:"startTime",name:"startTime",label:"Start time",className:f.dateField,value:i.startTime,ampm:!1,autoOk:!0,minutesStep:5})}),Object(a.jsx)(je.a,{item:!0,className:f.formColumn,xs:2,children:Object(a.jsx)(be.a,{component:lt.a,id:"endTime",name:"endTime",label:"End time",className:f.dateField,value:i.endTime,ampm:!1,autoOk:!0,minutesStep:5})}),Object(a.jsx)(je.a,{item:!0,className:f.formColumn,xs:2,children:Object(a.jsx)(ge.a,{id:"timeSlotLen",name:"timeSlotLen",type:"number",label:"Timeslot (i.e. 30 mins)",variant:"outlined",className:f.textField,value:i.timeSlotLen,onChange:n,onBlur:t,helperText:o.description&&c.description?c.description:"",error:!(!o.description||!c.description)})}),Object(a.jsx)(je.a,{item:!0,className:f.formColumn,xs:2,children:Object(a.jsx)(ge.a,{id:"maxBookings",name:"maxBookings",type:"number",label:"Max bookings per timeslot",variant:"outlined",className:f.textField,value:i.maxBookings,onChange:n,onBlur:t,helperText:o.description&&c.description?c.description:"",error:!(!o.description||!c.description)})})]}),Object(a.jsx)(je.a,{container:!0,direction:"row",children:Object(a.jsxs)(je.a,{item:!0,className:f.submitButton,xs:6,children:[Object(a.jsxs)(re.a,{color:"primary",type:"submit",variant:"contained",disabled:r,className:f.containedBtn,children:[" ","Save"]}),Object(a.jsxs)(re.a,{color:"primary",variant:"outlined",className:f.outlinedBtn,onClick:function(){return u.goBack()},children:[" ","Cancel"]}),v&&Object(a.jsx)("div",{className:"formStatus",children:"success"===j.type?Object(a.jsx)("p",{className:f.successMessage,children:j.message}):"error"===j.type?Object(a.jsx)("p",{className:f.errorMessage,children:j.message}):null})]})})]})}}),r&&Object(a.jsxs)("div",{className:f.dangerZone,children:[Object(a.jsx)("h2",{children:"Danger Zone"}),Object(a.jsx)("p",{children:"Be careful here, deleting the service will wipe out all data and bookings related to it."}),Object(a.jsxs)(re.a,{color:"primary",variant:"outlined",className:f.deleteBtn,onClick:function(){return function(e){if(l){I.mutate(e),n.bookings.filter((function(t){var n;return(null===(n=t.service)||void 0===n?void 0:n.id)===e.id})).forEach((function(e){return s(e)}));var t=Object(p.a)(Object(p.a)({},l),{},{services:l.services.filter((function(t){return t.id!==e.id}))});c(t),u.push("/account/".concat(null===l||void 0===l?void 0:l.id,"/manage"))}}(r)},children:[" ","Delete service"]})]})]})})),pt=Object(Y.a)((function(){return Object($.a)({root:{background:"#FFFFFF",position:"relative",justifyContent:"center",alignItems:"center"},header:{background:"#6A0572",justifyContent:"center",alignItems:"center",paddingTop:"40px",paddingBottom:"50px",color:"#ffffff"},content:{},intro:{color:"#ffffff",textAlign:"center",position:"relative",zIndex:1},heading_1:{fontSize:"3rem",position:"relative",fontWeight:"bold",letterSpacing:-1,margin:"1rem 0 0.5rem 0"},heading_2:{fontSize:"2rem",position:"relative",fontWeight:"bold",letterSpacing:-1,marginBottom:"1rem"},introText:{fontSize:"1.2rem",margin:"0.5rem auto 1rem"},notice:{fontSize:"1em",margin:"1rem 0 1.5rem",color:"#111"}})})),ft=Object(d.b)((function(e){return{accountdata:e.accountdata,me:e.userdata.user,updateUser:e.userdata.updateUser}}))((function(e){var t=e.accountdata,n=e.me,i=e.updateUser,r=Object(T.g)(),o=r.accountId,c=r.serviceId;o||T.a;var s=o?t.accounts.find((function(e){return e.id===parseInt(o)})):void 0,d=c?null===s||void 0===s?void 0:s.services.find((function(e){return e.id===parseInt(c)})):void 0;if(!i&&!n&&s&&!Ie(n,s)&&!Ae(n,s))return Object(a.jsx)(_e,{});var l=c?"Edit space":"Add new space",u=pt();return Object(a.jsxs)("div",{className:u.root,children:[Object(a.jsx)("div",{className:u.header,children:Object(a.jsx)(ye.a,{maxWidth:"xl",children:Object(a.jsx)("h1",{className:u.heading_1,children:l})})}),Object(a.jsx)("div",{className:u.content,children:Object(a.jsxs)(ye.a,{maxWidth:"xl",children:[Object(a.jsx)("h2",{className:u.heading_2,children:"Enter the space information"}),Object(a.jsx)(gt,{account:s,serviceToEdit:d})]})})]})})),xt=n(457),ht=n(454),Ot=Object(d.b)((function(e){return{selectedDate:e.bookingData.selectedDate}}),{setSelectedDate:function(e){return{type:"@prefix/SET_SELECTED_DATE",payload:e}}})((function(e){var t=e.selectedDate,n=e.setSelectedDate;return Object(a.jsx)(dt.a,{utils:ut.a,children:Object(a.jsx)(ht.a,{value:t,onChange:function(e){n(e||new Date)},variant:"inline",inputVariant:"standard",label:"Date",autoOk:!0})})})),vt=Object(Y.a)((function(){return Object($.a)({slot:{background:"#fff",display:"flex",padding:"15px",alignItems:"center",justifyContent:"center",margin:"2px",cursor:"pointer","&:hover":{background:"#f7f7f7"}},slotReserved:{background:"#e2e2e2",color:"#666",display:"flex",padding:"15px",alignItems:"center",justifyContent:"center",margin:"2px",cursor:"default"},selectedSlot:{background:"#5BC8AF",display:"flex",padding:"15px",alignItems:"center",justifyContent:"center",margin:"2px",cursor:"pointer"}})})),St=function(e){var t=e.slot,n=e.selectedSlot,i=e.handleSelectDate,r=vt();return t.isReserved?Object(a.jsx)("div",{className:r.slotReserved,children:Object(a.jsx)("div",{children:t.time})}):Object(a.jsx)("div",{className:n&&n.id===t.id&&n.service.id===t.service.id?r.selectedSlot:r.slot,onClick:function(){return i(t)},children:Object(a.jsx)("div",{children:t.time})})},kt=Object(Y.a)((function(){return Object($.a)({gridContent:{display:"flex",flexDirection:"column"}})})),Nt=function(e){var t=e.service,n=e.slots,i=e.selectedSlot,r=e.handleSelectDate,o=kt();return Object(a.jsx)("div",{className:o.gridContent,children:n.map((function(e){if(e)return Object(a.jsx)(St,{slot:e,selectedSlot:i,handleSelectDate:r},"".concat(t.id,"-").concat(e.id))}))})},yt=n(411),Tt=n(455),Bt=n(407),wt=n(456),Ct=n(408),At=Object(Y.a)((function(e){return Object($.a)({root:{background:"#FFFFFF",position:"relative",justifyContent:"center",alignItems:"center"},header:{background:"#6A0572",justifyContent:"center",alignItems:"center",paddingTop:"40px",paddingBottom:"50px",color:"#ffffff"},content:{},intro:{color:"#ffffff",textAlign:"center",position:"relative",zIndex:1},heading_1:{fontSize:"3rem",position:"relative",fontWeight:"bold",letterSpacing:-1,margin:"1rem 0 0.5rem 0"},heading_2:{fontSize:"2rem",position:"relative",fontWeight:"bold",letterSpacing:-1,marginBottom:"1rem"},introText:{fontSize:"1.2rem",margin:"0.5rem auto 1rem"},notice:{fontSize:"1em",margin:"1rem 0 1.5rem",color:"#111"},containedBtn:{backgroundColor:"#6A0572",padding:"12px 20px",fontWeight:"bold",color:"#ffffff",margin:"0 0.5em",width:"auto"},outlinedBtn:{padding:"12px 20px",fontWeight:"bold",color:"#6A0572",margin:"0 0.5em",width:"auto",borderColor:"rgba(0,0,0,0.5)","&:hover":{borderColor:"#6A0572"}},textField:{"& > *":{width:"100%"}},loginButton:{marginTop:"30px"},title:{textAlign:"left"},successMessage:{color:e.palette.success.main},errorMessage:{color:e.palette.error.main}})})),It={message:"Something went wrong. Please try again.",type:"error"},Ft={message:"Organisation details saved!",type:"success"},_t=Object(d.b)((function(e){return{updatingBookings:e.bookingData.updatingBookings}}),{startAction:function(){return{type:"@prefix/START_BOOKING_ACTION"}},addBooking:function(e){return{type:"@prefix/ADD_BOOKING",payload:e}}})((function(e){var t=e.selectedSlot,n=e.handleCloseBookingForm,r=e.updatingBookings,o=e.startAction,c=e.addBooking,s=Object(i.useState)({message:"",type:""}),d=Object(ue.a)(s,2),l=d[0],u=d[1],m=Object(i.useState)(!1),b=Object(ue.a)(m,2),j=b[0],g=b[1],p=At(),f=pe.b().shape({email:pe.d().required("Please enter your email.")}),x=Object(me.a)(J,{onError:function(){u(It),g(!0)},onSuccess:function(){u(Ft),g(!0),o()}});return Object(i.useEffect)((function(){var e,t=null===(e=x.data)||void 0===e?void 0:e.data;x.isSuccess&&!x.isLoading&&t&&r&&(c(t),n())}),[x,r]),Object(a.jsx)(be.c,{initialValues:{email:""},onSubmit:function(e,n){!function(e){if(t){var n=t.date?t.date:new Date,a=t.time.split(":");n.setHours(parseInt(a[0])),n.setMinutes(parseInt(a[1]));var i=n.toISOString();x.mutate({email:e.email,date:Ce(n),dateTime:i,slotNumber:t.slotNumber,service_id:t.service.id})}}(e),setTimeout((function(){n.setSubmitting(!1)}),400)},validationSchema:f,children:function(e){var t=e.handleBlur,n=e.handleChange,i=e.values,r=e.isSubmitting,o=e.touched,c=e.errors;return Object(a.jsx)(be.b,{children:Object(a.jsxs)(je.a,{container:!0,direction:"row",children:[Object(a.jsx)(je.a,{item:!0,className:p.textField,xs:8,children:Object(a.jsx)(ge.a,{id:"email",name:"email",type:"email",label:"Your email",value:i.email,onChange:n,onBlur:t,helperText:o.email&&c.email?c.email:"",error:!(!o.email||!c.email)})}),Object(a.jsxs)(je.a,{item:!0,className:p.loginButton,xs:6,children:[Object(a.jsxs)(re.a,{color:"primary",type:"submit",variant:"contained",disabled:r,className:p.containedBtn,children:[" ","Make booking"]}),j&&Object(a.jsx)("div",{className:"formStatus",children:"success"===l.type?Object(a.jsx)("p",{className:p.successMessage,children:l.message}):"error"===l.type?Object(a.jsx)("p",{className:p.errorMessage,children:l.message}):null})]})]})})}})})),zt=function(e){var t,n=e.bookingFormOpen,i=e.handleCloseBookingForm,r=e.selectedSlot;return Object(a.jsxs)(yt.a,{open:n,onClose:i,"aria-labelledby":"form-dialog-title",children:[Object(a.jsx)(Tt.a,{id:"form-dialog-title",children:"Make a booking"}),Object(a.jsxs)(Bt.a,{children:[Object(a.jsx)(wt.a,{children:r&&"To book ".concat(r.service.name," on ").concat(null===r||void 0===r||null===(t=r.date)||void 0===t?void 0:t.toDateString()," at ").concat(null===r||void 0===r?void 0:r.time,", add your email below.")}),Object(a.jsx)(_t,{selectedSlot:r,handleCloseBookingForm:i})]}),Object(a.jsx)(Ct.a,{children:Object(a.jsx)(re.a,{onClick:i,color:"primary",children:"Cancel"})})]})},Et=Object(Y.a)((function(){return Object($.a)({root:{minWidth:"500px"}})})),Wt=function(e){var t=e.infoFormOpen,n=e.handleCloseInfoForm,i=e.service;if(!i)return Object(a.jsx)(a.Fragment,{});var r=Et();return Object(a.jsxs)(yt.a,{open:t,onClose:n,"aria-labelledby":"form-dialog-title",children:[Object(a.jsx)(Tt.a,{id:"form-dialog-title",children:i.name}),Object(a.jsx)(Bt.a,{className:r.root,children:Object(a.jsx)(wt.a,{children:i.description})}),Object(a.jsx)(Ct.a,{children:Object(a.jsx)(re.a,{onClick:n,color:"primary",variant:"contained",children:"Close"})})]})},Dt=Object(Y.a)((function(){return Object($.a)({root:{background:"#eee",position:"relative",justifyContent:"center",alignItems:"center"},gridContainer:{display:"flex",width:"100%",flexDirection:"row"},gridItem:{minWidth:"200px",maxWidth:"50%",width:"100%",flex:"auto",margin:"5px"},header:{background:"#6A0572",justifyContent:"center",alignItems:"center",paddingTop:"20px",paddingBottom:"30px",color:"#ffffff"},content:{},heading_1:{fontSize:"3rem",position:"relative",fontWeight:"bold",letterSpacing:-1,margin:"1rem 0 0.5rem 0"},heading_2:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"1rem",textAlign:"center"},containedBtn:{backgroundColor:"#6A0572",padding:"12px 20px",fontWeight:"bold",color:"#ffffff",margin:"0 0.5em",width:"auto"},row:{padding:"15px 0",background:"#ddd"},infoIcon:{margin:"0 4px 0",position:"relative",top:"2px",cursor:"pointer"}})})),Ut=Object(d.b)((function(e){return{accountdata:e.accountdata,bookingData:e.bookingData}}),{setAccounts:K,setBookings:Xe})((function(e){var t=e.accountdata,n=e.bookingData,r=e.setAccounts,o=e.setBookings,c=Object(i.useState)(!1),s=Object(ue.a)(c,2),d=s[0],l=s[1],u=Object(i.useState)(!1),m=Object(ue.a)(u,2),b=m[0],j=m[1],g=Object(i.useState)(null),p=Object(ue.a)(g,2),f=p[0],x=p[1],h=Object(i.useState)(null),O=Object(ue.a)(h,2),v=O[0],S=O[1],k=new Date,N=function(e){S(e),l(!0)},y=function(e){x(e),j(!b)},w=Object(T.g)().accountId,C=t&&w&&t.accounts.find((function(e){return e.id===parseInt(w)})),A=Dt(),I=Object(B.a)(["getAccountById",w],(function(){return function(e){var t=localStorage.getItem("access_token"),n={headers:{Authorization:"JWT ".concat(t)}};return F.a.get("".concat(_,"/").concat(z,"/accounts/").concat(e),n)}(w)}),{enabled:!C}),E=Object(B.a)(["getBookingsByAccountIdAndDateStr",{accountId:w,date:Ce(n.selectedDate)}],(function(){return function(e){var t=e.accountId,n=e.date,a=localStorage.getItem("access_token"),i={headers:{Authorization:"JWT ".concat(a)}};return F.a.get("".concat(_,"/").concat(z,"/bookings/account/").concat(t,"?date=").concat(n),i)}({accountId:w,date:Ce(n.selectedDate)})}),{enabled:!!w});Object(i.useEffect)((function(){!C&&I.isSuccess&&I.data.data&&r([I.data.data]),C&&E.isSuccess&&E.data.data&&o(E.data.data)}),[I,E,C]);var W=function(e){var t=e.split(":");return 60*parseInt(t[0])*60+60*parseInt(t[1])},D=function(e){for(var t=function(e){var t=W(e.startTime);return(W(e.endTime)-t)/(60*e.timeSlotLen)}(e),a=[],i=function(t){var i=e.startTime.split(":"),r=e.timeSlotLen*t,o="".concat(Math.floor(parseInt(i[0])+r/60)),c="".concat(r%60),s="".concat(1===o.length?0:"").concat(o,":").concat(c).concat(1===c.length?0:""),d=new Date(n.selectedDate);d.setHours(parseInt(o)),d.setMinutes(parseInt(c));var l=n.bookings.length>0?n.bookings.filter((function(a){var i;return a.slotNumber===t&&(null===(i=a.service)||void 0===i?void 0:i.id)===e.id&&Ce(n.selectedDate)===a.date})):[],u=d<k||l.length>=e.maxBookings;a.push({id:t,slotNumber:t,isReserved:u,time:s,service:e,date:n.selectedDate})},r=0;r<t;r++)i(r);return a},U=C?C.services:[];return Object(a.jsxs)("div",{className:A.root,children:[Object(a.jsx)("div",{className:A.header,children:Object(a.jsx)(ye.a,{maxWidth:"xl",children:Object(a.jsx)("h1",{className:A.heading_1,children:C?"Booking calendar for ".concat(C.name):"Booking calendar"})})}),Object(a.jsx)("div",{className:A.row,children:Object(a.jsx)(ye.a,{maxWidth:"xl",children:Object(a.jsx)(Ot,{})})}),Object(a.jsx)("div",{className:A.content,children:Object(a.jsx)(ye.a,{maxWidth:"xl",children:Object(a.jsx)("div",{className:A.gridContainer,children:U.map((function(e){var t=D(e);return Object(a.jsxs)("div",{className:A.gridItem,children:[Object(a.jsxs)("h2",{className:A.heading_2,children:[e.name,Object(a.jsx)(xt.a,{onClick:function(){return y(e)},color:"primary",fontSize:"small",className:A.infoIcon})]}),Object(a.jsx)(Nt,{slots:t,service:e,selectedSlot:v,handleSelectDate:N})]},e.id)}))})})}),Object(a.jsx)(zt,{bookingFormOpen:d,handleCloseBookingForm:function(){S(null),l(!1)},selectedSlot:v}),Object(a.jsx)(Wt,{infoFormOpen:b,handleCloseInfoForm:function(){return y(null)},service:f})]})})),Lt=Object(d.b)((function(e){return{token:e.userdata.token,user:e.userdata.user,loggedOut:e.userdata.loggedOut,accountdata:e.accountdata}}),{setToken:w,setUser:C,logoutUser:A,setAccounts:K,doneAction:function(){return{type:"@prefix/DONE_ACCOUNT_ACTION"}}})((function(e){var t=e.token,n=e.loggedOut,r=e.accountdata,o=e.user,c=e.setToken,s=e.setUser,d=e.logoutUser,l=e.setAccounts,u=e.doneAction,m=Object(B.a)(["me",t],(function(){return function(e){var t={headers:{Authorization:"JWT ".concat(e)}};return F.a.get("".concat(_,"/").concat(z,"/me"),t)}(t)}),{enabled:!!t,onError:function(){localStorage.removeItem("access_token"),d()}}),b=Object(B.a)(["getAccounts",r],R,{enabled:0===r.accounts.length&&!!o,onError:function(){return u()}});return Object(i.useEffect)((function(){var e,t,n,a,i;(c(null!==(e=localStorage.getItem("access_token"))&&void 0!==e?e:""),m.isSuccess)&&s({username:null===(t=m.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.username,email:null===(a=m.data)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.email});b.isSuccess&&0===r.accounts.length&&b.data.data&&l(b.data.data)}),[m,b]),n&&(window.location.href="/"),Object(a.jsxs)("div",{children:[Object(a.jsx)(ie,{}),Object(a.jsx)(T.b,{exact:!0,path:"/",component:ce}),Object(a.jsx)(T.b,{exact:!0,path:"/dashboard",component:Ee}),Object(a.jsx)(T.b,{exact:!0,path:"/add-account",component:Re}),Object(a.jsx)(T.b,{path:"/account/:id/edit",component:Re}),Object(a.jsx)(T.b,{path:"/account/:accountId/users",component:Ze}),Object(a.jsx)(T.b,{path:"/account/:accountId/services/add",component:ft}),Object(a.jsx)(T.b,{path:"/account/:accountId/services/:serviceId/edit",component:ft}),Object(a.jsx)(T.b,{exact:!0,path:"/account/:accountId/manage",component:ot}),Object(a.jsx)(T.b,{path:"/account/:accountId/bookings",component:st}),Object(a.jsx)(T.b,{path:"/account/:accountId/calendar",component:Ut}),Object(a.jsx)(T.b,{exact:!0,path:"/register",component:ve}),Object(a.jsx)(T.b,{exact:!0,path:"/login",component:Ne}),r.updatingAccounts&&!!o&&Object(a.jsx)(nt,{})]})})),Mt=Object(m.a)({palette:{primary:{main:"#6A0572"},secondary:{main:"#06BCC1"}}}),Rt=Object(j.d)(y,{},Object(j.a)(g.a)),Pt=new l.a;var Gt=function(){return Object(a.jsx)(d.a,{store:Rt,children:Object(a.jsx)(u.a,{client:Pt,children:Object(a.jsx)(b.a,{theme:Mt,children:Object(a.jsx)(Lt,{})})})})};c.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(s.a,{children:Object(a.jsx)(Gt,{})})}),document.getElementById("root"))}},[[405,1,2]]]);
//# sourceMappingURL=main.aa530b3e.chunk.js.map