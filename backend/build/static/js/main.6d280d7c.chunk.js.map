{"version":3,"sources":["store/reducers/user.ts","store/reducers/account.ts","store/reducers/bookings.ts","store/store.ts","store/actions/user.ts","utils/config.ts","services/queries.tsx","store/actions/accounts.ts","components/Logo.tsx","components/Header.tsx","pages/Home.tsx","components/forms/Register.tsx","components/forms/Login.tsx","utils/helpers.ts","components/NotAllowed.tsx","pages/Dashboard.tsx","components/forms/EditAccount.tsx","pages/EditAccount.tsx","components/forms/EditAccountUsers.tsx","pages/ManageAccountUsers.tsx","components/ServiceList.tsx","store/actions/bookings.ts","components/Loader.tsx","components/BookingList.tsx","pages/ManageAccount.tsx","pages/ManageBookings.tsx","components/forms/EditService.tsx","pages/EditService.tsx","components/forms/DatePicker.tsx","components/TimeSlotItem.tsx","components/TimeSlotList.tsx","components/forms/Booking.tsx","components/BookingFormDialog.tsx","components/ServiceInfoDialog.tsx","components/Calendar.tsx","components/Controller.tsx","App.tsx","index.tsx"],"names":["initialState","user","undefined","token","loggedOut","updateUser","userReducer","state","action","type","payload","accounts","updatingAccounts","accountReducer","filter","account","id","map","acc","bookings","updatingBookings","selectedDate","Date","bookingFormVisible","mergeBookings","oldBookings","newBookings","concat","reduce","r","i","some","j","JSON","stringify","bookingReducer","booking","rootReducer","combineReducers","userdata","accountdata","bookingData","setToken","setUser","logoutUser","API_URL","API_PREFIX","register","axios","post","login","saveAccount","localStorage","getItem","config","headers","updateAccount","put","addAccountUser","username","role","deleteAccount","delete","getAccounts","get","saveService","service","updateService","deleteService","saveBooking","deleteBooking","startAction","setAccounts","setSingleAccount","stylesInUse","makeStyles","createStyles","logo","zIndex","width","marginRight","logoImg","height","display","Logo","classes","Link","component","RouterLink","className","to","src","alt","root","flexGrow","appBar","backgroundColor","linkBtnTransparent","padding","border","textDecoration","opacity","linkBtnBordered","borderRadius","loginGreet","fontSize","color","sectionLeft","textAlign","toggleButton","connect","history","useHistory","AppBar","position","Toolbar","onClick","removeItem","push","background","justifyContent","alignItems","intro","heading","fontWeight","letterSpacing","marginBottom","introText","marginTop","containedBtn","margin","outlinedBtn","borderColor","handleClick","path","Button","variant","size","disableElevation","RegisterSchema","Yup","shape","email","required","min","max","password","matches","confirmPassword","oneOf","theme","form","maxWidth","textField","inputField","registerButton","title","successMessage","palette","success","main","errorMessage","error","formStatusProps","message","useState","formStatus","setFormStatus","showFormStatus","setShowFormStatus","setUserdata","redirect","setRedirect","registerMutation","useMutation","onError","onSuccess","createNewAccount","userData","a","mutate","loginMutation","logInUser","useEffect","isSuccess","isLoading","setItem","data","access_token","initialValues","onSubmit","values","actions","setTimeout","setSubmitting","validationSchema","props","handleBlur","handleChange","isSubmitting","touched","errors","Grid","container","direction","item","xs","TextField","name","label","fullWidth","value","onChange","onBlur","helperText","disabled","loginButton","mutation","UserSchema","dateString","date","getTime","getTimezoneOffset","toISOString","split","isOwner","currentUserRole","user_roles","find","user_role","isAdmin","minHeight","NotAllowed","header","paddingTop","paddingBottom","content","heading_1","heading_2","notice","listItem","paddingLeft","listTitle","itemsLeft","sep","borderLeft","me","Container","length","List","ListItem","ListItemText","primary","Fragment","secondary","deleteBtn","dangerZone","submitButton","addAccount","removeAccount","accountToEdit","AccountSchema","siteUrl","description","saveMutation","updateMutation","saveAccountData","accountData","services","newAccount","goBack","updatedAccount","deleteMutation","useParams","parseInt","select","userList","userListItem","InputLabel","as","banner","bannerLeft","bannerRight","bannerText","contentLeft","borderRight","paddingRight","contentRight","textBtn","adminLink","textTransform","accountId","ArrowLeft","itemMeta","ServiceList","startTime","substr","endTime","timeSlotLen","maxBookings","removeBooking","justifyItems","borderTop","top","left","Loader","CircularProgress","updateBookings","itemCount","queryAccountBookings","useQuery","limit","getBookingsByAccountId","toString","enabled","isFetching","accountBookings","account_id","slice","dateTime","handleDelete","BookingList","formColumn","textAreaField","lineHeight","fontFamily","dateField","resetBookings","serviceToEdit","SpaceSchema","positive","saveServiceData","getHours","getMinutes","newService","updatedService","defaultStartTime","setHours","setMinutes","defaultEndTime","timeStrToDate","timeStr","timeStrParts","utils","DateFnsUtils","htmlFor","placeholder","rowsMin","TimePicker","ampm","autoOk","minutesStep","forEach","ser","serviceId","setSelectedDate","DatePicker","formData","inputVariant","slot","cursor","slotReserved","selectedSlot","TimeSlotItem","handleSelectDate","isReserved","time","gridContent","flexDirection","TimeSlotList","slots","addBooking","handleCloseBookingForm","slotNumber","service_id","saveBookingForm","BookingFormDialog","bookingFormOpen","Dialog","open","onClose","aria-labelledby","DialogTitle","DialogContent","DialogContentText","toDateString","Booking","DialogActions","minWidth","ServiceInfoDialog","infoFormOpen","handleCloseInfoForm","gridContainer","gridItem","flex","row","infoIcon","setBookings","setbookingFormOpen","setInfoFormOpen","selectedService","setSelectedService","setSelectedSlot","now","handleToggleInfoForm","queryAccount","getAccountById","getBookingsByAccountIdAndDateStr","timeToSeconds","timeStrArr","makeServiceTimeSlots","timeUnits","startTimeInSeconds","timeSlotCount","res","increment","hours","Math","floor","mins","selectedTime","reservations","Info","doneAction","queryMe","queryAccounts","window","location","href","exact","Home","Dashboard","EditAccount","ManageAccountUsers","EditService","ManageAccount","ManageBookings","Calendar","Register","Login","createMuiTheme","store","createStore","applyMiddleware","thunk","queryClient","QueryClient","App","QueryClientProvider","client","ThemeProvider","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6d280d7c.chunk.js","sourcesContent":["import { \n\tUserActionTypes, \n\tUserState, \n} from '../types'\n\nconst initialState = {\n\tuser: undefined,\n\ttoken: undefined,\n\tloggedOut: false,\n\tupdateUser: true\n}\n\nconst userReducer = (state = initialState, action: UserActionTypes):UserState => {\n\n\tswitch (action.type) {\n\tcase '@prefix/SET_TOKEN':\n\t\treturn {\n\t\t\t...state,\n\t\t\ttoken: action.payload,\n\t\t}\n\tcase '@prefix/SET_USER':\n\t\treturn {\n\t\t\t...state,\n\t\t\tuser: action.payload,\n\t\t\tloggedOut: false,\n\t\t\tupdateUser: false,\n\t\t}\n\tcase '@prefix/LOGOUT_USER' :\n\t\treturn {\n\t\t\t...state,\n\t\t\tuser: undefined,\n\t\t\ttoken: undefined,\n\t\t\tloggedOut: true,\n\t\t\tupdateUser: false\n\t\t}\n\tdefault: return state\n\t}\n}\n\nexport default userReducer","import { \n\tAccountActionTypes, \n\tAccountState, \n} from '../types'\nimport { Account } from '../../types'\n\nconst initialState = {\n\taccounts: [],\n\tupdatingAccounts: true,\n}\n\nconst accountReducer = (state = initialState, action: AccountActionTypes):AccountState => {\n\tswitch (action.type) {\n\tcase '@prefix/START_ACCOUNT_ACTION':\n\t\treturn {\n\t\t\t...state,\n\t\t\tupdatingAccounts: true\n\t\t}\n\tcase '@prefix/DONE_ACCOUNT_ACTION':\n\t\treturn {\n\t\t\t...state,\n\t\t\tupdatingAccounts: false\n\t\t}\n\tcase '@prefix/ADD_ACCOUNT':\n\t\treturn {\n\t\t\t...state,\n\t\t\taccounts: [action.payload, ...state.accounts],\n\t\t\tupdatingAccounts: false\n\t\t}\n\tcase '@prefix/REMOVE_ACCOUNT':\n\t\treturn {\n\t\t\t...state,\n\t\t\taccounts: state.accounts.filter((account:Account) => account.id !== action.payload.id),\n\t\t\tupdatingAccounts: false\n\t\t}\n\tcase '@prefix/SET_ACCOUNTS':\n\t\treturn {\n\t\t\t...state,\n\t\t\taccounts: action.payload,\n\t\t\tupdatingAccounts: false\n\t\t}\n\tcase '@prefix/SET_SINGLE_ACCOUNT':\n\t\treturn {\n\t\t\t...state,\n\t\t\taccounts: state.accounts.map((acc:Account) => acc.id === action.payload.id ? action.payload : acc),\n\t\t\tupdatingAccounts: false\n\t\t}\n\tdefault: \n\t\treturn state\n\t}\n}\n\nexport default accountReducer","import { \n\tBookingActionTypes, \n\tBookingState, \n} from '../types'\n\nimport { Booking } from '../../types'\n\nconst initialState = {\n\tbookings: [],\n\tupdatingBookings: false,\n\tselectedDate: new Date(),\n\tbookingFormVisible: false\n}\n\nconst mergeBookings = (oldBookings:Booking[], newBookings:Booking[]):Booking[] => {\n\tconst combined = oldBookings.concat(newBookings)\n\tconst bookingSet = combined.reduce((r, i) => \n\t\t!r.some(j => JSON.stringify(i) === JSON.stringify(j)) ? [...r, i] : r, []) \n\treturn bookingSet\n} \n\nconst bookingReducer = (state = initialState, action: BookingActionTypes):BookingState => {\n\tswitch (action.type) {\n\tcase '@prefix/START_BOOKING_ACTION':\n\t\treturn {\n\t\t\t...state,\n\t\t\tupdatingBookings: true\n\t\t}\n\tcase '@prefix/ADD_BOOKING':\n\t\treturn {\n\t\t\t...state,\n\t\t\tbookings: [action.payload, ...state.bookings],\n\t\t\tupdatingBookings: false\n\t\t}\n\tcase '@prefix/REMOVE_BOOKING':\n\t\treturn {\n\t\t\t...state,\n\t\t\tbookings: state.bookings.filter((booking:Booking) => booking.id !== action.payload.id),\n\t\t\tupdatingBookings: false\n\t\t}\n\tcase '@prefix/SET_BOOKINGS':\n\t\treturn {\n\t\t\t...state,\n\t\t\tbookings: mergeBookings(state.bookings, action.payload),\n\t\t\tupdatingBookings: false\n\t\t}\n\tcase '@prefix/UPDATE_BOOKINGS':\n\t\treturn {\n\t\t\t...state,\n\t\t\tbookings: action.payload,\n\t\t\tupdatingBookings: false\n\t\t}\n\tcase '@prefix/RESET_BOOKINGS':\n\t\treturn {\n\t\t\t...state,\n\t\t\tbookings: initialState.bookings,\n\t\t\tupdatingBookings: false\n\t\t}\n\tcase '@prefix/SET_SELECTED_DATE':\n\t\treturn {\n\t\t\t...state,\n\t\t\tselectedDate: action.payload,\n\t\t}\n\tcase '@prefix/SET_FORM_VISIBILITY':\n\t\treturn {\n\t\t\t...state,\n\t\t\tbookingFormVisible: !state.bookingFormVisible,\n\t\t}\n\tdefault: \n\t\treturn state\n\t}\n}\n\nexport default bookingReducer","import { createStore, applyMiddleware, combineReducers } from 'redux'\nimport thunk from 'redux-thunk'\n\nimport userReducer from './reducers/user'\nimport accountReducer from './reducers/account'\nimport bookingReducer from './reducers/bookings'\n\nconst rootReducer = combineReducers({\n\tuserdata: userReducer,\n\taccountdata: accountReducer,\n\tbookingData: bookingReducer,\n})\n\nexport type RootState = ReturnType<typeof rootReducer>\n\nexport default function configureStore() {\n\treturn createStore(rootReducer, {}, applyMiddleware(thunk))\n}\n","import { UserType } from '../../types'\nimport { \n\tUserActionTypes,\n} from '../types'\nimport '../reducers/user'\n\nexport function setToken(token:string):UserActionTypes {\n\treturn {\n\t\ttype: '@prefix/SET_TOKEN',\n\t\tpayload: token\n\t}\n}\n\nexport const setUser = (user:UserType):UserActionTypes =>  {\n\treturn {\n\t\ttype: '@prefix/SET_USER',\n\t\tpayload: user\n\t}\n}\n\nexport const logoutUser = ():UserActionTypes =>  {\n\treturn {\n\t\ttype: '@prefix/LOGOUT_USER',\n\t}\n}\n\n","export const API_URL = process.env.NODE_ENV === 'development' ? 'http://localhost:3000' : 'https://space-booker.herokuapp.com'\nexport const API_PREFIX = 'api/v1'","import axios from 'axios'\nimport { UseMutationResult, UseQueryResult } from 'react-query'\nimport { \n\tRegisterUserInput, \n\tUserType, \n\tAuthToken, \n\tLoginUserInput,\n\tAccountInput,\n\tAccount,\n\tService,\n\tServiceInput,\n\tBooking,\n\tUserAccountRole,\n\tRole\n} from '../types'\nimport { API_URL, API_PREFIX } from '../utils/config'\n\nexport function register(user: RegisterUserInput):Promise<UseMutationResult<AuthToken, Error>> {\n\treturn axios.post(`${API_URL}/${API_PREFIX}/register`, user)\n}\n\nexport function login(user: LoginUserInput):Promise<UseMutationResult<AuthToken, Error>> {\n\treturn axios.post(`${API_URL}/auth`, user)\n}\n\nexport function saveAccount(account:AccountInput):Promise<UseMutationResult<Account, Error>> {\n\t\n\tconst token = localStorage.getItem('access_token')\n\n\tconst config = {\n\t\theaders: {\n\t\t\t'Authorization': `JWT ${token}`\n\t\t}\n\t}\n\treturn axios.post(`${API_URL}/${API_PREFIX}/accounts`, account, config)\n}\n\nexport function updateAccount(account:Account):Promise<UseMutationResult<Account, Error>> {\n\t\n\tconst token = localStorage.getItem('access_token')\n\n\tconst config = {\n\t\theaders: {\n\t\t\t'Authorization': `JWT ${token}`\n\t\t}\n\t}\n\n\treturn axios.put(`${API_URL}/${API_PREFIX}/accounts/${account.id}`, account, config)\n}\n\nexport function addAccountUser({ \n\taccount, \n\tusername, \n\trole \n}: {\n\taccount: Account\n\tusername: string\n\trole: string\n}):Promise<UseMutationResult<Account, Error>> {\n\t\n\tconst token = localStorage.getItem('access_token')\n\n\tconst config = {\n\t\theaders: {\n\t\t\t'Authorization': `JWT ${token}`\n\t\t}\n\t}\n\t\n\treturn axios.put(`${API_URL}/${API_PREFIX}/users/account/${account.id}`, { username, role }, config)\n}\n\nexport function deleteAccount(account:Account):Promise<UseMutationResult<Account, Error>> {\n\t\n\tconst token = localStorage.getItem('access_token')\n\n\tconst config = {\n\t\theaders: {\n\t\t\t'Authorization': `JWT ${token}`\n\t\t}\n\t}\n\treturn axios.delete(`${API_URL}/${API_PREFIX}/accounts/${account.id}`, config)\n}\n\nexport function getAccounts():Promise<UseQueryResult<Account[], Error>> {\n\t\n\tconst token = localStorage.getItem('access_token')\n\n\tconst config = {\n\t\theaders: {\n\t\t\t'Authorization': `JWT ${token}`\n\t\t}\n\t}\n\treturn axios.get(`${API_URL}/${API_PREFIX}/accounts`, config)\n}\n\nexport function getAccountById(id:string|undefined):Promise<UseQueryResult<Account, Error>> {\n\t\n\tconst token = localStorage.getItem('access_token')\n\n\tconst config = {\n\t\theaders: {\n\t\t\t'Authorization': `JWT ${token}`\n\t\t}\n\t}\n\treturn axios.get(`${API_URL}/${API_PREFIX}/accounts/${id}`, config)\n}\n\nexport function saveService(service:ServiceInput):Promise<UseMutationResult<Service, Error>> {\n\t\n\tconst token = localStorage.getItem('access_token')\n\n\tconst config = {\n\t\theaders: {\n\t\t\t'Authorization': `JWT ${token}`\n\t\t}\n\t}\n\treturn axios.post(`${API_URL}/${API_PREFIX}/services`, service, config)\n}\n\nexport function updateService(service:Service):Promise<UseMutationResult<Service, Error>> {\n\t\n\tconst token = localStorage.getItem('access_token')\n\n\tconst config = {\n\t\theaders: {\n\t\t\t'Authorization': `JWT ${token}`\n\t\t}\n\t}\n\n\treturn axios.put(`${API_URL}/${API_PREFIX}/services/${service.id}`, service, config)\n}\n\nexport function deleteService(service:Service):Promise<UseMutationResult<Service, Error>> {\n\t\n\tconst token = localStorage.getItem('access_token')\n\n\tconst config = {\n\t\theaders: {\n\t\t\t'Authorization': `JWT ${token}`\n\t\t}\n\t}\n\treturn axios.delete(`${API_URL}/${API_PREFIX}/services/${service.id}`, config)\n}\n\nexport function getServices(account:Account|undefined):Promise<UseQueryResult<Service[], Error>> {\n\t\n\tconst token = localStorage.getItem('access_token')\n\n\tconst config = {\n\t\theaders: {\n\t\t\t'Authorization': `JWT ${token}`\n\t\t}\n\t}\n\n\tconst accountId = account ? account.id : -1\n\t\n\treturn axios.get(`${API_URL}/${API_PREFIX}/services/account/${accountId}`, config)\n}\n\nexport function saveBooking(booking:Booking):Promise<UseMutationResult<Booking, Error>> {\n\t\n\tconst token = localStorage.getItem('access_token')\n\n\tconst config = {\n\t\theaders: {\n\t\t\t'Authorization': `JWT ${token}`\n\t\t}\n\t}\n\treturn axios.post(`${API_URL}/${API_PREFIX}/bookings`, booking, config)\n}\n\nexport function deleteBooking(booking:Booking):Promise<UseMutationResult<Booking, Error>> {\n\t\n\tconst token = localStorage.getItem('access_token')\n\n\tconst config = {\n\t\theaders: {\n\t\t\t'Authorization': `JWT ${token}`\n\t\t}\n\t}\n\treturn axios.delete(`${API_URL}/${API_PREFIX}/bookings/${booking.id}`, config)\n}\n\nexport function getBookingsByAccountId({ accountId, limit=10 }:{ accountId: string|undefined, limit?: number }):Promise<UseQueryResult<Booking[], Error>> {\n\t\n\tconst token = localStorage.getItem('access_token')\n\n\tconst config = {\n\t\theaders: {\n\t\t\t'Authorization': `JWT ${token}`\n\t\t}\n\t}\n\n\treturn axios.get(`${API_URL}/${API_PREFIX}/bookings/account/${accountId}?limit=${limit}`, config)\n}\n\nexport function getBookingsByAccountIdAndDateStr({ accountId, date }: { accountId: string|undefined, date: string}):Promise<UseQueryResult<Booking[], Error>> {\n\t\n\tconst token = localStorage.getItem('access_token')\n\n\tconst config = {\n\t\theaders: {\n\t\t\t'Authorization': `JWT ${token}`\n\t\t}\n\t}\n\n\treturn axios.get(`${API_URL}/${API_PREFIX}/bookings/account/${accountId}?date=${date}`, config)\n}\n\nexport function me(token:string|undefined):Promise<UseQueryResult<UserType, Error>> {\n\tconst config = {\n\t\theaders: {\n\t\t\t'Authorization': `JWT ${token}`\n\t\t}\n\t}\n\treturn axios.get(`${API_URL}/${API_PREFIX}/me`, config)\n}","import { Account } from '../../types'\nimport { \n\tAccountActionTypes,\n} from '../types'\nimport '../reducers/account'\n\nexport function startAction():AccountActionTypes {\n\treturn {\n\t\ttype: '@prefix/START_ACCOUNT_ACTION'\n\t}\n}\n\nexport function doneAction():AccountActionTypes {\n\treturn {\n\t\ttype: '@prefix/DONE_ACCOUNT_ACTION'\n\t}\n}\n\nexport function addAccount(account:Account):AccountActionTypes {\n\treturn {\n\t\ttype: '@prefix/ADD_ACCOUNT',\n\t\tpayload: account\n\t}\n}\n\nexport function removeAccount(account:Account):AccountActionTypes {\n\treturn {\n\t\ttype: '@prefix/REMOVE_ACCOUNT',\n\t\tpayload: account\n\t}\n}\n\nexport const setAccounts = (accounts:Account[]):AccountActionTypes =>  {\n\treturn {\n\t\ttype: '@prefix/SET_ACCOUNTS',\n\t\tpayload: accounts\n\t}\n}\n\nexport function setSingleAccount(account:Account):AccountActionTypes {\n\treturn {\n\t\ttype: '@prefix/SET_SINGLE_ACCOUNT',\n\t\tpayload: account\n\t}\n}\n\n","import React from 'react'\nimport {\n\tcreateStyles,\n\tmakeStyles,\n\tLink,\n} from '@material-ui/core'\nimport { Link as RouterLink } from 'react-router-dom'\n\nconst stylesInUse = makeStyles(() =>\n\tcreateStyles({\n\t\tlogo: {\n\t\t\tzIndex: 1250,\n\t\t\twidth: '210px',\n\t\t\tmarginRight: '2em'\n\t\t},\n\t\tlogoImg: {\n\t\t\twidth: '100%',\n\t\t\theight: 'auto',\n\t\t\tdisplay: 'block'\n\t\t}\n\t})\n)\n\nconst Logo = ():React.ReactElement => {\n  \n\tconst classes = stylesInUse()\n  \n\tconst logoImg = '/img/logo.png'\n\n\treturn (\n\t\t<Link component={RouterLink} className={classes.logo} to=\"/\">      \n\t\t\t<img \n\t\t\t\tsrc={process.env.PUBLIC_URL + logoImg} \n\t\t\t\tclassName={classes.logoImg} \n\t\t\t\talt=\"SpaceBooker\"\n\t\t\t/>\n\t\t</Link>\n\t)\n}\n\nexport default Logo\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { useHistory } from 'react-router-dom'\nimport {\n\tAppBar,\n\tcreateStyles,\n\tLink,\n\tmakeStyles,\n\tToolbar,\n} from '@material-ui/core'\nimport { Link as RouterLink } from 'react-router-dom'\n\nimport { logoutUser } from '../store/actions/user'\n\nimport { AppState } from '../store/types'\n\nimport Logo from './Logo'\n\nconst stylesInUse = makeStyles(() =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tflexGrow: 1,\n\t\t},\n\t\tappBar: {\n\t\t\tzIndex: 1250,\n\t\t\tbackgroundColor: '#ffffff'\n\t\t},\n\t\tlinkBtnTransparent: {\n\t\t\tpadding: '0.8em 1em',\n\t\t\tborder: '1px solid transparent',\n\t\t\t'&:hover': {\n\t\t\t\ttextDecoration: 'none',\n\t\t\t\topacity: 0.8,\n\t\t\t},\n\t\t},\n\t\tlinkBtnBordered: {\n\t\t\tpadding: '0.8em 1em',\n\t\t\tborderRadius: '4px',\n\t\t\tborder: '1px solid rgba(98,0,238, 0.4)',\n\t\t\t'&:hover': {\n\t\t\t\ttextDecoration: 'none',\n\t\t\t\tbackgroundColor: 'rgba(0,0,0,0.02)',\n\t\t\t\topacity: 0.8,\n\t\t\t},\n\t\t},\n\t\tloginGreet: {\n\t\t\tfontSize: '.95em',\n\t\t\tmarginRight: '1em',\n\t\t\tcolor: '#000'\n\t\t},\n\t\tsectionLeft: {\n\t\t\tflexGrow: 1,\n\t\t\ttextAlign: 'left'\n\t\t},\n\t\ttoggleButton: {\n\t\t\tmarginRight: 25,\n\t\t},\n\t})\n)\n\nconst mapStateToProps = (state: AppState) => ({\n\tuser: state.userdata.user\n})\n  \ntype Props = ReturnType<typeof mapStateToProps>;\n\ninterface DispatchProps { \n    logoutUser: () => void\n}\n\nconst Header = ({ user, logoutUser }: Props & DispatchProps):React.ReactElement => {\n\n\tconst classes = stylesInUse()\n\n\tconst history = useHistory()\n\n\tconst logout = () => {\n\t\tlocalStorage.removeItem('access_token')\n\t\tlogoutUser()\n\t\thistory.push('/')\n\t}\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<AppBar position=\"static\" className={classes.appBar}>\n\t\t\t\t<Toolbar>\n\t\t\t\t\t<Logo />\n\t\t\t\t\t<div className={classes.sectionLeft}>\n\t\t\t\t\t\t{user && \n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\tcomponent={RouterLink}\n\t\t\t\t\t\t\tclassName={classes.linkBtnTransparent}\n\t\t\t\t\t\t\tto=\"/dashboard\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tDashboard\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{!user && (\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\tcomponent={RouterLink}\n\t\t\t\t\t\t\t\t\tclassName={classes.linkBtnTransparent}\n\t\t\t\t\t\t\t\t\tto=\"/login\"\n\t\t\t\t\t\t\t\t>\n                                Login\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\tcomponent={RouterLink}\n\t\t\t\t\t\t\t\t\tclassName={classes.linkBtnBordered}\n\t\t\t\t\t\t\t\t\tto=\"/register\"\n\t\t\t\t\t\t\t\t>\n                                Sign up\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</div>\t\t\t\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{user && (\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<span className={classes.loginGreet}>\n                                    Hello, {user.username}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\tcomponent={RouterLink}\n\t\t\t\t\t\t\t\t\tclassName={classes.linkBtnBordered}\n\t\t\t\t\t\t\t\t\tto=\"/\"\n\t\t\t\t\t\t\t\t\tonClick={logout}\n\t\t\t\t\t\t\t\t>\n                                    Logout\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</Toolbar>\n\t\t\t</AppBar>\n\t\t</div>\n\t)\n}\n\nexport default connect(mapStateToProps, {\n\tlogoutUser\n})(Header)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Redirect } from 'react-router-dom'\nimport { Button, makeStyles, createStyles } from '@material-ui/core'\nimport { useHistory } from 'react-router-dom'\n\nimport { AppState } from '../store/types'\n\nconst stylesInUse = makeStyles(() =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tbackground: '#6A0572',\n\t\t\tdisplay: 'flex',\n\t\t\tposition: 'relative',\n\t\t\tjustifyContent: 'center',\n\t\t\talignItems: 'center',\n\t\t\theight: 'calc(100vh - 64px)',\n\t\t},\n\t\tintro: {\n\t\t\tcolor: '#ffffff',\n\t\t\ttextAlign: 'center',\n\t\t\tposition: 'relative',\n\t\t\tzIndex: 1,\n\t\t},\n\t\theading: {\n\t\t\tfontSize: '4rem',\n\t\t\tposition: 'relative',\n\t\t\tfontWeight: 'bold',\n\t\t\tletterSpacing: -1,\n\t\t\tmarginBottom: '1rem',\n\t\t},\n\t\tintroText: {\n\t\t\tfontSize: '1.5rem',\n\t\t\tmarginTop: '0 auto 2rem',\n\t\t},\n\t\tcontainedBtn: {\n\t\t\tbackgroundColor: '#df0cc4',\n\t\t\tpadding: '12px 0',\n\t\t\tfontWeight: 'bold',\n\t\t\tcolor: '#ffffff',\n\t\t\tmargin: '0 0.5em',\n\t\t\twidth: 180,\n\t\t},\n\t\toutlinedBtn: {\n\t\t\tpadding: '12px 0',\n\t\t\tfontWeight: 'bold',\n\t\t\tcolor: '#ffffff',\n\t\t\tmargin: '0 0.5em',\n\t\t\twidth: 180,\n\t\t\tborderColor: 'rgba(255,255,255,0.5)',\n\t\t\t'&:hover': {\n\t\t\t\tborderColor: '#fff',\n\t\t\t},\n\t\t},\n\t})\n)\n\nconst mapStateToProps = (state: AppState) => ({\n\tuser: state.userdata.user\n})\n\ntype Props = ReturnType<typeof mapStateToProps>;\n\nconst Home = ({ user }: Props):React.ReactElement => {\n\n\tif (user?.username) {\n\t\treturn <Redirect to=\"/dashboard\" />\n\t}\n\n\tconst classes = stylesInUse()\n\tconst history = useHistory()\n\n\tconst handleClick = (path: string) => {\n\t\treturn () => {\n\t\t\thistory.push(path)\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<div className={classes.intro}>\n\t\t\t\t<h1 className={classes.heading}>Working spaces booking app</h1>\n\t\t\t\t<p className={classes.introText}>\n                    Create a booking calendar for your working spaces in a few seconds.\n\t\t\t\t</p>\n\n\t\t\t\t<Button\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\tclassName={classes.containedBtn}\n\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\tsize=\"large\"\n\t\t\t\t\tonClick={handleClick('/register')}\n\t\t\t\t\tdisableElevation\n\t\t\t\t>\n                    Sign up\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\tclassName={classes.outlinedBtn}\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\tsize=\"large\"\n\t\t\t\t\tonClick={handleClick('/login')}\n\t\t\t\t\tdisableElevation\n\t\t\t\t>\n                    Login\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default connect(mapStateToProps)(Home)\n","import React, { useState, useEffect } from 'react'\nimport { Redirect } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport { useMutation } from 'react-query'\nimport { Formik, Form, FormikProps } from 'formik'\nimport {\n\tGrid,\n\tTextField,\n\tButton,\n\tmakeStyles,\n\tcreateStyles,\n} from '@material-ui/core'\nimport { register, login } from '../../services/queries'\n\nimport { AppState } from '../../store/types'\n\nimport { setToken, setUser } from '../../store/actions/user'\n\nimport * as Yup from 'yup'\n\nconst RegisterSchema = () => {\n\treturn Yup.object().shape({\n\t\temail: Yup.string().email().required('Email address is mandatory.'),\n\t\tusername: Yup.string()\n\t\t\t.required('Please choose your username.')\n\t\t\t.min(3, 'Username must be at least 3 characters long.')\n\t\t\t.max(50, 'Username can be maximum 50 characters long.')\n\t\t\t.required('Username is mandatory.'),\n\t\tpassword: Yup.string()\n\t\t\t.min(8, 'Password must be at least 8 characters long.')\n\t\t\t.matches(\n\t\t\t\t/^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*[!?@#$%^&*()]).{7,30}\\S$/\n\t\t\t)\n\t\t\t.required(\n\t\t\t\t'Password must have at least one number, one uppercase character, lowercase  character and special character from !?@#$%^&*() '\n\t\t\t),\n\t\tconfirmPassword: Yup.string()\n\t\t\t.oneOf([Yup.ref('password'), ''], 'Passwords must match.')\n\t\t\t.required('Passwords must match.'),\n\t})\n}\n\nconst stylesInUse = makeStyles((theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\twidth: '100%',\n\t\t\tmargin: '0 auto',\n\t\t\tbackgroundColor: '#f1f1f1',\n\t\t\theight: 'calc(100vh - 64px)',\n\t\t\tdisplay: 'flex',\n\t\t\talignItems: 'center',\n\t\t\tjustifyContent: 'center'\n\t\t},\n\t\tform: {\n\t\t\tbackgroundColor: '#fff',\n\t\t\tpadding: '2em 3em 3em',\n\t\t\tborderRadius: '8px',\n\t\t\tmaxWidth: '400px'\n\t\t},\n\t\ttextField: {\n\t\t\t'& > *': {\n\t\t\t\twidth: '100%',\n\t\t\t},\n\t\t},\n\t\tinputField: {\n\t\t\tmargin: '5px 0 20px',\n\t\t},\n\t\tregisterButton: {\n\t\t\tmarginTop: '10px',\n\t\t\tbackgroundColor: '#6A0572',\n\t\t\tpadding: '12px 20px',\n\t\t\tfontWeight: 'bold',\n\t\t\tcolor: '#ffffff',\n\t\t\tmargin: '0 0.5em 0 0',\n\t\t\twidth: 'auto',\n\t\t},\n\t\ttitle: { textAlign: 'left' },\n\t\tsuccessMessage: { color: theme.palette.success.main },\n\t\terrorMessage: { color: theme.palette.error.main },\n\t})\n)\n\ninterface FormStatus {\n  type: string\n  message: string\n}\n\ninterface FormStatusProps {\n  [key: string]: FormStatus\n}\n\ninterface UserData {\n  username: string\n  email: string\n  password: string\n  confirmPassword: string\n}\n\nconst formStatusProps: FormStatusProps = {\n\tsuccess: {\n\t\tmessage: 'Registered successfully.',\n\t\ttype: 'success',\n\t},\n\terror: {\n\t\tmessage: 'Registeration failed: username or email already registered.',\n\t\ttype: 'error',\n\t},\n}\n\nconst mapStateToProps = (state: AppState) => ({\n\tuser: state.userdata.user\n})\n  \ntype Props = ReturnType<typeof mapStateToProps>;\n\ninterface DispatchProps { \n    setToken: (token:string) => void,\n}\n\nconst Register = ({ user, setToken }: Props & DispatchProps):React.ReactElement => {\n\n\tconst [formStatus, setFormStatus] = useState<FormStatus>({\n\t\tmessage: '',\n\t\ttype: '',\n\t})\n\tconst [showFormStatus, setShowFormStatus] = useState(false)\n\tconst [userdata, setUserdata] = useState({ username: '', password: ''})\n\n\tconst [redirect, setRedirect] = useState(false)\n\n\tconst classes = stylesInUse()\n\t\n\tconst registerMutation = useMutation(register, {\n\t\tonError: () => {\n\t\t\tsetFormStatus(formStatusProps.error)\n\t\t\tsetShowFormStatus(true)\n\t\t}, \n\t\tonSuccess: () => {\n\t\t\tsetFormStatus(formStatusProps.success)\n\t\t\tsetShowFormStatus(true)\n\t\t}\n\t})\n\n\tconst createNewAccount = async (userData: UserData) => {\n\t\t\n\t\tregisterMutation.mutate({\n\t\t\tusername: userData.username,\n\t\t\temail: userData.email,\n\t\t\tpassword: userData.password\n\t\t})\n\n\t\tsetUserdata({ \n\t\t\tusername: userData.username, \n\t\t\tpassword: userData.password \n\t\t})\n\t}\n\n\tconst loginMutation = useMutation(login, { \n\t\tonError: () => {\n\t\t\tsetFormStatus(formStatusProps.error)\n\t\t\tsetShowFormStatus(true)\n\t\t}\n\t})\n\n\tconst logInUser = async (userData: { username: string, password: string }) => {\n\t\tloginMutation.mutate({\n\t\t\tusername: userData.username,\n\t\t\tpassword: userData.password\n\t\t})\n\t}\n\n\tuseEffect(() => {\n\t\tif (registerMutation.isSuccess && userdata.username && userdata.password && !loginMutation.isLoading) {\n\t\t\tlogInUser(userdata)\n\t\t}\n\t\n\t\tif (loginMutation.isSuccess) {\n\t\t\tlocalStorage.setItem('access_token', loginMutation.data?.data?.access_token ?? '')\n\t\t\tsetToken(loginMutation.data?.data?.access_token ?? '')\n\t\t\tsetRedirect(true)\n\t\t}\n\t}, [registerMutation, user, loginMutation])\n\n\tif (redirect || user?.username) {\n\t\treturn <Redirect to=\"/dashboard\" />\n\t}\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<Formik\n\t\t\t\tinitialValues={{\n\t\t\t\t\tusername: '',\n\t\t\t\t\temail: '',\n\t\t\t\t\tpassword: '',\n\t\t\t\t\tconfirmPassword: '',\n\t\t\t\t}}\n\t\t\t\tonSubmit={(values: UserData, actions) => {\n\t\t\t\t\tcreateNewAccount(values)\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tactions.setSubmitting(false)\n\t\t\t\t\t}, 400)\n\t\t\t\t}}\n\t\t\t\tvalidationSchema={RegisterSchema}\n\t\t\t>\n\t\t\t\t{(props: FormikProps<UserData>) => {\n\t\t\t\t\tconst {\n\t\t\t\t\t\thandleBlur,\n\t\t\t\t\t\thandleChange,\n\t\t\t\t\t\tvalues,\n\t\t\t\t\t\tisSubmitting,\n\t\t\t\t\t\ttouched,\n\t\t\t\t\t\terrors,\n\t\t\t\t\t} = props\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Form className={classes.form}>\n\t\t\t\t\t\t\t<Grid container direction=\"row\">\n\t\t\t\t\t\t\t\t<Grid item className={classes.title} xs={12}>\n\t\t\t\t\t\t\t\t\t<h1>Sign up!</h1>\n\t\t\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\tid=\"username\"\n\t\t\t\t\t\t\t\t\t\tname=\"username\"\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Username\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\tclassName={classes.inputField}\n\t\t\t\t\t\t\t\t\t\tvalue={values.username}\n\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\t\tonBlur={handleBlur}\n\t\t\t\t\t\t\t\t\t\thelperText={\n\t\t\t\t\t\t\t\t\t\t\ttouched.username && errors.username\n\t\t\t\t\t\t\t\t\t\t\t\t? errors.username\n\t\t\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\terror={touched.username && errors.username ? true : false}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t\t\t{' '}\n\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\tid=\"email\"\n\t\t\t\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Email\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\tclassName={classes.inputField}\n\t\t\t\t\t\t\t\t\t\tvalue={values.email}\n\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\t\tonBlur={handleBlur}\n\t\t\t\t\t\t\t\t\t\thelperText={\n\t\t\t\t\t\t\t\t\t\t\ttouched.email && errors.email\n\t\t\t\t\t\t\t\t\t\t\t\t? errors.email\n\t\t\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\terror={touched.email && errors.email ? true : false}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\tid=\"password\"\n\t\t\t\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Password\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\tclassName={classes.inputField}\n\t\t\t\t\t\t\t\t\t\tvalue={values.password}\n\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\t\tonBlur={handleBlur}\n\t\t\t\t\t\t\t\t\t\thelperText={\n\t\t\t\t\t\t\t\t\t\t\ttouched.password && errors.password\n\t\t\t\t\t\t\t\t\t\t\t\t? 'Make sure your password is minimum of 8 characters long and consists of at least 1 uppercase, lowercase, number and one special ' +\n                          'character from !?@#$%^&*(). Password cannot end with an empty space.'\n\t\t\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\terror={touched.password && errors.password ? true : false}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\tid=\"confirmPassword\"\n\t\t\t\t\t\t\t\t\t\tname=\"confirmPassword\"\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Confirm password\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\tclassName={classes.inputField}\n\t\t\t\t\t\t\t\t\t\tvalue={values.confirmPassword}\n\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\t\tonBlur={handleBlur}\n\t\t\t\t\t\t\t\t\t\thelperText={\n\t\t\t\t\t\t\t\t\t\t\ttouched.confirmPassword && errors.confirmPassword\n\t\t\t\t\t\t\t\t\t\t\t\t? 'Your confirmation did not match with your password. Please try again.'\n\t\t\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\terror={\n\t\t\t\t\t\t\t\t\t\t\ttouched.confirmPassword && errors.confirmPassword\n\t\t\t\t\t\t\t\t\t\t\t\t? true\n\t\t\t\t\t\t\t\t\t\t\t\t: false\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t\t\t<Grid item xs={6}>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\tclassName={classes.registerButton}\n\t\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{' '}\n                                        Sign up\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t{showFormStatus && (\n\t\t\t\t\t\t\t\t\t\t<div className=\"formStatus\">\n\t\t\t\t\t\t\t\t\t\t\t{formStatus.type === 'success' ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<p className={classes.successMessage}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{formStatus.message}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t) : formStatus.type === 'error' ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<p className={classes.errorMessage}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{formStatus.message}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Form>\n\t\t\t\t\t)\n\t\t\t\t}}\n\t\t\t</Formik>\n\t\t</div>\n\t)\n}\n\nexport default connect(mapStateToProps, {\n\tsetToken,\n\tsetUser\n})(Register)","import React, { useState, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { Redirect } from 'react-router-dom'\nimport { useMutation } from 'react-query'\nimport * as Yup from 'yup'\nimport { Formik, Form, FormikProps } from 'formik'\nimport {\n\tGrid,\n\tTextField,\n\tButton,\n\tmakeStyles,\n\tcreateStyles,\n} from '@material-ui/core'\n\nimport { AppState } from '../../store/types'\nimport { Account } from '../../types'\n\nimport { setToken, setUser } from '../../store/actions/user'\nimport { setAccounts } from '../../store/actions/accounts'\n\nimport { login } from '../../services/queries'\n\nconst stylesInUse = makeStyles((theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\twidth: '100%',\n\t\t\tmargin: '0 auto',\n\t\t\tbackgroundColor: '#f1f1f1',\n\t\t\theight: 'calc(100vh - 64px)',\n\t\t\tdisplay: 'flex',\n\t\t\talignItems: 'center',\n\t\t\tjustifyContent: 'center'\n\t\t},\n\t\tform: {\n\t\t\tbackgroundColor: '#fff',\n\t\t\tpadding: '2em 3em 3em',\n\t\t\tborderRadius: '8px',\n\t\t\tmaxWidth: '400px'\n\t\t},\n\t\ttextField: {\n\t\t\t'& > *': {\n\t\t\t\twidth: '100%',\n\t\t\t},\n\t\t},\n\t\tinputField: {\n\t\t\tmargin: '5px 0 20px',\n\t\t},\n\t\tloginButton: {\n\t\t\tmarginTop: '10px',\n\t\t\tbackgroundColor: '#6A0572',\n\t\t\tpadding: '12px 20px',\n\t\t\tfontWeight: 'bold',\n\t\t\tcolor: '#ffffff',\n\t\t\tmargin: '0 0.5em 0 0',\n\t\t\twidth: 'auto',\n\t\t},\n\t\ttitle: { textAlign: 'left' },\n\t\tsuccessMessage: { color: theme.palette.success.main },\n\t\terrorMessage: { color: theme.palette.error.main },\n\t})\n)\n\ninterface FormStatus {\n  type: string\n  message: string\n}\n\ninterface FormStatusProps {\n  [key: string]: FormStatus\n}\n\ninterface LoginFormFields {\n  username: string\n  password: string\n}\n\nconst formStatusProps: FormStatusProps = {\n\terror: {\n\t\tmessage: 'Invalid username or password. Please try again.',\n\t\ttype: 'error',\n\t},\n}\n\nconst mapStateToProps = (state: AppState) => ({\n\tuser: state.userdata.user\n})\n  \ntype Props = ReturnType<typeof mapStateToProps>;\n\ninterface DispatchProps { \n    setToken: (token:string) => void\n\tsetAccounts: (accounts: Account[]) => void\n}\n\nconst Login = ({ user, setToken, setAccounts }: Props & DispatchProps):React.ReactElement => {\n\tconst [formStatus, setFormStatus] = useState<FormStatus>({\n\t\tmessage: '',\n\t\ttype: '',\n\t})\n\tconst classes = stylesInUse()\n\tconst [showFormStatus, setShowFormStatus] = useState(false)\n\tconst [redirect, setRedirect] = useState(false)\n\n\tconst mutation = useMutation(login, { \n\t\tonError: () => {\n\t\t\tsetFormStatus(formStatusProps.error)\n\t\t\tsetShowFormStatus(true)\n\t\t},\n\t\tonSuccess: () => setAccounts([])\n\t})\n\n\tconst logInUser = async (userData: LoginFormFields) => {\n\t\tmutation.mutate({\n\t\t\tusername: userData.username,\n\t\t\tpassword: userData.password\n\t\t})\n\t}\n    \n\tuseEffect(() => {\n\t\tif (mutation.isSuccess && !mutation.isLoading) {\n\t\t\tlocalStorage.setItem('access_token', mutation.data?.data?.access_token ?? '')\n\t\t\tsetToken(mutation.data?.data?.access_token ?? '')\n\t\t\tsetRedirect(true)\n\t\t}\n\t}, [mutation])\n\n\tif (redirect && mutation.isSuccess || user?.username) {\n\t\treturn <Redirect to=\"/dashboard\" />\n\t}\n\n\tconst UserSchema = Yup.object().shape({\n\t\tusername: Yup.string().required('Please enter your username.'),\n\t\tpassword: Yup.string().required('Please enter your password.'),\n\t})\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<Formik\n\t\t\t\tinitialValues={{\n\t\t\t\t\tusername: '',\n\t\t\t\t\tpassword: '',\n\t\t\t\t}}\n\t\t\t\tonSubmit={(values: LoginFormFields, actions) => {\n\t\t\t\t\tlogInUser(values)\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tactions.setSubmitting(false)\n\t\t\t\t\t}, 400)\n\t\t\t\t}}\n\t\t\t\tvalidationSchema={UserSchema}\n\t\t\t>\n\t\t\t\t{(props: FormikProps<LoginFormFields>) => {\n\t\t\t\t\tconst {\n\t\t\t\t\t\thandleBlur,\n\t\t\t\t\t\thandleChange,\n\t\t\t\t\t\tvalues,\n\t\t\t\t\t\tisSubmitting,\n\t\t\t\t\t\ttouched,\n\t\t\t\t\t\terrors,\n\t\t\t\t\t} = props\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Form className={classes.form}>\n\t\t\t\t\t\t\t<Grid container direction=\"row\">\n\t\t\t\t\t\t\t\t<Grid item className={classes.title} xs={12}>\n\t\t\t\t\t\t\t\t\t<h1>Login</h1>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\tid=\"username\"\n\t\t\t\t\t\t\t\t\t\tname=\"username\"\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Username\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\tclassName={classes.inputField}\n\t\t\t\t\t\t\t\t\t\tvalue={values.username}\n\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\t\tonBlur={handleBlur}\n\t\t\t\t\t\t\t\t\t\thelperText={\n\t\t\t\t\t\t\t\t\t\t\ttouched.username && errors.username\n\t\t\t\t\t\t\t\t\t\t\t\t? errors.username\n\t\t\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\terror={touched.username && errors.username ? true : false}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\tid=\"password\"\n\t\t\t\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Password\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\tclassName={classes.inputField}\n\t\t\t\t\t\t\t\t\t\tvalue={values.password}\n\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\t\tonBlur={handleBlur}\n\t\t\t\t\t\t\t\t\t\thelperText={\n\t\t\t\t\t\t\t\t\t\t\ttouched.password && errors.password\n\t\t\t\t\t\t\t\t\t\t\t\t? errors.password\n\t\t\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\terror={touched.password && errors.password ? true : false}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t\t\t<Grid item xs={6}>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\t\t\t\t\t\tclassName={classes.loginButton}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{' '}\n                                        Log in\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t{showFormStatus && (\n\t\t\t\t\t\t\t\t\t\t<div className=\"formStatus\">\n\t\t\t\t\t\t\t\t\t\t\t<p className={classes.errorMessage}>\n\t\t\t\t\t\t\t\t\t\t\t\t{formStatus.message}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Form>\n\t\t\t\t\t)\n\t\t\t\t}}\n\t\t\t</Formik>\n\t\t</div>\n\t)\n}\n\nexport default connect(mapStateToProps, {\n\tsetToken,\n\tsetUser,\n\tsetAccounts\n})(Login)","import { UserType, Account } from '../types'\n\nexport const dateString = (date:Date):string => {\n\treturn new Date(date.getTime() - (date.getTimezoneOffset() * 60000 ))\n\t\t.toISOString()\n\t\t.split('T')[0]\n}\n\nexport const isOwner = (user:UserType|undefined, account: Account|undefined):boolean => {\n\tif (!user || !account) {\n\t\treturn false\n\t}\n\tconst currentUserRole = account.user_roles.find(user_role => user_role.user.username === user?.username)\n\tif (\n\t\t!currentUserRole ||\n\t\tcurrentUserRole.role.role !== 'owner'\n\t) {\n\t\treturn false\n\t}\n\n\treturn true\n}\n\nexport const isAdmin = (user:UserType|undefined, account: Account|undefined):boolean => {\n\tif (!user || !account) {\n\t\treturn false\n\t}\n\tconst currentUserRole = account.user_roles.find(user_role => user_role.user.username === user?.username)\n\tif (\n\t\t!currentUserRole ||\n\t\tcurrentUserRole.role.role !== 'admin'\n\t) {\n\t\treturn false\n\t}\n\n\treturn true\n}\n\nexport const isUser = (user:UserType|undefined, account: Account|undefined):boolean => {\n\tif (!user || !account) {\n\t\treturn false\n\t}\n\tconst currentUserRole = account.user_roles.find(user_role => user_role.user.username === user?.username)\n\tif (\n\t\t!currentUserRole ||\n\t\tcurrentUserRole.role.role !== 'user'\n\t) {\n\t\treturn false\n\t}\n\n\treturn true\n}\n","import React from 'react'\n\nimport {\n\tcreateStyles,\n\tmakeStyles,\n} from '@material-ui/core'\n\nconst stylesInUse = makeStyles(() =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tdisplay: 'flex',\n\t\t\talignItems: 'center',\n\t\t\tminHeight: '600px',\n\t\t\theight: '100vh',\n\t\t\twidth: '100%',\n\t\t\tjustifyContent: 'center'\n\t\t},\n\t})\n)\n\nconst NotAllowed = ():React.ReactElement => {\n\n\tconst classes = stylesInUse()\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<h2>Sorry, that&lsquo;s not allowed.</h2>\n\t\t</div>\n\t)\n}\n\nexport default NotAllowed","import React from 'react'\nimport { connect } from 'react-redux'\nimport {\n\tContainer,\n\tButton,\n\tcreateStyles,\n\tmakeStyles,\n\tList,\n\tListItem,\n\tListItemText,\n\tLink\n} from '@material-ui/core'\nimport { Link as RouterLink } from 'react-router-dom'\n\nimport { useHistory } from 'react-router-dom'\nimport { AppState } from '../store/types'\n\nimport { isAdmin, isOwner } from '../utils/helpers'\n\nimport NotAllowed from '../components/NotAllowed'\n\nconst stylesInUse = makeStyles(() =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tbackground: '#FFFFFF',\n\t\t\tposition: 'relative',\n\t\t\tjustifyContent: 'center',\n\t\t\talignItems: 'center',\n\n\t\t},\n\t\theader: {\n\t\t\tbackground: '#6A0572',\n\t\t\tjustifyContent: 'center',\n\t\t\talignItems: 'center',\n\t\t\tpaddingTop: '40px',\n\t\t\tpaddingBottom: '50px',\n\t\t\tcolor:'#ffffff'\n\t\t},\n\t\tcontent: {\n\n\t\t},\n\t\tintro: {\n\t\t\tcolor: '#ffffff',\n\t\t\ttextAlign: 'center',\n\t\t\tposition: 'relative',\n\t\t\tzIndex: 1,\n\t\t},\n\t\theading_1: {\n\t\t\tfontSize: '3rem',\n\t\t\tposition: 'relative',\n\t\t\tfontWeight: 'bold',\n\t\t\tletterSpacing: -1,\n\t\t\tmargin: '1rem 0 0.5rem 0',\n\t\t},\n\t\theading_2: {\n\t\t\tfontSize: '2rem',\n\t\t\tposition: 'relative',\n\t\t\tfontWeight: 'bold',\n\t\t\tletterSpacing: -1,\n\t\t\tmarginBottom: '1rem',\n\t\t},\n\t\tintroText: {\n\t\t\tfontSize: '1.2rem',\n\t\t\tmargin: '0.5rem auto 1rem',\n\t\t},\n\t\tnotice: {\n\t\t\tfontSize: '1em',\n\t\t\tmargin: '1rem 0 1.5rem',\n\t\t\tcolor:'#111'\n\t\t},\n\t\tlistItem: {\n\t\t\tpaddingLeft: 0\n\t\t},\n\t\tlistTitle: {\n\t\t\tfontSize: '1.2em',\n\t\t\tfontWeight: 'bold',\n\t\t\tcolor:'#000'\n\t\t},\n\t\titemsLeft: {\n\t\t\tdisplay: 'inline-block'\n\t\t},\n\t\tsep: {\n\t\t\tborderLeft: '1px solid #ddd',\n\t\t\tpadding: '0 4px 0 0',\n\t\t\tmargin: '0 4px 0 8px'\n\t\t},\n\t\tcontainedBtn: {\n\t\t\tbackgroundColor: '#6A0572',\n\t\t\tpadding: '12px 20px',\n\t\t\tfontWeight: 'bold',\n\t\t\tcolor: '#ffffff',\n\t\t\tmargin: 0,\n\t\t\twidth: 'auto',\n\t\t},\n\t})\n)\n\nconst mapStateToProps = (state: AppState) => ({\n\taccountdata: state.accountdata,\n\tme: state.userdata.user,\n\tupdateUser: state.userdata.updateUser\n})\n  \ntype Props = ReturnType<typeof mapStateToProps>\n\nconst Dashboard = ({ accountdata, me, updateUser }: Props):React.ReactElement => {\n\n\tconst classes = stylesInUse()\n\n\tif (!me && !updateUser) {\n\t\treturn <NotAllowed />\n\t}\n\n\tconst history = useHistory()\n\n\tconst handleClick = (path: string) => {\n\t\treturn () => {\n\t\t\thistory.push(path)\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t\n\t\t\t<div className={classes.header}>\n\t\t\t\t<Container maxWidth=\"xl\">\n\t\t\t\t\t<h1 className={classes.heading_1}>Dashboard</h1>\n\t\t\t\t\t<p className={classes.introText}>\n\t\t\t\t\t\tManage your organizations and bookings.\n\t\t\t\t\t</p>\n\t\t\t\t</Container>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div className={classes.content}>\n\t\t\t\t\n\t\t\t\t<Container maxWidth=\"xl\">\n\t\t\t\t\t<h2 className={classes.heading_2}>Your organizations</h2>\n\t\t\t\t\n\t\t\t\t\t{accountdata.accounts.length === 0 \n\t\t\t\t\t\t? <p className={classes.notice}>{'You haven\\'t added any organizations yet. Add one to get started!'} </p>\n\t\t\t\t\t\t\n\t\t\t\t\t\t: <List>\n\t\t\t\t\t\t\t{accountdata.accounts.map(item => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<ListItem key={item.id} className={classes.listItem}>\n\t\t\t\t\t\t\t\t\t\t<ListItemText\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.heading_2}\n\t\t\t\t\t\t\t\t\t\t\tprimary={\n\t\t\t\t\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.listTitle}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcomponent={RouterLink}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tto={!(isAdmin(me, item) || isOwner(me, item)) ? `/account/${item.id}/calendar` : `/account/${item.id}/manage`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tsecondary={\n\t\t\t\t\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{(isAdmin(me, item) || isOwner(me, item)) && \n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className={classes.itemsLeft}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcomponent={RouterLink}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tto={`/account/${item.id}/manage`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tManage\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className={classes.sep} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcomponent={RouterLink}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tto={`/account/${item.id}/edit`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tEdit details\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className={classes.sep} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcomponent={RouterLink}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tto={`/account/${item.id}/calendar`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tView Calendar\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\t\n\t\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t\t) \n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</List>\n\t\t\t\t\t}\n\n\t\t\t\t\t\n\t\t\t\t\t<Button \n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\tclassName={classes.containedBtn}\n\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\tdisableElevation\n\t\t\t\t\t\tonClick={handleClick('/add-account')}\n\t\t\t\t\t>\n\t\t\t\t\t\tAdd new organization\n\t\t\t\t\t\t\n\t\t\t\t\t</Button>\n\t\t\t\t\t\n\t\t\t\t</Container>\n\t\t\t\t\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default connect(mapStateToProps)(Dashboard)","import React, { useState, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { useHistory } from 'react-router-dom'\nimport { useMutation } from 'react-query'\nimport * as Yup from 'yup'\nimport { Formik, Form, FormikProps } from 'formik'\nimport {\n\tGrid,\n\tTextField,\n\tButton,\n\tmakeStyles,\n\tcreateStyles,\n} from '@material-ui/core'\n\nimport { \n\tsaveAccount, \n\tupdateAccount,\n\tdeleteAccount\n} from '../../services/queries'\n\nimport { \n\tsetAccounts, \n\taddAccount, \n\tremoveAccount,\n\tstartAction, \n\tsetSingleAccount,\n} from '../../store/actions/accounts'\n\nimport { AppState } from '../../store/types'\nimport { Account } from '../../types'\n\nimport { isOwner } from '../../utils/helpers'\n\nconst stylesInUse = makeStyles((theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tbackground: '#FFFFFF',\n\t\t\tposition: 'relative',\n\t\t\tjustifyContent: 'center',\n\t\t\talignItems: 'center',\n\n\t\t},\n\t\theader: {\n\t\t\tbackground: '#6A0572',\n\t\t\tjustifyContent: 'center',\n\t\t\talignItems: 'center',\n\t\t\tpaddingTop: '40px',\n\t\t\tpaddingBottom: '50px',\n\t\t\tcolor:'#ffffff'\n\t\t},\n\t\tcontent: {\n\n\t\t},\n\t\tintro: {\n\t\t\tcolor: '#ffffff',\n\t\t\ttextAlign: 'center',\n\t\t\tposition: 'relative',\n\t\t\tzIndex: 1,\n\t\t},\n\t\theading_1: {\n\t\t\tfontSize: '3rem',\n\t\t\tposition: 'relative',\n\t\t\tfontWeight: 'bold',\n\t\t\tletterSpacing: -1,\n\t\t\tmargin: '1rem 0 0.5rem 0',\n\t\t},\n\t\theading_2: {\n\t\t\tfontSize: '2rem',\n\t\t\tposition: 'relative',\n\t\t\tfontWeight: 'bold',\n\t\t\tletterSpacing: -1,\n\t\t\tmarginBottom: '1rem',\n\t\t},\n\t\tintroText: {\n\t\t\tfontSize: '1.2rem',\n\t\t\tmargin: '0.5rem auto 1rem',\n\t\t},\n\t\tnotice: {\n\t\t\tfontSize: '1em',\n\t\t\tmargin: '1rem 0 1.5rem',\n\t\t\tcolor:'#111'\n\t\t},\n\t\tcontainedBtn: {\n\t\t\tbackgroundColor: '#6A0572',\n\t\t\tpadding: '12px 20px',\n\t\t\tfontWeight: 'bold',\n\t\t\tcolor: '#ffffff',\n\t\t\tmargin: '0 0.5em',\n\t\t\twidth: 'auto',\n\t\t},\n\t\toutlinedBtn: {\n\t\t\tpadding: '12px 20px',\n\t\t\tfontWeight: 'bold',\n\t\t\tcolor: '#6A0572',\n\t\t\tmargin: '0 0.5em',\n\t\t\twidth: 'auto',\n\t\t\tborderColor: 'rgba(0,0,0,0.5)',\n\t\t\t'&:hover': {\n\t\t\t\tborderColor: '#6A0572',\n\t\t\t},\n\t\t},\n\t\tdeleteBtn: {\n\t\t\tpadding: '12px 20px',\n\t\t\tfontWeight: 'bold',\n\t\t\tcolor: 'red',\n\t\t\tmargin: '1em 0.5em',\n\t\t\twidth: 'auto',\n\t\t\tborderColor: 'rgba(0,0,0,0.5)',\n\t\t\t'&:hover': {\n\t\t\t\tborderColor: '#6A0572',\n\t\t\t},\n\t\t},\n\t\tdangerZone: {\n\t\t\tmargin: '4em 0',\n\t\t},\n\t\ttextField: {\n\t\t\tmargin: '5px 0 30px',\n\t\t\t'& > *': {\n\t\t\t\twidth: '100%',\n\t\t\t},\n\t\t},\n\t\tsubmitButton: {\n\t\t\tmarginTop: '0',\n\t\t},\n\t\ttitle: { textAlign: 'left' },\n\t\tsuccessMessage: { color: theme.palette.success.main },\n\t\terrorMessage: { color: theme.palette.error.main },\n\t})\n)\n\ninterface FormStatus {\n  type: string\n  message: string\n}\n\ninterface FormStatusProps {\n  [key: string]: FormStatus\n}\n\ninterface AccountFormFields {\n  name: string\n  siteUrl: string\n  description: string\n}\n\nconst formStatusProps: FormStatusProps = {\n\terror: {\n\t\tmessage: 'Something went wrong. Please try again.',\n\t\ttype: 'error',\n\t},\n\tsuccess: {\n\t\tmessage: 'Organisation details saved!',\n\t\ttype: 'success',\n\t},\n}\n\nconst mapStateToProps = (state: AppState) => ({\n\taccountdata: state.accountdata,\n\tme: state.userdata.user\n})\n  \ntype StateProps = ReturnType<typeof mapStateToProps>\n\ninterface DispatchProps { \n\taddAccount: (account:Account) => void, \n\tremoveAccount: (account:Account) => void, \n\tsetSingleAccount: (account:Account) => void,\n\tstartAction: () => void\n}\n\ninterface Props {\n\taccountToEdit: Account|undefined\n}\n\nconst EditAccount = ({ \n\taccountdata, \n\taccountToEdit, \n\tme,\n\taddAccount, \n\tremoveAccount,\n\tstartAction, \n\tsetSingleAccount \n}: StateProps & DispatchProps & Props):React.ReactElement => {\n\n\tconst history = useHistory()\n\n\tconst [formStatus, setFormStatus] = useState<FormStatus>({\n\t\tmessage: '',\n\t\ttype: '',\n\t})\n\tconst classes = stylesInUse()\n\tconst [showFormStatus, setShowFormStatus] = useState(false)\n\n\tconst AccountSchema = Yup.object().shape({\n\t\tname: Yup.string().required('Please enter the name of your organisation.'),\n\t\tsiteUrl: Yup.string(),\n\t\tdescription: Yup.string(),\n\t})\n    \n\tconst saveMutation = useMutation(saveAccount, { \n\t\tonError: () => {\n\t\t\tsetFormStatus(formStatusProps.error)\n\t\t\tsetShowFormStatus(true)\n\t\t},\n\t\tonSuccess: () => {\n\t\t\tsetFormStatus(formStatusProps.success)\n\t\t\tsetShowFormStatus(true)\n\t\t\tstartAction()\n\t\t}\n\t})\n\n\tconst updateMutation = useMutation(updateAccount, { \n\t\tonError: () => {\n\t\t\tsetFormStatus(formStatusProps.error)\n\t\t\tsetShowFormStatus(true)\n\t\t},\n\t\tonSuccess: () => {\n\t\t\tsetFormStatus(formStatusProps.success)\n\t\t\tsetShowFormStatus(true)\n\t\t\tstartAction()\n\t\t},\n\t})\n\n\tconst saveAccountData = async (accountData: AccountFormFields) => {\n\t\tif (accountToEdit) {\n\t\t\tupdateMutation.mutate({\n\t\t\t\tid: accountToEdit.id,\n\t\t\t\tname: accountData.name,\n\t\t\t\tsiteUrl: accountData.siteUrl,\n\t\t\t\tdescription: accountData.description,\n\t\t\t\tservices: accountToEdit.services,\n\t\t\t\tuser_roles: accountToEdit.user_roles\n\t\t\t})\n\t\t} else {\n\t\t\tsaveMutation.mutate({\n\t\t\t\tname: accountData.name,\n\t\t\t\tsiteUrl: accountData.siteUrl,\n\t\t\t\tdescription: accountData.description\n\t\t\t})\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\t\n\t\tconst newAccount = saveMutation.data?.data\n\t\n\t\tif (\n\t\t\tsaveMutation.isSuccess &&\n\t\t\t!saveMutation.isLoading && \n\t\t\tnewAccount && \n\t\t\taccountdata.updatingAccounts\n\t\t) {\n\t\t\taddAccount(newAccount)\n\t\t\thistory.goBack()\n\t\t}\n\n\t\tconst updatedAccount = updateMutation.data?.data\n\t\tif (\n\t\t\tupdateMutation.isSuccess &&\n\t\t\t!updateMutation.isLoading &&\n\t\t\tupdatedAccount &&\n\t\t\taccountdata.updatingAccounts\n\t\t) {\n\t\t\tsetSingleAccount(updatedAccount)\n\t\t\thistory.goBack()\n\t\t}\t\t\n\n\t}, [saveMutation, updateMutation, accountdata])\n\n\tconst deleteMutation = useMutation(deleteAccount)\n\n\tconst handleDelete = (account:Account) => {\n\t\tif (!account) {\n\t\t\treturn\n\t\t}\n\t\tdeleteMutation.mutate(account)\n\t\tremoveAccount(account)\n\t\thistory.push('/dashboard')\n\t\t\n\t}    \n\t\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<Formik\n\t\t\t\tinitialValues={{\n\t\t\t\t\tname: accountToEdit ? accountToEdit.name : '',\n\t\t\t\t\tsiteUrl: accountToEdit ? accountToEdit.siteUrl : '',\n\t\t\t\t\tdescription: accountToEdit ? accountToEdit.description : ''\n\t\t\t\t}}\n\t\t\t\tonSubmit={(values: AccountFormFields, actions) => {\n\t\t\t\t\tsaveAccountData(values)\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tactions.setSubmitting(false)\n\t\t\t\t\t}, 400)\n\t\t\t\t}}\n\t\t\t\tvalidationSchema={AccountSchema}\n\t\t\t>\n\t\t\t\t{(props: FormikProps<AccountFormFields>) => {\n\t\t\t\t\tconst {\n\t\t\t\t\t\thandleBlur,\n\t\t\t\t\t\thandleChange,\n\t\t\t\t\t\tvalues,\n\t\t\t\t\t\tisSubmitting,\n\t\t\t\t\t\ttouched,\n\t\t\t\t\t\terrors,\n\t\t\t\t\t} = props\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t<Form>\n\t\t\t\t\t\t\t<Grid container direction=\"row\">\n\t\t\t\t\t\t\t\t<Grid item className={classes.textField} xs={8}>\n\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\tid=\"name\"\n\t\t\t\t\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Organisation name\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tvalue={values.name}\n\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\t\tonBlur={handleBlur}\n\t\t\t\t\t\t\t\t\t\thelperText={\n\t\t\t\t\t\t\t\t\t\t\ttouched.name && errors.name\n\t\t\t\t\t\t\t\t\t\t\t\t? errors.name\n\t\t\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\terror={touched.name && errors.name ? true : false}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t\t\t<Grid item className={classes.textField} xs={8}>\n\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\tid=\"siteUrl\"\n\t\t\t\t\t\t\t\t\t\tname=\"siteUrl\"\n\t\t\t\t\t\t\t\t\t\ttype=\"siteUrl\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Website\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tvalue={values.siteUrl}\n\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\t\tonBlur={handleBlur}\n\t\t\t\t\t\t\t\t\t\thelperText={\n\t\t\t\t\t\t\t\t\t\t\ttouched.siteUrl && errors.siteUrl\n\t\t\t\t\t\t\t\t\t\t\t\t? errors.siteUrl\n\t\t\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\terror={touched.siteUrl && errors.siteUrl ? true : false}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t\t\t<Grid item className={classes.textField} xs={8}>\n\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\tid=\"description\"\n\t\t\t\t\t\t\t\t\t\tname=\"description\"\n\t\t\t\t\t\t\t\t\t\ttype=\"description\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Description\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tvalue={values.description}\n\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\t\tonBlur={handleBlur}\n\t\t\t\t\t\t\t\t\t\thelperText={\n\t\t\t\t\t\t\t\t\t\t\ttouched.description && errors.description\n\t\t\t\t\t\t\t\t\t\t\t\t? errors.description\n\t\t\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\terror={touched.description && errors.description ? true : false}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t\t\t<Grid item className={classes.submitButton} xs={6}>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\t\t\t\t\t\tclassName={classes.containedBtn}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{' '}\n                                        Save\n\t\t\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tclassName={classes.outlinedBtn}\n\t\t\t\t\t\t\t\t\t\tonClick={() => history.goBack()}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{' '}\n                            Cancel\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t{showFormStatus && (\n\t\t\t\t\t\t\t\t\t\t<div className=\"formStatus\">\n\t\t\t\t\t\t\t\t\t\t\t{formStatus.type === 'success' ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<p className={classes.successMessage}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{formStatus.message}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t) : formStatus.type === 'error' ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<p className={classes.errorMessage}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{formStatus.message}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Form>\n\t\t\t\t\t)\n\t\t\t\t}}\n\t\t\t\n\t\t\t</Formik>\n\t\t\t{accountToEdit && isOwner(me, accountToEdit) ?\n\t\t\t\t<div className={classes.dangerZone}>\n\t\t\t\t\t<h2>Danger Zone</h2>\n\t\t\t\t\t<p>Be careful here, deleting the organization will wipe out all data related to it.</p>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tclassName={classes.deleteBtn}\n\t\t\t\t\t\tonClick={() => handleDelete(accountToEdit)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{' '}\n\t\t\t\t\t\tDelete organization\n\t\t\t\t\t</Button>\n\t\t\t\t</div> : <></>}\n\n\t\t</div>\n\t)\n}\n\nexport default connect(mapStateToProps, {\n\tsetAccounts,\n\taddAccount,\n\tremoveAccount,\n\tstartAction,\n\tsetSingleAccount\n})(EditAccount)","import React from 'react'\nimport { connect } from 'react-redux'\nimport {\n\tuseParams\n} from 'react-router-dom'\nimport {\n\tContainer,\n\tmakeStyles,\n\tcreateStyles,\n} from '@material-ui/core'\n\nimport { AppState } from '../store/types'\n\nimport AccountForm from '../components/forms/EditAccount'\n\nimport NotAllowed from '../components/NotAllowed'\n\nimport { isAdmin, isOwner } from '../utils/helpers'\n\nconst stylesInUse = makeStyles(() =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tbackground: '#FFFFFF',\n\t\t\tposition: 'relative',\n\t\t\tjustifyContent: 'center',\n\t\t\talignItems: 'center',\n\n\t\t},\n\t\theader: {\n\t\t\tbackground: '#6A0572',\n\t\t\tjustifyContent: 'center',\n\t\t\talignItems: 'center',\n\t\t\tpaddingTop: '40px',\n\t\t\tpaddingBottom: '50px',\n\t\t\tcolor:'#ffffff'\n\t\t},\n\t\tcontent: {\n\n\t\t},\n\t\tintro: {\n\t\t\tcolor: '#ffffff',\n\t\t\ttextAlign: 'center',\n\t\t\tposition: 'relative',\n\t\t\tzIndex: 1,\n\t\t},\n\t\theading_1: {\n\t\t\tfontSize: '3rem',\n\t\t\tposition: 'relative',\n\t\t\tfontWeight: 'bold',\n\t\t\tletterSpacing: -1,\n\t\t\tmargin: '1rem 0 0.5rem 0',\n\t\t},\n\t\theading_2: {\n\t\t\tfontSize: '2rem',\n\t\t\tposition: 'relative',\n\t\t\tfontWeight: 'bold',\n\t\t\tletterSpacing: -1,\n\t\t\tmarginBottom: '1rem',\n\t\t},\n\t\tintroText: {\n\t\t\tfontSize: '1.2rem',\n\t\t\tmargin: '0.5rem auto 1rem',\n\t\t},\n\t\tnotice: {\n\t\t\tfontSize: '1em',\n\t\t\tmargin: '1rem 0 1.5rem',\n\t\t\tcolor:'#111'\n\t\t},\n\t})\n)\n\ninterface RouteParams {\n\tid: string|undefined\n}\n  \nconst mapStateToProps = (state: AppState) => ({\n\taccountdata: state.accountdata,\n\tme: state.userdata.user,\n\tupdateUser: state.userdata.updateUser\n})\n  \ntype Props = ReturnType<typeof mapStateToProps>\n\nconst EditAccount = ({ accountdata, me, updateUser }: Props):React.ReactElement => {\n\n\tconst { id } = useParams<RouteParams>()\n\n\tconst accountToEdit = id ? accountdata.accounts.find(acc => acc.id === parseInt(id)) : undefined\n\tconst title = id ? 'Edit organization' : 'Add new organization'\n\n\tconst classes = stylesInUse()\n\n\tif (\n\t\t!updateUser && !me && \n\t\t!(isAdmin(me, accountToEdit) || isOwner(me, accountToEdit))\n\t) {\n\t\treturn <NotAllowed />\n\t}\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<div className={classes.header}>\n\t\t\t\t<Container maxWidth=\"xl\">\n\t\t\t\t\t<h1 className={classes.heading_1}>{title}</h1>\n\t\t\t\t</Container>\n\t\t\t</div>\n\n\t\t\t<div className={classes.content}>\n\t\t\t\t<Container maxWidth=\"xl\">\n\t\t\t\t\t<h2 className={classes.heading_2}>General information</h2>\n\t\t\t\t\t<p className={classes.introText}>\n\t\t\t\t\t\tEdit the name, website url and free description of your organization.\n\t\t\t\t\t</p>\n\t\t\t\t\t\n\t\t\t\t\t<AccountForm accountToEdit={accountToEdit} />\n\t\t\t\t</Container>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default connect(mapStateToProps)(EditAccount)","import React, { useState, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { useMutation } from 'react-query'\nimport * as Yup from 'yup'\nimport { Formik, Form, Field, FormikProps } from 'formik'\nimport {\n\tGrid,\n\tTextField,\n\tButton,\n\tmakeStyles,\n\tcreateStyles,\n\tInputLabel\n} from '@material-ui/core'\n\nimport { addAccountUser } from '../../services/queries'\n\nimport { \n\tstartAction, \n\tsetSingleAccount,\n} from '../../store/actions/accounts'\n\nimport { AppState } from '../../store/types'\nimport { \n\tAccount, \n} from '../../types'\n\nconst stylesInUse = makeStyles((theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tbackground: '#FFFFFF',\n\t\t\tposition: 'relative',\n\t\t\tjustifyContent: 'center',\n\t\t\talignItems: 'center',\n\n\t\t},\n\t\theader: {\n\t\t\tbackground: '#6A0572',\n\t\t\tjustifyContent: 'center',\n\t\t\talignItems: 'center',\n\t\t\tpaddingTop: '40px',\n\t\t\tpaddingBottom: '50px',\n\t\t\tcolor:'#ffffff'\n\t\t},\n\t\tcontent: {\n\n\t\t},\n\t\tintro: {\n\t\t\tcolor: '#ffffff',\n\t\t\ttextAlign: 'center',\n\t\t\tposition: 'relative',\n\t\t\tzIndex: 1,\n\t\t},\n\t\theading_1: {\n\t\t\tfontSize: '3rem',\n\t\t\tposition: 'relative',\n\t\t\tfontWeight: 'bold',\n\t\t\tletterSpacing: -1,\n\t\t\tmargin: '1rem 0 0.5rem 0',\n\t\t},\n\t\theading_2: {\n\t\t\tfontSize: '2rem',\n\t\t\tposition: 'relative',\n\t\t\tfontWeight: 'bold',\n\t\t\tletterSpacing: -1,\n\t\t\tmarginBottom: '1rem',\n\t\t},\n\t\tintroText: {\n\t\t\tfontSize: '1.2rem',\n\t\t\tmargin: '0.5rem auto 1rem',\n\t\t},\n\t\tnotice: {\n\t\t\tfontSize: '1em',\n\t\t\tmargin: '1rem 0 1.5rem',\n\t\t\tcolor:'#111'\n\t\t},\n\t\tcontainedBtn: {\n\t\t\tbackgroundColor: '#6A0572',\n\t\t\tpadding: '12px 20px',\n\t\t\tfontWeight: 'bold',\n\t\t\tcolor: '#ffffff',\n\t\t\tmargin: '0 0.5em',\n\t\t\twidth: 'auto',\n\t\t},\n\t\toutlinedBtn: {\n\t\t\tpadding: '12px 20px',\n\t\t\tfontWeight: 'bold',\n\t\t\tcolor: '#6A0572',\n\t\t\tmargin: '0 0.5em',\n\t\t\twidth: 'auto',\n\t\t\tborderColor: 'rgba(0,0,0,0.5)',\n\t\t\t'&:hover': {\n\t\t\t\tborderColor: '#6A0572',\n\t\t\t},\n\t\t},\n\t\tdeleteBtn: {\n\t\t\tpadding: '12px 20px',\n\t\t\tfontWeight: 'bold',\n\t\t\tcolor: 'red',\n\t\t\tmargin: '1em 0.5em',\n\t\t\twidth: 'auto',\n\t\t\tborderColor: 'rgba(0,0,0,0.5)',\n\t\t\t'&:hover': {\n\t\t\t\tborderColor: '#6A0572',\n\t\t\t},\n\t\t},\n\t\tdangerZone: {\n\t\t\tmargin: '4em 0',\n\t\t},\n\t\ttextField: {\n\t\t\tmargin: '5px 0 30px',\n\t\t\t'& > *': {\n\t\t\t\twidth: '100%',\n\t\t\t},\n\t\t},\n\t\tselect: {\n\t\t\tmarginTop: '6px',\n\t\t\tpaddingTop: '12px',\n\t\t\tpaddingBottom: '12px'\n\t\t},\n\t\tsubmitButton: {\n\t\t\tmarginTop: '0',\n\t\t},\n\t\ttitle: { textAlign: 'left' },\n\t\tsuccessMessage: { color: theme.palette.success.main },\n\t\terrorMessage: { color: theme.palette.error.main },\n\t\tuserList: {\n\t\t\tmargin: '1em 0 2em',\n\t\t}, \n\t\tuserListItem: {\n\t\t\tpadding: '0.5em 0',\n\t\t\tcolor: '#444'\n\t\t}\n\t})\n)\n\ninterface FormStatus {\n  type: string\n  message: string\n}\n\ninterface FormStatusProps {\n  [key: string]: FormStatus\n}\n\ninterface AccountFormFields {\n  username: string\n  role: string\n}\n\nconst formStatusProps: FormStatusProps = {\n\terror: {\n\t\tmessage: 'Username not found. Please try again.',\n\t\ttype: 'error',\n\t},\n\tsuccess: {\n\t\tmessage: 'User added to account!',\n\t\ttype: 'success',\n\t},\n}\n\nconst mapStateToProps = (state: AppState) => ({\n\taccountdata: state.accountdata,\n\tuserdata: state.userdata\n})\n  \ntype StateProps = ReturnType<typeof mapStateToProps>\n\ninterface DispatchProps { \n\tsetSingleAccount: (account:Account) => void\n\tstartAction: () => void\n}\n\ninterface Props {\n\taccountToEdit: Account\n}\n\nconst EditAccountUsers = ({ \n\taccountdata, \n\taccountToEdit,\n\tstartAction, \n\tsetSingleAccount,\n}: StateProps & DispatchProps & Props):React.ReactElement => {\n\n\tconst [formStatus, setFormStatus] = useState<FormStatus>({\n\t\tmessage: '',\n\t\ttype: '',\n\t})\n\tconst classes = stylesInUse()\n\n\tconst [showFormStatus, setShowFormStatus] = useState(false)\n\n\tconst AccountSchema = Yup.object().shape({\n\t\tusername: Yup.string().required('Please enter a username.'),\n\t\trole: Yup.string().required('Please enter a role.'),\n\t})\n\n\tconst updateMutation = useMutation(addAccountUser, { \n\t\tonError: () => {\n\t\t\tsetFormStatus(formStatusProps.error)\n\t\t\tsetShowFormStatus(true)\n\t\t},\n\t\tonSuccess: () => {\n\t\t\tsetFormStatus(formStatusProps.success)\n\t\t\tsetShowFormStatus(true)\n\t\t\tstartAction()\n\t\t}\n\t})\n\n\tconst saveAccountData = async (accountData: AccountFormFields) => {\n\t\tif (accountToEdit) {\n\t\t\tupdateMutation.mutate({\n\t\t\t\taccount: accountToEdit,\n\t\t\t\tusername: accountData.username,\n\t\t\t\trole: accountData.role,\n\t\t\t})\n\t\t} \n\t}\n\n\tuseEffect(() => {\n\t\t\n\t\tconst updatedAccount = updateMutation.data?.data\n\t\tif (\n\t\t\tupdateMutation.isSuccess &&\n\t\t\t!updateMutation.isLoading &&\n\t\t\tupdatedAccount &&\n\t\t\taccountdata.updatingAccounts\n\t\t) {\n\t\t\tsetSingleAccount(updatedAccount)\n\t\t}\t\t\n\n\t}, [updateMutation, accountdata])\n\t\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<div className={classes.userList}>\n\t\t\t\t{accountToEdit.user_roles.map(item => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div key={item.id} className={classes.userListItem}><strong>{item.user.username}</strong> ({item.user.email}) - {item.role.role}</div>\n\t\t\t\t\t)\n\t\t\t\t})}\n\t\t\t</div>\n\t\t\t<Formik\n\t\t\t\tinitialValues={{\n\t\t\t\t\tusername: '',\n\t\t\t\t\trole: 'admin',\n\t\t\t\t}}\n\t\t\t\tonSubmit={(values: AccountFormFields, actions) => {\n\t\t\t\t\tsaveAccountData(values)\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tactions.setSubmitting(false)\n\t\t\t\t\t}, 400)\n\t\t\t\t}}\n\t\t\t\tvalidationSchema={AccountSchema}\n\t\t\t>\n\t\t\t\t{(props: FormikProps<AccountFormFields>) => {\n\t\t\t\t\tconst {\n\t\t\t\t\t\thandleBlur,\n\t\t\t\t\t\thandleChange,\n\t\t\t\t\t\tvalues,\n\t\t\t\t\t\tisSubmitting,\n\t\t\t\t\t\ttouched,\n\t\t\t\t\t\terrors,\n\t\t\t\t\t} = props\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t<Form>\n\t\t\t\t\t\t\t<Grid container direction=\"row\">\n\t\t\t\t\t\t\t\t<Grid item className={classes.textField} xs={8}>\n\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\tid=\"username\"\n\t\t\t\t\t\t\t\t\t\tname=\"username\"\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Username\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tvalue={values.username}\n\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\t\tonBlur={handleBlur}\n\t\t\t\t\t\t\t\t\t\thelperText={\n\t\t\t\t\t\t\t\t\t\t\ttouched.username && errors.username\n\t\t\t\t\t\t\t\t\t\t\t\t? errors.username\n\t\t\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\terror={touched.username && errors.username ? true : false}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t\t\t<Grid item className={classes.textField} xs={8}>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<InputLabel>Role</InputLabel>\n\t\t\t\t\t\t\t\t\t<Field as=\"select\" name=\"role\" onChange={handleChange} className={classes.select} value={values.role}>\n\t\t\t\t\t\t\t\t\t\t<option value=\"admin\">Admin (can edit services, account info and manage bookings)</option>\n\t\t\t\t\t\t\t\t\t\t<option value=\"user\">User (can use the booking calendar)</option>\n\t\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t</Grid>\n\n\n\t\t\t\t\t\t\t\t<Grid item className={classes.submitButton} xs={6}>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\t\t\t\t\t\tclassName={classes.containedBtn}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{' '}\n                                        Add user to account\n\t\t\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t\t\t{showFormStatus && (\n\t\t\t\t\t\t\t\t\t\t<div className=\"formStatus\">\n\t\t\t\t\t\t\t\t\t\t\t{formStatus.type === 'success' ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<p className={classes.successMessage}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{formStatus.message}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t) : formStatus.type === 'error' ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<p className={classes.errorMessage}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{formStatus.message}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Form>\n\t\t\t\t\t)\n\t\t\t\t}}\n\t\t\t\n\t\t\t</Formik>\n\t\t\t\n\t\t</div>\n\t)\n}\n\nexport default connect(mapStateToProps, {\n\tstartAction,\n\tsetSingleAccount,\n})(EditAccountUsers)","import React from 'react'\nimport { connect } from 'react-redux'\nimport {\n\tContainer,\n\tButton,\n\tcreateStyles,\n\tmakeStyles,\n\tGrid,\n} from '@material-ui/core'\n\nimport { ArrowLeft } from '@material-ui/icons'\nimport { \n\tuseParams, \n\tuseHistory,\n} from 'react-router-dom'\n\nimport { isOwner } from '../utils/helpers'\n\nimport { AppState } from '../store/types'\n\nimport EditAccountUsers from '../components/forms/EditAccountUsers'\nimport NotAllowed from '../components/NotAllowed'\n\nconst stylesInUse = makeStyles(() =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tbackground: '#FFFFFF',\n\t\t\tposition: 'relative',\n\t\t\tjustifyContent: 'center',\n\t\t\talignItems: 'center',\n\n\t\t},\n\t\theader: {\n\t\t\tbackground: '#6A0572',\n\t\t\tjustifyContent: 'center',\n\t\t\talignItems: 'center',\n\t\t\tpaddingTop: '40px',\n\t\t\tpaddingBottom: '50px',\n\t\t\tcolor:'#ffffff'\n\t\t},\n\t\tbanner: {\n\t\t\tbackground: '#eee',\n\t\t\tpadding: '0.5em',\n\t\t\tdisplay: 'flex',\n\t\t\talignItems: 'center'\n\t\t},\n\t\tbannerLeft: {\n\t\t\ttextAlign: 'left'\n\t\t},\n\t\tbannerRight: {\n\t\t\ttextAlign: 'right'\n\t\t},\n\t\tbannerText: {\n\t\t\tmarginRight: '1em',\n\t\t\tcolor: '#666'\n\t\t},\n\t\tcontent: {\n\t\t\tmarginTop: '1em'\n\t\t},\n\t\tcontentLeft: {\n\t\t\tborderRight: '1px solid #ddd',\n\t\t\tpaddingRight: '2em'\n\t\t},\n\t\tcontentRight: {\n\t\t\tpaddingLeft: '4em'\n\t\t},\n\t\tintro: {\n\t\t\tcolor: '#ffffff',\n\t\t\ttextAlign: 'center',\n\t\t\tposition: 'relative',\n\t\t\tzIndex: 1,\n\t\t},\n\t\theading_1: {\n\t\t\tfontSize: '3rem',\n\t\t\tposition: 'relative',\n\t\t\tfontWeight: 'bold',\n\t\t\tletterSpacing: -1,\n\t\t\tmargin: '1rem 0 0.5rem 0',\n\t\t},\n\t\theading_2: {\n\t\t\tfontSize: '1.6rem',\n\t\t\tposition: 'relative',\n\t\t\tfontWeight: 'bold',\n\t\t\tletterSpacing: -1,\n\t\t\tmarginBottom: '0.8rem',\n\t\t},\n\t\tintroText: {\n\t\t\tfontSize: '1.2rem',\n\t\t\tmargin: '0.5rem auto 1rem',\n\t\t},\n\t\tcontainedBtn: {\n\t\t\tpadding: '12px 20px',\n\t\t\tfontWeight: 'bold',\n\t\t\tmargin: 0,\n\t\t\twidth: 'auto',\n\t\t},\n\t\ttextBtn: {\n\t\t\tpadding: '12px 0',\n\t\t\tfontWeight: 'bold',\n\t\t\tmargin: 0,\n\t\t\twidth: 'auto',\n\t\t},\n\t\tsep: {\n\t\t\tpadding: '0 15px'\n\t\t},\n\t\tadminLink: {\n\t\t\ttextTransform: 'uppercase',\n\t\t\tfontSize: '14px',\n\t\t\tmarginBottom: '1em',\n\t\t\tdisplay: 'block',\n\t\t}\n\t})\n)\n\nconst mapStateToProps = (state: AppState) => ({\n\taccountdata: state.accountdata,\n\tme: state.userdata.user\n})\n\n\ninterface RouteParams {\n\taccountId: string|undefined\n}\n\ntype Props = ReturnType<typeof mapStateToProps>\n\nconst ManageAccountUsers = ({ accountdata, me }: Props):React.ReactElement => {\n\n\tconst classes = stylesInUse()\n\tconst history = useHistory()\t\n\n\tconst { accountId } = useParams<RouteParams>()\n\tconst account = accountId ? accountdata.accounts.find(acc => acc.id === parseInt(accountId)) : undefined\n\n\tif (!account || !me || !isOwner(me, account)) {\n\t\treturn <NotAllowed />\n\t}\n\n\tconst handleClick = (path: string) => {\n\t\treturn () => {\n\t\t\thistory.push(path)\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className={classes.root}>\n\n\t\t\t<div className={classes.header}>\n\t\t\t\t<Container maxWidth=\"xl\">\n\t\t\t\t\t<h1 className={classes.heading_1}>Edit {account?.name} users</h1>\n\t\t\t\t</Container>\n\t\t\t</div>\n\n\t\t\t<div className={classes.banner}>\n\t\t\t\t<Container maxWidth=\"xl\">\n\t\t\t\t\t<Grid container direction=\"row\">\n\t\t\t\t\t\t<Grid item xs={6} className={classes.bannerLeft}>\n\t\t\t\t\t\t\t<Button \n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\tclassName={classes.textBtn}\n\t\t\t\t\t\t\t\tvariant=\"text\"\n\t\t\t\t\t\t\t\tdisableElevation\n\t\t\t\t\t\t\t\tonClick={() => history.goBack()}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ArrowLeft></ArrowLeft> Manage org\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item xs={6} className={classes.bannerRight}>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\tclassName={classes.containedBtn}\n\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\tdisableElevation\n\t\t\t\t\t\t\t\tonClick={handleClick(`/account/${account?.id}/calendar`)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\tView calendar\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\n\t\t\t\t</Container>\n\t\t\t</div>\n\n\t\t\t<div className={classes.content}>\n\t\t\t\t<Container maxWidth=\"xl\">\n\t\t\t\t\t\n\t\t\t\t\t<Grid container direction=\"row\">\n\t\t\t\t\t\t<Grid item xs={12} className={classes.contentLeft}>\n\t\t\t\t\t\t\t<h2 className={classes.heading_2}>Users</h2>\n\t\t\t\t\t\t\t{account && <EditAccountUsers accountToEdit={account} />}\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Container>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default connect(mapStateToProps)(ManageAccountUsers)","import React from 'react'\nimport {\n\tcreateStyles,\n\tmakeStyles,\n\tList,\n\tListItem,\n\tListItemText,\n\tLink\n} from '@material-ui/core'\nimport { \n\tLink as RouterLink, \n} from 'react-router-dom'\n\nimport { Account } from '../types'\n\nconst stylesInUse = makeStyles(() =>\n\tcreateStyles({\n\t\theading_2: {\n\t\t\tfontSize: '2rem',\n\t\t\tposition: 'relative',\n\t\t\tfontWeight: 'bold',\n\t\t\tletterSpacing: -1,\n\t\t\tmarginBottom: '1rem',\n\t\t},\n\t\tintroText: {\n\t\t\tfontSize: '1.2rem',\n\t\t\tmargin: '0.5rem auto 1rem',\n\t\t},\n\t\tnotice: {\n\t\t\tfontSize: '1em',\n\t\t\tmargin: '1rem 0 1.5rem',\n\t\t\tcolor:'#111'\n\t\t},\n\t\tlistItem: {\n\t\t\tpaddingLeft: 0\n\t\t},\n\t\titemMeta: {\n\t\t\tmargin: '2px 0 5px'\n\t\t},\n\t\tlistTitle: {\n\t\t\tfontSize: '1.2em',\n\t\t\tfontWeight: 'bold',\n\t\t\tcolor:'#000'\n\t\t},\n\t})\n)\n\n\ntype Props = {\n    account: Account|undefined\n}\n\nconst ServiceList = ({ account }: Props):React.ReactElement => {\n\n\tconst classes = stylesInUse()\n\n\tif (!account || account.services.length === 0) {\n\t\treturn <p className={classes.notice}>{'You haven\\'t added any services yet. Add one to get started!'} </p>\n\t}\n\t\n\treturn (\n\t\t<List>\n\t\t\t{account && account.services.map(item => {\n\t\t\t\treturn (\n\t\t\t\t\t<ListItem key={item.id} className={classes.listItem}>\n\t\t\t\t\t\t<ListItemText\n\t\t\t\t\t\t\tclassName={classes.heading_2}\n\t\t\t\t\t\t\tprimary={\n\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\tclassName={classes.listTitle}\n\t\t\t\t\t\t\t\t\t\tcomponent={RouterLink}\n\t\t\t\t\t\t\t\t\t\tto={`/account/${account.id}/services/${item.id}/edit`}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{item.name}\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsecondary={\n\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<div className={classes.itemMeta}>\n\t\t\t\t\t\t\t\t\t\t\t<span>Hours: {item.startTime.substr(0, 5)} - {item.endTime.substr(0, 5)} | Timeslot: {item.timeSlotLen} min | Max bookings: {item.maxBookings} per slot</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\tcomponent={RouterLink}\n\t\t\t\t\t\t\t\t\t\t\tto={`/account/${account.id}/services/${item.id}/edit`}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tEdit\n\t\t\t\t\t\t\t\t\t\t</Link>\t\n\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ListItem>\n\t\t\t\t) \n\t\t\t})}\n\t\t</List>\n\t)\n}\n\nexport default ServiceList","import { Booking } from '../../types'\nimport { \n\tBookingActionTypes,\n} from '../types'\nimport '../reducers/bookings'\n\nexport function startAction():BookingActionTypes {\n\treturn {\n\t\ttype: '@prefix/START_BOOKING_ACTION'\n\t}\n}\n\nexport function addBooking(booking:Booking):BookingActionTypes {\n\treturn {\n\t\ttype: '@prefix/ADD_BOOKING',\n\t\tpayload: booking\n\t}\n}\n\nexport function removeBooking(booking:Booking):BookingActionTypes {\n\treturn {\n\t\ttype: '@prefix/REMOVE_BOOKING',\n\t\tpayload: booking\n\t}\n}\n\nexport const setBookings = (bookings:Booking[]):BookingActionTypes =>  {\n\treturn {\n\t\ttype: '@prefix/SET_BOOKINGS',\n\t\tpayload: bookings\n\t}\n}\n\nexport const updateBookings = (bookings:Booking[]):BookingActionTypes =>  {\n\treturn {\n\t\ttype: '@prefix/UPDATE_BOOKINGS',\n\t\tpayload: bookings\n\t}\n}\n\nexport const resetBookings = ():BookingActionTypes =>  {\n\treturn {\n\t\ttype: '@prefix/RESET_BOOKINGS',\n\t}\n}\n\nexport function setSelectedDate(date:Date):BookingActionTypes {\n\treturn {\n\t\ttype: '@prefix/SET_SELECTED_DATE',\n\t\tpayload: date\n\t}\n}\n\nexport function setFormVisibility():BookingActionTypes {\n\treturn {\n\t\ttype: '@prefix/SET_FORM_VISIBILITY',\n\t}\n}\n\n\n","import React from 'react'\nimport { CircularProgress } from '@material-ui/core'\n\nimport {\n\tcreateStyles,\n\tmakeStyles,\n} from '@material-ui/core'\n\nconst stylesInUse = makeStyles(() =>\n\tcreateStyles({\n\t\troot: {\n\t\t\twidth: '100%',\n\t\t\theight: 'calc(100vh - 66px)',\n\t\t\talignItems: 'center',\n\t\t\tjustifyItems: 'center',\n\t\t\tjustifyContent: 'center',\n\t\t\t'& > * + *': {\n\t\t\t\tmarginTop: '5em',\n\t\t\t},\n\t\t\tbackground: '#fff',\n\t\t\tborderTop: '1px solid #eee',\n\t\t\tposition: 'absolute',\n\t\t\ttop: '64px',\n\t\t\tleft: 0,\n\t\t\tdisplay: 'flex',\n\t\t\tzIndex: 10\n\t\t},\n\t})\n)\n\nconst Loader = ():React.ReactElement => {\n\n\tconst classes = stylesInUse()\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<CircularProgress color=\"secondary\" />\n\t\t</div>\n\t)\n}\n\nexport default Loader","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { useQuery, useMutation } from 'react-query'\nimport {\n\tcreateStyles,\n\tmakeStyles,\n\tList,\n\tListItem,\n\tListItemText,\n\tButton\n} from '@material-ui/core'\n\nimport { \n\tgetBookingsByAccountId,\n\tdeleteBooking,\n} from '../services/queries'\n\nimport { updateBookings, removeBooking } from '../store/actions/bookings'\n\nimport { AppState } from '../store/types'\nimport { Booking, Account } from '../types'\n\nimport Loader from '../components/Loader'\n\nconst stylesInUse = makeStyles(() =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tbackground: '#FFFFFF',\n\t\t\tposition: 'relative',\n\t\t\tjustifyContent: 'center',\n\t\t\talignItems: 'center',\n\n\t\t},\n\t\theader: {\n\t\t\tbackground: '#6A0572',\n\t\t\tjustifyContent: 'center',\n\t\t\talignItems: 'center',\n\t\t\tpaddingTop: '40px',\n\t\t\tpaddingBottom: '50px',\n\t\t\tcolor:'#ffffff'\n\t\t},\n\t\tcontent: {\n\n\t\t},\n\t\tintro: {\n\t\t\tcolor: '#ffffff',\n\t\t\ttextAlign: 'center',\n\t\t\tposition: 'relative',\n\t\t\tzIndex: 1,\n\t\t},\n\t\theading_1: {\n\t\t\tfontSize: '3rem',\n\t\t\tposition: 'relative',\n\t\t\tfontWeight: 'bold',\n\t\t\tletterSpacing: -1,\n\t\t\tmargin: '1rem 0 0.5rem 0',\n\t\t},\n\t\theading_2: {\n\t\t\tfontSize: '2rem',\n\t\t\tposition: 'relative',\n\t\t\tfontWeight: 'bold',\n\t\t\tletterSpacing: -1,\n\t\t\tmarginBottom: '1rem',\n\t\t},\n\t\tintroText: {\n\t\t\tfontSize: '1.2rem',\n\t\t\tmargin: '0.5rem auto 1rem',\n\t\t},\n\t\tlistItem: {\n\t\t\tpaddingLeft: 0\n\t\t},\n\t\tlistTitle: {\n\t\t\tfontSize: '1.1em',\n\t\t\tfontWeight: 'bold',\n\t\t\tcolor:'#000'\n\t\t},\n\t\tcontainedBtn: {\n\t\t\tbackgroundColor: '#6A0572',\n\t\t\tpadding: '12px 20px',\n\t\t\tfontWeight: 'bold',\n\t\t\tcolor: '#ffffff',\n\t\t\tmargin: '0 0.5em',\n\t\t\twidth: 'auto',\n\t\t},\n\t\ttextBtn: {\n\t\t\tpadding: 0,\n\t\t\tfontWeight: 'normal',\n\t\t\tmargin: '0 0 0 2px',\n\t\t\twidth: 'auto',\n\t\t\ttextTransform: 'none'\n\t\t},\n\t\tnotice: {\n\t\t\tfontSize: '1em',\n\t\t\tmargin: '1rem 0 1.5rem',\n\t\t\tcolor:'#111'\n\t\t},\n\t})\n)\n\nconst mapStateToProps = (state: AppState) => ({\n\tbookingData: state.bookingData,\n})\n  \ntype StateProps = ReturnType<typeof mapStateToProps>\n\ntype Props = {\n    account: Account|undefined\n\titemCount: number\n}\n\ninterface DispatchProps { \n\tupdateBookings: (bookings: Booking[]) => void\n\tremoveBooking: (booking: Booking) => void\n}\n\nconst Services = ({ \n\taccount, \n\tbookingData,\n\titemCount,\n\tupdateBookings,\n\tremoveBooking \n}: Props & StateProps & DispatchProps):React.ReactElement => {\n\n\tconst classes = stylesInUse()\n\n\tif (!account) {\n\t\treturn <></>\n\t}\n\n\tconst queryAccountBookings = useQuery(['getBookingsByAccountId', account], () => getBookingsByAccountId({ accountId: account.id.toString(), limit: 40 }), { \n\t\tenabled: !!account \n\t})\n\n\tconst deleteMutation = useMutation(deleteBooking)\n\n\tconst handleDelete = (booking:Booking) => {\n\t\tdeleteMutation.mutate(booking)\n\t}\n\n\tuseEffect(() => {\n\t\tif (\n\t\t\tqueryAccountBookings.isSuccess && \n            queryAccountBookings.data.data\n\t\t) {\n\t\t\tupdateBookings(queryAccountBookings.data.data)\n\t\t}\n\n\t\tif (\n\t\t\tdeleteMutation.isSuccess &&\n\t\t\tdeleteMutation.data?.data\n\t\t) {\n\t\t\tremoveBooking(deleteMutation.data.data)\n\t\t}\n\n\t}, [queryAccountBookings, deleteMutation])\n\n\tif (queryAccountBookings.isFetching || queryAccountBookings.isLoading) {\n\t\treturn <Loader />\n\t}\n\n\tconst accountBookings = itemCount > 0 \n\t\t? bookingData.bookings.filter(item => item.service?.account_id === account.id).slice(0, itemCount)\n\t\t: bookingData.bookings.filter(item => item.service?.account_id === account.id)\n\n\tif (accountBookings.length === 0) {\n\t\treturn <p className={classes.notice}>{'There are not bookings yet.'} </p>\n\t}\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<List>\n\t\t\t\t{accountBookings.map(booking => {\n\t\t\t\t\tconst dateStr = new Date(booking.dateTime).toString()\n\t\t\t\t\tconst date = dateStr.split(' GMT')[0]\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<ListItem key={booking.id} className={classes.listItem}>\n\t\t\t\t\t\t\t<ListItemText\n\t\t\t\t\t\t\t\tclassName={classes.heading_2}\n\t\t\t\t\t\t\t\tprimary={\n\t\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t\t<div className={classes.listTitle}>\n\t\t\t\t\t\t\t\t\t\t\t{`${booking.service?.name} - ${date.substr(0, date.length-3)}`}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tsecondary={\n\t\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t{`User: ${booking.email}`}\n\t\t\t\t\t\t\t\t\t\t\t<Button \n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.textBtn}\n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"text\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisableElevation\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleDelete(booking)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t)\n\t\t\t\t})}\n\t\t\t</List>\n\t\t</div>\n\t)\n}\n\nexport default connect(mapStateToProps, {\n\tupdateBookings,\n\tremoveBooking\n})(Services)","import React from 'react'\nimport { connect } from 'react-redux'\nimport {\n\tContainer,\n\tButton,\n\tcreateStyles,\n\tmakeStyles,\n\tGrid,\n\tLink\n} from '@material-ui/core'\n\nimport { ArrowLeft } from '@material-ui/icons'\nimport { \n\tuseParams, \n\tuseHistory,\n\tLink as RouterLink\n} from 'react-router-dom'\n\nimport { AppState } from '../store/types'\n\nimport ServiceList from '../components/ServiceList'\nimport BookingList from '../components/BookingList'\nimport NotAllowed from '../components/NotAllowed'\n\nimport { isAdmin, isOwner } from '../utils/helpers'\n\nconst stylesInUse = makeStyles(() =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tbackground: '#FFFFFF',\n\t\t\tposition: 'relative',\n\t\t\tjustifyContent: 'center',\n\t\t\talignItems: 'center',\n\n\t\t},\n\t\theader: {\n\t\t\tbackground: '#6A0572',\n\t\t\tjustifyContent: 'center',\n\t\t\talignItems: 'center',\n\t\t\tpaddingTop: '40px',\n\t\t\tpaddingBottom: '50px',\n\t\t\tcolor:'#ffffff'\n\t\t},\n\t\tbanner: {\n\t\t\tbackground: '#eee',\n\t\t\tpadding: '0.5em',\n\t\t\tdisplay: 'flex',\n\t\t\talignItems: 'center'\n\t\t},\n\t\tbannerLeft: {\n\t\t\ttextAlign: 'left'\n\t\t},\n\t\tbannerRight: {\n\t\t\ttextAlign: 'right'\n\t\t},\n\t\tbannerText: {\n\t\t\tmarginRight: '1em',\n\t\t\tcolor: '#666'\n\t\t},\n\t\tcontent: {\n\t\t\tmarginTop: '1em'\n\t\t},\n\t\tcontentLeft: {\n\t\t\tborderRight: '1px solid #ddd',\n\t\t\tpaddingRight: '2em'\n\t\t},\n\t\tcontentRight: {\n\t\t\tpaddingLeft: '4em'\n\t\t},\n\t\tintro: {\n\t\t\tcolor: '#ffffff',\n\t\t\ttextAlign: 'center',\n\t\t\tposition: 'relative',\n\t\t\tzIndex: 1,\n\t\t},\n\t\theading_1: {\n\t\t\tfontSize: '3rem',\n\t\t\tposition: 'relative',\n\t\t\tfontWeight: 'bold',\n\t\t\tletterSpacing: -1,\n\t\t\tmargin: '1rem 0 0.5rem 0',\n\t\t},\n\t\theading_2: {\n\t\t\tfontSize: '1.6rem',\n\t\t\tposition: 'relative',\n\t\t\tfontWeight: 'bold',\n\t\t\tletterSpacing: -1,\n\t\t\tmarginBottom: '0.8rem',\n\t\t},\n\t\tintroText: {\n\t\t\tfontSize: '1.2rem',\n\t\t\tmargin: '0.5rem auto 1rem',\n\t\t},\n\t\tcontainedBtn: {\n\t\t\tpadding: '12px 20px',\n\t\t\tfontWeight: 'bold',\n\t\t\tmargin: 0,\n\t\t\twidth: 'auto',\n\t\t},\n\t\ttextBtn: {\n\t\t\tpadding: '12px 0',\n\t\t\tfontWeight: 'bold',\n\t\t\tmargin: 0,\n\t\t\twidth: 'auto',\n\t\t},\n\t\tsep: {\n\t\t\tpadding: '0 15px'\n\t\t},\n\t\tadminLink: {\n\t\t\ttextTransform: 'uppercase',\n\t\t\tfontSize: '14px',\n\t\t\tmarginBottom: '1em',\n\t\t\tdisplay: 'block',\n\t\t}\n\t})\n)\n\nconst mapStateToProps = (state: AppState) => ({\n\taccountdata: state.accountdata,\n\tme: state.userdata.user\n})\n  \ninterface RouteParams {\n\taccountId: string|undefined\n}\n\ntype Props = ReturnType<typeof mapStateToProps>\n\nconst ManageAccount = ({ accountdata, me }: Props):React.ReactElement => {\n\n\tconst classes = stylesInUse()\n\tconst history = useHistory()\t\n\n\tconst { accountId } = useParams<RouteParams>()\n\tconst account = accountId ? accountdata.accounts.find(acc => acc.id === parseInt(accountId)) : undefined\n\n\tif (!account || !me || !(isAdmin(me, account) || isOwner(me, account))) {\n\t\treturn <NotAllowed />\n\t}\n\n\tconst handleClick = (path: string) => {\n\t\treturn () => {\n\t\t\thistory.push(path)\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className={classes.root}>\n\n\t\t\t<div className={classes.header}>\n\t\t\t\t<Container maxWidth=\"xl\">\n\t\t\t\t\t<h1 className={classes.heading_1}>Manage {account?.name}</h1>\n\t\t\t\t\t<p className={classes.introText}>\n\t\t\t\t\t\tManage services and bookings.\n\t\t\t\t\t</p>\n\t\t\t\t</Container>\n\t\t\t</div>\n\n\t\t\t\n\t\t\t<div className={classes.banner}>\n\t\t\t\t<Container maxWidth=\"xl\">\n\t\t\t\t\t<Grid container direction=\"row\">\n\t\t\t\t\t\t<Grid item xs={6} className={classes.bannerLeft}>\n\t\t\t\t\t\t\t<Button \n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\tclassName={classes.textBtn}\n\t\t\t\t\t\t\t\tvariant=\"text\"\n\t\t\t\t\t\t\t\tdisableElevation\n\t\t\t\t\t\t\t\tonClick={handleClick('/dashboard')}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ArrowLeft></ArrowLeft> Dashboard\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item xs={6} className={classes.bannerRight}>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\tclassName={classes.textBtn}\n\t\t\t\t\t\t\t\tvariant=\"text\"\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\tdisableElevation\n\t\t\t\t\t\t\t\tonClick={handleClick(`/account/${account?.id}/edit`)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\tEdit organization\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<span className={classes.sep}></span>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t{isOwner(me, account) && \n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tclassName={classes.textBtn}\n\t\t\t\t\t\t\t\t\tvariant=\"text\"\n\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\tdisableElevation\n\t\t\t\t\t\t\t\t\tonClick={handleClick(`/account/${account?.id}/users`)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tEdit users\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t<span className={classes.sep}></span>\t\n\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\tclassName={classes.containedBtn}\n\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\tdisableElevation\n\t\t\t\t\t\t\t\tonClick={handleClick(`/account/${account?.id}/calendar`)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\tView calendar\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\n\t\t\t\t</Container>\n\t\t\t</div>\n\n\t\t\t<div className={classes.content}>\n\t\t\t\t<Container maxWidth=\"xl\">\n\t\t\t\t\t\n\t\t\t\t\t<Grid container direction=\"row\">\n\t\t\t\t\t\t<Grid item xs={4} className={classes.contentLeft}>\n\t\t\t\t\t\t\t<h2 className={classes.heading_2}>Services</h2>\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\tcomponent={RouterLink}\n\t\t\t\t\t\t\t\tto={`/account/${account.id}/services/add`}\n\t\t\t\t\t\t\t\tclassName={classes.adminLink}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tAdd new service\n\t\t\t\t\t\t\t</Link>\t\n\t\t\t\t\t\t\t<ServiceList account={account} />\n\t\t\t\t\t\t\t<Button \n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\tclassName={classes.containedBtn}\n\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\tdisableElevation\n\t\t\t\t\t\t\t\tonClick={handleClick(`/account/${account.id}/services/add`)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\tAdd new service\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item xs={6} className={classes.contentRight}>\n\t\t\t\t\t\t\t<h2 className={classes.heading_2}>Recent bookings</h2>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\tcomponent={RouterLink}\n\t\t\t\t\t\t\t\tto={`/account/${account?.id}/bookings`}\n\t\t\t\t\t\t\t\tclassName={classes.adminLink}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\tView all\n\t\t\t\t\t\t\t</Link>\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t{accountId ? <BookingList account={account} itemCount={4} /> : <></> }\n\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t<Button \n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\tclassName={classes.containedBtn}\n\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\tdisableElevation\n\t\t\t\t\t\t\t\tonClick={handleClick(`/account/${account?.id}/bookings`)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\tView all\n\t\t\t\t\t\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\n\t\t\t\t</Container>\n\t\t\t\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default connect(mapStateToProps)(ManageAccount)","import React from 'react'\nimport { connect } from 'react-redux'\nimport {\n\tContainer,\n\tButton,\n\tcreateStyles,\n\tmakeStyles,\n\tGrid,\n} from '@material-ui/core'\n\nimport { ArrowLeft } from '@material-ui/icons'\nimport { \n\tuseParams, \n\tuseHistory,\n} from 'react-router-dom'\n\nimport { isOwner, isAdmin } from '../utils/helpers'\n\nimport { AppState } from '../store/types'\n\nimport BookingList from '../components/BookingList'\nimport NotAllowed from '../components/NotAllowed'\n\nconst stylesInUse = makeStyles(() =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tbackground: '#FFFFFF',\n\t\t\tposition: 'relative',\n\t\t\tjustifyContent: 'center',\n\t\t\talignItems: 'center',\n\n\t\t},\n\t\theader: {\n\t\t\tbackground: '#6A0572',\n\t\t\tjustifyContent: 'center',\n\t\t\talignItems: 'center',\n\t\t\tpaddingTop: '40px',\n\t\t\tpaddingBottom: '50px',\n\t\t\tcolor:'#ffffff'\n\t\t},\n\t\tbanner: {\n\t\t\tbackground: '#eee',\n\t\t\tpadding: '0.5em',\n\t\t},\n\t\tbannerLeft: {\n\t\t\ttextAlign: 'left'\n\t\t},\n\t\tbannerRight: {\n\t\t\ttextAlign: 'right'\n\t\t},\n\t\tbannerText: {\n\t\t\tmarginRight: '1em',\n\t\t\tcolor: '#666'\n\t\t},\n\t\tcontent: {\n\t\t\tmarginTop: '1em'\n\t\t},\n\t\tcontentLeft: {\n\t\t\tborderRight: '1px solid #ddd',\n\t\t\tpaddingRight: '2em'\n\t\t},\n\t\tcontentRight: {\n\t\t\tpaddingLeft: '4em'\n\t\t},\n\t\tintro: {\n\t\t\tcolor: '#ffffff',\n\t\t\ttextAlign: 'center',\n\t\t\tposition: 'relative',\n\t\t\tzIndex: 1,\n\t\t},\n\t\theading_1: {\n\t\t\tfontSize: '3rem',\n\t\t\tposition: 'relative',\n\t\t\tfontWeight: 'bold',\n\t\t\tletterSpacing: -1,\n\t\t\tmargin: '1rem 0 0.5rem 0',\n\t\t},\n\t\theading_2: {\n\t\t\tfontSize: '1.6rem',\n\t\t\tposition: 'relative',\n\t\t\tfontWeight: 'bold',\n\t\t\tletterSpacing: -1,\n\t\t\tmarginBottom: '0.8rem',\n\t\t},\n\t\tintroText: {\n\t\t\tfontSize: '1.2rem',\n\t\t\tmargin: '0.5rem auto 1rem',\n\t\t},\n\t\tcontainedBtn: {\n\t\t\tpadding: '12px 20px',\n\t\t\tfontWeight: 'bold',\n\t\t\tmargin: 0,\n\t\t\twidth: 'auto',\n\t\t},\n\t\ttextBtn: {\n\t\t\tpadding: '12px 0',\n\t\t\tfontWeight: 'bold',\n\t\t\tmargin: 0,\n\t\t\twidth: 'auto',\n\t\t},\n\t\tsep: {\n\t\t\tpadding: '0 5px'\n\t\t},\n\t\tadminLink: {\n\t\t\ttextTransform: 'uppercase',\n\t\t\tfontSize: '14px',\n\t\t\tmarginBottom: '1em',\n\t\t\tdisplay: 'block',\n\t\t}\n\t})\n)\n\nconst mapStateToProps = (state: AppState) => ({\n\taccountdata: state.accountdata,\n\tme: state.userdata.user,\n\tupdateUser: state.userdata.updateUser\n})\n  \ninterface RouteParams {\n\taccountId: string|undefined\n}\n\ntype Props = ReturnType<typeof mapStateToProps>\n\nconst ManageBookings = ({ accountdata, me, updateUser }: Props):React.ReactElement => {\n\n\tconst classes = stylesInUse()\n\tconst history = useHistory()\t\n\n\tconst { accountId } = useParams<RouteParams>()\n\tconst account = accountId ? accountdata.accounts.find(acc => acc.id === parseInt(accountId)) : undefined\n\n\tif (\n\t\t!updateUser && !me && \n\t\t!(isAdmin(me, account) || isOwner(me, account))\n\t) {\n\t\treturn <NotAllowed />\n\t}\n\n\tconst handleClick = (path: string) => {\n\t\treturn () => {\n\t\t\thistory.push(path)\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className={classes.root}>\n\n\t\t\t<div className={classes.header}>\n\t\t\t\t<Container maxWidth=\"xl\">\n\t\t\t\t\t<h1 className={classes.heading_1}>{account?.name} bookings</h1>\n\t\t\t\t</Container>\n\t\t\t</div>\n\n\t\t\t<div className={classes.banner}>\n\t\t\t\t<Container maxWidth=\"xl\">\n\t\t\t\t\t<Grid container direction=\"row\">\n\t\t\t\t\t\t<Grid item xs={6} className={classes.bannerLeft}>\n\t\t\t\t\t\t\t<Button \n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\tclassName={classes.textBtn}\n\t\t\t\t\t\t\t\tvariant=\"text\"\n\t\t\t\t\t\t\t\tdisableElevation\n\t\t\t\t\t\t\t\tonClick={handleClick(`/account/${account?.id}/manage`)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ArrowLeft></ArrowLeft> Back to account\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item xs={6} className={classes.bannerRight}>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\tclassName={classes.containedBtn}\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\tdisableElevation\n\t\t\t\t\t\t\t\tonClick={handleClick(`/account/${account?.id}/edit`)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\tEdit organization\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<span className={classes.sep}></span>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\tclassName={classes.containedBtn}\n\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\tdisableElevation\n\t\t\t\t\t\t\t\tonClick={handleClick(`/account/${account?.id}/calendar`)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\tView calendar\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\n\t\t\t\t</Container>\n\t\t\t</div>\n\n\t\t\t<div className={classes.content}>\n\t\t\t\t<Container maxWidth=\"xl\">\n\t\t\t\t\t\n\t\t\t\t\t<Grid container direction=\"row\">\n\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t<h2 className={classes.heading_2}>All bookings</h2>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t{accountId ? <BookingList account={account} itemCount={-1} /> : <></> }\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\n\t\t\t\t</Container>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default connect(mapStateToProps)(ManageBookings)","import React, { useState, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { useHistory, Redirect } from 'react-router-dom'\nimport { useMutation } from 'react-query'\nimport * as Yup from 'yup'\nimport { Formik, Form, FormikProps, Field } from 'formik'\nimport {\n\tGrid,\n\tTextField,\n\tButton,\n\tmakeStyles,\n\tcreateStyles,\n} from '@material-ui/core'\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers'\n\nimport { TimePicker } from 'formik-material-ui-pickers'\n\nimport DateFnsUtils from '@date-io/date-fns'\n\nimport { \n\tsaveService, \n\tupdateService, \n\tdeleteService, \n} from '../../services/queries'\n\nimport { startAction, setSingleAccount } from '../../store/actions/accounts'\nimport { removeBooking, resetBookings } from '../../store/actions/bookings'\n\nimport { AppState } from '../../store/types'\nimport { Service, Account, Booking } from '../../types'\n\n\nconst stylesInUse = makeStyles((theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tbackground: '#FFFFFF',\n\t\t\tposition: 'relative',\n\t\t\tjustifyContent: 'center',\n\t\t\talignItems: 'center',\n\n\t\t},\n\t\theader: {\n\t\t\tbackground: '#6A0572',\n\t\t\tjustifyContent: 'center',\n\t\t\talignItems: 'center',\n\t\t\tpaddingTop: '40px',\n\t\t\tpaddingBottom: '50px',\n\t\t\tcolor:'#ffffff'\n\t\t},\n\t\tcontent: {\n\n\t\t},\n\t\tintro: {\n\t\t\tcolor: '#ffffff',\n\t\t\ttextAlign: 'center',\n\t\t\tposition: 'relative',\n\t\t\tzIndex: 1,\n\t\t},\n\t\theading_1: {\n\t\t\tfontSize: '3rem',\n\t\t\tposition: 'relative',\n\t\t\tfontWeight: 'bold',\n\t\t\tletterSpacing: -1,\n\t\t\tmargin: '1rem 0 0.5rem 0',\n\t\t},\n\t\theading_2: {\n\t\t\tfontSize: '2rem',\n\t\t\tposition: 'relative',\n\t\t\tfontWeight: 'bold',\n\t\t\tletterSpacing: -1,\n\t\t\tmarginBottom: '1rem',\n\t\t},\n\t\tintroText: {\n\t\t\tfontSize: '1.2rem',\n\t\t\tmargin: '0.5rem auto 1rem',\n\t\t},\n\t\tnotice: {\n\t\t\tfontSize: '1em',\n\t\t\tmargin: '1rem 0 1.5rem',\n\t\t\tcolor:'#111'\n\t\t},\n\t\tcontainedBtn: {\n\t\t\tbackgroundColor: '#6A0572',\n\t\t\tpadding: '12px 20px',\n\t\t\tfontWeight: 'bold',\n\t\t\tcolor: '#ffffff',\n\t\t\tmargin: '0 0.5em',\n\t\t\twidth: 'auto',\n\t\t},\n\t\toutlinedBtn: {\n\t\t\tpadding: '12px 20px',\n\t\t\tfontWeight: 'bold',\n\t\t\tcolor: '#6A0572',\n\t\t\tmargin: '0 0.5em',\n\t\t\twidth: 'auto',\n\t\t\tborderColor: 'rgba(0,0,0,0.5)',\n\t\t\t'&:hover': {\n\t\t\t\tborderColor: '#6A0572',\n\t\t\t},\n\t\t},\n\t\tdeleteBtn: {\n\t\t\tpadding: '12px 20px',\n\t\t\tfontWeight: 'bold',\n\t\t\tcolor: 'red',\n\t\t\tmargin: '1em 0.5em',\n\t\t\twidth: 'auto',\n\t\t\tborderColor: 'rgba(0,0,0,0.5)',\n\t\t\t'&:hover': {\n\t\t\t\tborderColor: '#6A0572',\n\t\t\t},\n\t\t},\n\t\tdangerZone: {\n\t\t\tmargin: '4em 0',\n\t\t},\n\t\tformColumn: {\n\t\t\t\n\t\t},\n\t\ttextField: {\n\t\t\tmargin: '5px 0 30px',\n\t\t\t'& > *': {\n\t\t\t\twidth: '100%',\n\t\t\t},\n\t\t},\n\t\ttextAreaField: {\n\t\t\theight: '100px',\n\t\t\twidth: '97%',\n\t\t\tlineHeight: '22px',\n\t\t\tdisplay: 'block',\n\t\t\tmargin: '5px 0 40px',\n\t\t\tpadding: '15px',\n\t\t\tfontFamily: 'Roboto, Helvetica, Arial, sans-serif'\n\t\t},\n\t\tdateField: {\n\t\t\tmargin: '5px 0 20px',\n\t\t},\n\t\tsubmitButton: {\n\t\t\tmarginTop: '0',\n\t\t},\n\t\ttitle: { textAlign: 'left' },\n\t\tsuccessMessage: { color: theme.palette.success.main },\n\t\terrorMessage: { color: theme.palette.error.main },\n\t})\n)\n\ninterface FormStatus {\n  type: string\n  message: string\n}\n\ninterface FormStatusProps {\n  [key: string]: FormStatus\n}\n\ninterface SpaceFormFields {\n    name: string\n    description: string\n    maxBookings: number\n    startTime: Date\n    endTime: Date\n    timeSlotLen: number\n}\n\nconst formStatusProps: FormStatusProps = {\n\terror: {\n\t\tmessage: 'Something went wrong. Please try again.',\n\t\ttype: 'error',\n\t},\n\tsuccess: {\n\t\tmessage: 'Space details saved!',\n\t\ttype: 'success',\n\t},\n}\n\nconst mapStateToProps = (state: AppState) => ({\n\taccountdata: state.accountdata,\n\tbookingData: state.bookingData,\n})\n  \ntype StateProps = ReturnType<typeof mapStateToProps>\n\ninterface DispatchProps { \n\tsetSingleAccount: (account:Account) => void\n\tstartAction: () => void\n\tremoveBooking: (data:Booking) => void\n\tresetBookings: () => void\n}\n\ninterface Props {\n\tserviceToEdit: Service|undefined,\n    account: Account|undefined\n}\n\nconst EditService = ({ \n\taccountdata, \n\tbookingData,\n\tserviceToEdit, \n\tstartAction, \n\tsetSingleAccount,\n\tremoveBooking,\n\tresetBookings,\n\taccount, \n}: StateProps & DispatchProps & Props):React.ReactElement => {\n\n\tconst history = useHistory()\n\n\tconst [formStatus, setFormStatus] = useState<FormStatus>({\n\t\tmessage: '',\n\t\ttype: '',\n\t})\n\tconst classes = stylesInUse()\n\tconst [showFormStatus, setShowFormStatus] = useState(false)\n\tconst [redirect, setRedirect] = useState(false)\n\n\tconst SpaceSchema = Yup.object().shape({\n\t\tname: Yup.string()\n\t\t\t.required('Please enter the name for the space.'),\n\t\tdescription: Yup.string(),\n\t\tmaxBookings: Yup.number()\n\t\t\t.positive('Maxbookings can not be negative')\n\t\t\t.required('Please enter maximum number of bookings'),\n\t\tstartTime: Yup.string()\n\t\t\t.required('Please enter starting time'),\n\t\tendTime: Yup.string()\n\t\t\t.required('Please enter ending time.'),\n\t\ttimeSlotLen: Yup.number()\n\t\t\t.positive('Timeslot length can not be negative')\n\t\t\t.required('Please enter time slot length.'),\n\n\t})\n    \n\tconst saveMutation = useMutation(saveService, { \n\t\tonError: () => {\n\t\t\tsetFormStatus(formStatusProps.error)\n\t\t\tsetShowFormStatus(true)\n\t\t},\n\t\tonSuccess: () => {\n\t\t\tsetFormStatus(formStatusProps.success)\n\t\t\tsetShowFormStatus(true)\n\t\t\tstartAction()\n\t\t}\n\t})\n\n\tconst updateMutation = useMutation(updateService, { \n\t\tonError: () => {\n\t\t\tsetFormStatus(formStatusProps.error)\n\t\t\tsetShowFormStatus(true)\n\t\t},\n\t\tonSuccess: () => {\n\t\t\tsetFormStatus(formStatusProps.success)\n\t\t\tsetShowFormStatus(true)\n\t\t\tstartAction()\n\t\t}\n\t})\n\n\tconst deleteMutation = useMutation(deleteService)\n\n\tconst handleDelete = (service:Service) => {\n\t\tif (!account) {\n\t\t\treturn\n\t\t}\n\t\tdeleteMutation.mutate(service)\n\n\t\tconst serviceBookings = bookingData.bookings.filter(booking => booking.service?.id === service.id)\n\t\tserviceBookings.forEach(booking => removeBooking(booking))\n\n\t\tconst newAccount = {\n\t\t\t...account,\n\t\t\tservices: account.services.filter(ser => ser.id !== service.id)\n\t\t}\n\t\tsetSingleAccount(newAccount)\n\n\t\thistory.push(`/account/${account?.id}/manage`)\n\t\t\n\t}\n\n\tconst saveServiceData = async (data: SpaceFormFields) => {\n\t\tif (!account) {\n\t\t\treturn\n\t\t}\n\t\tif (serviceToEdit) {\n\t\t\tupdateMutation.mutate({\n\t\t\t\tid: serviceToEdit.id,\n\t\t\t\tname: data.name,\n\t\t\t\tdescription: data.description,\n\t\t\t\tmaxBookings: data.maxBookings,\n\t\t\t\tstartTime: `${data.startTime.getHours()}:${data.startTime.getMinutes()}`,\n\t\t\t\tendTime: `${data.endTime.getHours()}:${data.endTime.getMinutes()}`,\n\t\t\t\ttimeSlotLen: data.timeSlotLen,\n\t\t\t\taccount_id: account.id\n\t\t\t})\n\t\t} else {\n\t\t\tsaveMutation.mutate({\n\t\t\t\tname: data.name,\n\t\t\t\tdescription: data.description,\n\t\t\t\tmaxBookings: data.maxBookings,\n\t\t\t\tstartTime: `${data.startTime.getHours()}:${data.startTime.getMinutes()}`,\n\t\t\t\tendTime: `${data.endTime.getHours()}:${data.endTime.getMinutes()}`,\n\t\t\t\ttimeSlotLen: data.timeSlotLen,\n\t\t\t\taccount_id: account.id\n\t\t\t})\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\t\n\t\tconst newService = saveMutation.data?.data\n\t\n\t\tif (\n\t\t\tsaveMutation.isSuccess &&\n\t\t\t!saveMutation.isLoading && \n\t\t\tnewService && \n\t\t\taccount &&\n\t\t\taccountdata.updatingAccounts\n\t\t) {\n\t\t\tconst updatedAccount = {\n\t\t\t\t...account,\n\t\t\t\tservices: [newService, ...account.services]\n\t\t\t}\n\t\t\tsetSingleAccount(updatedAccount)\n\t\t\tsetRedirect(true)\n\t\t}\n\n\t\tconst updatedService = updateMutation.data?.data\n\n\t\tif (\n\t\t\tupdateMutation.isSuccess &&\n\t\t\t!updateMutation.isLoading &&\n\t\t\tupdatedService &&\n\t\t\taccount &&\n\t\t\taccountdata.updatingAccounts\n\t\t) {\n\t\t\tconst updatedAccount = {\n\t\t\t\t...account,\n\t\t\t\tservices: account.services.map(service => service.id === updatedService.id ? updatedService : service)\n\t\t\t}\n\t\t\tsetSingleAccount(updatedAccount)\n\t\t\tresetBookings()\n\t\t\tsetRedirect(true)\n\t\t}\t\t\n\n\t}, [saveMutation, updateMutation, accountdata])  \n\n\tconst defaultStartTime = new Date()\n\tdefaultStartTime.setHours(9)\n\tdefaultStartTime.setMinutes(0)\n\n\tconst defaultEndTime = new Date()\n\tdefaultEndTime.setHours(17)\n\tdefaultEndTime.setMinutes(0)\n\n\tconst timeStrToDate = (timeStr:string):Date => {\n\t\tconst date = new Date()\n\t\tconst timeStrParts = timeStr.split(':')\n\t\tdate.setHours(parseInt(timeStrParts[0]))\n\t\tdate.setMinutes(parseInt(timeStrParts[1]))\n\t\treturn date\n\t}\n\n\tif (redirect) {\n\t\treturn <Redirect to={account ? `/account/${account.id}/manage/` : '/dashboard'} />\n\t}\n\n\treturn (\n\t\t<MuiPickersUtilsProvider utils={DateFnsUtils}>\n\t\t\t<Formik\n\t\t\t\tinitialValues={{\n\t\t\t\t\tname: serviceToEdit ? serviceToEdit.name : '',\n\t\t\t\t\tdescription: serviceToEdit ? serviceToEdit.description : '',\n\t\t\t\t\tmaxBookings: serviceToEdit ? serviceToEdit.maxBookings : 1,\n\t\t\t\t\tstartTime: serviceToEdit ? timeStrToDate(serviceToEdit.startTime) : defaultStartTime,\n\t\t\t\t\tendTime: serviceToEdit ? timeStrToDate(serviceToEdit.endTime) : defaultEndTime,\n\t\t\t\t\ttimeSlotLen: serviceToEdit ? serviceToEdit.timeSlotLen : 30,\n\t\t\t\t}}\n\t\t\t\tonSubmit={(values: SpaceFormFields, actions) => {\n\t\t\t\t\tsaveServiceData(values)\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tactions.setSubmitting(false)\n\t\t\t\t\t}, 400)\n\t\t\t\t}}\n\t\t\t\tvalidationSchema={SpaceSchema}\n\t\t\t>\n\t\t\t\t{(props: FormikProps<SpaceFormFields>) => {\n\t\t\t\t\tconst {\n\t\t\t\t\t\thandleBlur,\n\t\t\t\t\t\thandleChange,\n\t\t\t\t\t\tvalues,\n\t\t\t\t\t\tisSubmitting,\n\t\t\t\t\t\ttouched,\n\t\t\t\t\t\terrors,\n\t\t\t\t\t} = props\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t<Form>\n\t\t\t\t\t\t\t<Grid container direction=\"row\">\n\t\t\t\t\t\t\t\t<Grid item className={classes.formColumn} xs={8}>\n\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\tid=\"name\"\n\t\t\t\t\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Space name\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\tvalue={values.name}\n\t\t\t\t\t\t\t\t\t\tclassName={classes.textField}\n\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\t\tonBlur={handleBlur}\n\t\t\t\t\t\t\t\t\t\thelperText={\n\t\t\t\t\t\t\t\t\t\t\ttouched.name && errors.name\n\t\t\t\t\t\t\t\t\t\t\t\t? errors.name\n\t\t\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\terror={touched.name && errors.name ? true : false}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<Grid container direction=\"row\">\n\t\t\t\t\t\t\t\t<Grid item className={classes.formColumn} xs={8}>\n\t\t\t\t\t\t\t\t\t<label htmlFor={'description'}>Description</label>\n\t\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\t\tid=\"description\"\n\t\t\t\t\t\t\t\t\t\tname=\"description\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Description\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Write a short description here...\"\n\t\t\t\t\t\t\t\t\t\tcomponent=\"textarea\"\n\t\t\t\t\t\t\t\t\t\trowsMin={6}\n\t\t\t\t\t\t\t\t\t\tclassName={classes.textAreaField}\n\t\t\t\t\t\t\t\t\t\tvalue={values.description}\n\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t\t<Grid container direction=\"row\">\n\t\t\t\t\t\t\t\t<Grid item className={classes.formColumn} xs={2}>\n\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<Field \n\t\t\t\t\t\t\t\t\t\tcomponent={TimePicker} \n\t\t\t\t\t\t\t\t\t\tid=\"startTime\"\n\t\t\t\t\t\t\t\t\t\tname=\"startTime\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Start time\"\n\t\t\t\t\t\t\t\t\t\tclassName={classes.dateField}\n\t\t\t\t\t\t\t\t\t\tvalue={values.startTime}\n\t\t\t\t\t\t\t\t\t\tampm={false}\n\t\t\t\t\t\t\t\t\t\tautoOk={true}\n\t\t\t\t\t\t\t\t\t\tminutesStep={5}\n\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t\t\t<Grid item className={classes.formColumn} xs={2}>\n\n\t\t\t\t\t\t\t\t\t<Field \n\t\t\t\t\t\t\t\t\t\tcomponent={TimePicker} \n\t\t\t\t\t\t\t\t\t\tid=\"endTime\"\n\t\t\t\t\t\t\t\t\t\tname=\"endTime\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"End time\"\n\t\t\t\t\t\t\t\t\t\tclassName={classes.dateField}\n\t\t\t\t\t\t\t\t\t\tvalue={values.endTime}\n\t\t\t\t\t\t\t\t\t\tampm={false}\n\t\t\t\t\t\t\t\t\t\tautoOk={true}\n\t\t\t\t\t\t\t\t\t\tminutesStep={5}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t\t\t<Grid item className={classes.formColumn} xs={2}>\n\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\tid=\"timeSlotLen\"\n\t\t\t\t\t\t\t\t\t\tname=\"timeSlotLen\"\n\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Timeslot (i.e. 30 mins)\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tclassName={classes.textField}\n\t\t\t\t\t\t\t\t\t\tvalue={values.timeSlotLen}\n\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\t\tonBlur={handleBlur}\n\t\t\t\t\t\t\t\t\t\thelperText={\n\t\t\t\t\t\t\t\t\t\t\ttouched.timeSlotLen && errors.timeSlotLen\n\t\t\t\t\t\t\t\t\t\t\t\t? errors.timeSlotLen\n\t\t\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\terror={touched.timeSlotLen && errors.timeSlotLen ? true : false}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t\t\t<Grid item className={classes.formColumn} xs={2}>\n\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\tid=\"maxBookings\"\n\t\t\t\t\t\t\t\t\t\tname=\"maxBookings\"\n\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Max bookings per timeslot\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tclassName={classes.textField}\n\t\t\t\t\t\t\t\t\t\tvalue={values.maxBookings}\n\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\t\tonBlur={handleBlur}\n\t\t\t\t\t\t\t\t\t\thelperText={\n\t\t\t\t\t\t\t\t\t\t\ttouched.maxBookings && errors.maxBookings\n\t\t\t\t\t\t\t\t\t\t\t\t? errors.maxBookings\n\t\t\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\terror={touched.maxBookings && errors.maxBookings ? true : false}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<Grid container direction=\"row\">\n\t\t\t\t\t\t\t\t<Grid item className={classes.submitButton} xs={6}>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\t\t\t\t\t\tclassName={classes.containedBtn}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{' '}\n                                        Save\n\t\t\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tclassName={classes.outlinedBtn}\n\t\t\t\t\t\t\t\t\t\tonClick={() => history.goBack()}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{' '}\n                            Cancel\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t{showFormStatus && (\n\t\t\t\t\t\t\t\t\t\t<div className=\"formStatus\">\n\t\t\t\t\t\t\t\t\t\t\t{formStatus.type === 'success' ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<p className={classes.successMessage}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{formStatus.message}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t) : formStatus.type === 'error' ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<p className={classes.errorMessage}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{formStatus.message}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Form>\n\t\t\t\t\t)\n\t\t\t\t}}\t\t\t\n\t\t\t</Formik>\n\n\t\t\t{serviceToEdit && \n\t\t\t<div className={classes.dangerZone}>\n\t\t\t\t<h2>Danger Zone</h2>\n\t\t\t\t<p>Be careful here, deleting the service will wipe out all data and bookings related to it.</p>\n\t\t\t\t<Button\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\tclassName={classes.deleteBtn}\n\t\t\t\t\tonClick={() => handleDelete(serviceToEdit)}\n\t\t\t\t>\n\t\t\t\t\t{' '}\n\t\t\t\t\t\t\t\tDelete service\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t</MuiPickersUtilsProvider>\n\t)\n}\n\nexport default connect(mapStateToProps, {\n\tstartAction,\n\tsetSingleAccount,\n\tremoveBooking,\n\tresetBookings\n})(EditService)","import React from 'react'\nimport { connect } from 'react-redux'\nimport {\n\tuseParams,\n\tRedirect\n} from 'react-router-dom'\nimport {\n\tContainer,\n\tmakeStyles,\n\tcreateStyles,\n} from '@material-ui/core'\n\nimport { AppState } from '../store/types'\n\nimport ServiceForm from '../components/forms/EditService'\n\nimport NotAllowed from '../components/NotAllowed'\n\nimport { isAdmin, isOwner } from '../utils/helpers'\n\nconst stylesInUse = makeStyles(() =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tbackground: '#FFFFFF',\n\t\t\tposition: 'relative',\n\t\t\tjustifyContent: 'center',\n\t\t\talignItems: 'center',\n\n\t\t},\n\t\theader: {\n\t\t\tbackground: '#6A0572',\n\t\t\tjustifyContent: 'center',\n\t\t\talignItems: 'center',\n\t\t\tpaddingTop: '40px',\n\t\t\tpaddingBottom: '50px',\n\t\t\tcolor:'#ffffff'\n\t\t},\n\t\tcontent: {\n\n\t\t},\n\t\tintro: {\n\t\t\tcolor: '#ffffff',\n\t\t\ttextAlign: 'center',\n\t\t\tposition: 'relative',\n\t\t\tzIndex: 1,\n\t\t},\n\t\theading_1: {\n\t\t\tfontSize: '3rem',\n\t\t\tposition: 'relative',\n\t\t\tfontWeight: 'bold',\n\t\t\tletterSpacing: -1,\n\t\t\tmargin: '1rem 0 0.5rem 0',\n\t\t},\n\t\theading_2: {\n\t\t\tfontSize: '2rem',\n\t\t\tposition: 'relative',\n\t\t\tfontWeight: 'bold',\n\t\t\tletterSpacing: -1,\n\t\t\tmarginBottom: '1rem',\n\t\t},\n\t\tintroText: {\n\t\t\tfontSize: '1.2rem',\n\t\t\tmargin: '0.5rem auto 1rem',\n\t\t},\n\t\tnotice: {\n\t\t\tfontSize: '1em',\n\t\t\tmargin: '1rem 0 1.5rem',\n\t\t\tcolor:'#111'\n\t\t},\n\t})\n)\n\ninterface RouteParams {\n\taccountId: string|undefined\n    serviceId: string|undefined\n}\n  \nconst mapStateToProps = (state: AppState) => ({\n\taccountdata: state.accountdata,\n\tme: state.userdata.user,\n\tupdateUser: state.userdata.updateUser\n})\n  \ntype Props = ReturnType<typeof mapStateToProps>\n\nconst EditService = ({ accountdata, me, updateUser }: Props):React.ReactElement => {\n\n\tconst { accountId, serviceId } = useParams<RouteParams>()\n\n\tif (!accountId) {\n\t\t<Redirect to=\"/dashboard\" />\n\t}\n\n\tconst account = accountId ? accountdata.accounts.find(acc => acc.id === parseInt(accountId)) : undefined\n\tconst serviceToEdit = serviceId ? account?.services.find(service => service.id === parseInt(serviceId)) : undefined\n\n\tif (\n\t\t!updateUser && !me && \n\t\taccount && !(isAdmin(me, account) || isOwner(me, account))\n\t) {\n\t\treturn <NotAllowed />\n\t}\n\n\tconst title = serviceId ? 'Edit space' : 'Add new space'\n\n\tconst classes = stylesInUse()\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<div className={classes.header}>\n\t\t\t\t<Container maxWidth=\"xl\">\n\t\t\t\t\t<h1 className={classes.heading_1}>{title}</h1>\n\t\t\t\t</Container>\n\t\t\t</div>\n\n\t\t\t<div className={classes.content}>\n\t\t\t\t<Container maxWidth=\"xl\">\n\t\t\t\t\t<h2 className={classes.heading_2}>Enter the space information</h2>\n\n\t\t\t\t\t<ServiceForm account={account} serviceToEdit={serviceToEdit} />\n\t\t\t\t\t\n\t\t\t\t</Container>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default connect(mapStateToProps)(EditService)","import React from 'react'\n\nimport { DatePicker } from '@material-ui/pickers'\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers'\n\nimport DateFnsUtils from '@date-io/date-fns'\n\nimport { connect } from 'react-redux'\nimport { AppState } from '../../store/types'\n\nimport { setSelectedDate } from '../../store/actions/bookings'\n\nconst mapStateToProps = (state: AppState) => ({\n\tselectedDate: state.bookingData.selectedDate,\n})\n  \ntype StateProps = ReturnType<typeof mapStateToProps>\n\ninterface DispatchProps { \n\tsetSelectedDate: (date: Date) => void\n}\n\nconst DatePickerComponent = ({ selectedDate, setSelectedDate }: StateProps & DispatchProps):React.ReactElement => {\n\n\tconst setDate = (formData: Date | null) => {\n\t\tsetSelectedDate(formData ? formData : new Date())\n\t}\n\n\treturn (\n\t\t<MuiPickersUtilsProvider utils={DateFnsUtils} >\n\t\t\t<DatePicker \n\t\t\t\tvalue={selectedDate} \n\t\t\t\tonChange={setDate} \n\t\t\t\tvariant=\"inline\"\n\t\t\t\tinputVariant=\"standard\"\n\t\t\t\tlabel=\"Date\"\n\t\t\t\tautoOk={true}\n\t\t\t/>\n\t\t</MuiPickersUtilsProvider>\n\t)\n}\n\nexport default connect(mapStateToProps, {\n\tsetSelectedDate\n})(DatePickerComponent)","import React from 'react'\n\nimport {\n\tcreateStyles,\n\tmakeStyles,\n} from '@material-ui/core'\n\nimport { \n\tBookingAttributesType \n} from '../types'\n\nconst stylesInUse = makeStyles(() =>\n\tcreateStyles({\n\t\tslot: {\n\t\t\tbackground: '#fff',\n\t\t\tdisplay: 'flex',\n\t\t\tpadding: '15px',\n\t\t\talignItems: 'center',\n\t\t\tjustifyContent: 'center',\n\t\t\tmargin: '2px',\n\t\t\tcursor: 'pointer',\n\t\t\t'&:hover': {\n\t\t\t\tbackground: '#f7f7f7'\n\t\t\t}\n\t\t},\n\t\tslotReserved: {\n\t\t\tbackground: '#e2e2e2',\n\t\t\tcolor: '#666',\n\t\t\tdisplay: 'flex',\n\t\t\tpadding: '15px',\n\t\t\talignItems: 'center',\n\t\t\tjustifyContent: 'center',\n\t\t\tmargin: '2px',\n\t\t\tcursor: 'default'\n\t\t},\n\t\tselectedSlot: {\n\t\t\tbackground: '#5BC8AF',\n\t\t\tdisplay: 'flex',\n\t\t\tpadding: '15px',\n\t\t\talignItems: 'center',\n\t\t\tjustifyContent: 'center',\n\t\t\tmargin: '2px',\n\t\t\tcursor: 'pointer',\n\t\t},\n\t})\n)\n\ninterface Props {\n\tslot: BookingAttributesType\n\tselectedSlot: BookingAttributesType|null\n\thandleSelectDate: (slot:BookingAttributesType) => void\n}\n\nconst TimeSlotItem = ({ \n\tslot, \n\tselectedSlot,\n\thandleSelectDate \n}:Props):React.ReactElement => {\n\n\tconst classes = stylesInUse()\n\n\tif (slot.isReserved) {\n\t\treturn (\n\t\t\t<div \n\t\t\t\tclassName={classes.slotReserved}>\n\t\t\t\t<div>\n\t\t\t\t\t{slot.time}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n\n\treturn (\n\t\t<div  \n\t\t\tclassName={selectedSlot && selectedSlot.id === slot.id && selectedSlot.service.id === slot.service.id ? classes.selectedSlot : classes.slot}\n\t\t\tonClick={() => handleSelectDate(slot)}\n\t\t>\n\t\t\t<div>\n\t\t\t\t{slot.time} \n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default TimeSlotItem","import React from 'react'\n\nimport {\n\tcreateStyles,\n\tmakeStyles,\n} from '@material-ui/core'\n\nimport { \n\tService,\n\tBookingAttributesType \n} from '../types'\n\nimport TimeSlotItem from './TimeSlotItem'\n\nconst stylesInUse = makeStyles(() =>\n\tcreateStyles({\n\t\tgridContent: {\n\t\t\tdisplay: 'flex',\n\t\t\tflexDirection: 'column'\n\t\t},\n\t})\n)\n\ninterface Props {\n    service: Service\n\tslots: BookingAttributesType[]\n\tselectedSlot: BookingAttributesType|null\n\thandleSelectDate: (slot:BookingAttributesType) => void\n}\n\nconst TimeSlotList = ({ \n\tservice, \n\tslots, \n\tselectedSlot,\n\thandleSelectDate \n}:Props):React.ReactElement => {\n\n\tconst classes = stylesInUse()\n\n\treturn (\n\t\t<div className={classes.gridContent}>\n\t\t\t{slots.map(slot => {\n\t\t\t\tif (!slot) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\treturn <TimeSlotItem \n\t\t\t\t\tkey={`${service.id}-${slot.id}`} \n\t\t\t\t\tslot={slot} \n\t\t\t\t\tselectedSlot={selectedSlot} \n\t\t\t\t\thandleSelectDate={handleSelectDate} \n\t\t\t\t/>\n\n\t\t\t})}\n\t\t</div>\n\t)\n}\n\nexport default TimeSlotList","import React, { useState, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { useMutation } from 'react-query'\nimport * as Yup from 'yup'\nimport { Formik, Form, FormikProps } from 'formik'\nimport {\n\tGrid,\n\tTextField,\n\tButton,\n\tmakeStyles,\n\tcreateStyles,\n} from '@material-ui/core'\n\nimport { saveBooking } from '../../services/queries'\n\nimport { AppState } from '../../store/types'\nimport { Booking, BookingAttributesType } from '../../types'\n\nimport { startAction, addBooking } from '../../store/actions/bookings'\n\nimport { dateString } from '../../utils/helpers'\n\nconst stylesInUse = makeStyles((theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tbackground: '#FFFFFF',\n\t\t\tposition: 'relative',\n\t\t\tjustifyContent: 'center',\n\t\t\talignItems: 'center',\n\n\t\t},\n\t\theader: {\n\t\t\tbackground: '#6A0572',\n\t\t\tjustifyContent: 'center',\n\t\t\talignItems: 'center',\n\t\t\tpaddingTop: '40px',\n\t\t\tpaddingBottom: '50px',\n\t\t\tcolor:'#ffffff'\n\t\t},\n\t\tcontent: {\n\n\t\t},\n\t\tintro: {\n\t\t\tcolor: '#ffffff',\n\t\t\ttextAlign: 'center',\n\t\t\tposition: 'relative',\n\t\t\tzIndex: 1,\n\t\t},\n\t\theading_1: {\n\t\t\tfontSize: '3rem',\n\t\t\tposition: 'relative',\n\t\t\tfontWeight: 'bold',\n\t\t\tletterSpacing: -1,\n\t\t\tmargin: '1rem 0 0.5rem 0',\n\t\t},\n\t\theading_2: {\n\t\t\tfontSize: '2rem',\n\t\t\tposition: 'relative',\n\t\t\tfontWeight: 'bold',\n\t\t\tletterSpacing: -1,\n\t\t\tmarginBottom: '1rem',\n\t\t},\n\t\tintroText: {\n\t\t\tfontSize: '1.2rem',\n\t\t\tmargin: '0.5rem auto 1rem',\n\t\t},\n\t\tnotice: {\n\t\t\tfontSize: '1em',\n\t\t\tmargin: '1rem 0 1.5rem',\n\t\t\tcolor:'#111'\n\t\t},\n\t\tcontainedBtn: {\n\t\t\tbackgroundColor: '#6A0572',\n\t\t\tpadding: '12px 20px',\n\t\t\tfontWeight: 'bold',\n\t\t\tcolor: '#ffffff',\n\t\t\tmargin: '0 0.5em',\n\t\t\twidth: 'auto',\n\t\t},\n\t\toutlinedBtn: {\n\t\t\tpadding: '12px 20px',\n\t\t\tfontWeight: 'bold',\n\t\t\tcolor: '#6A0572',\n\t\t\tmargin: '0 0.5em',\n\t\t\twidth: 'auto',\n\t\t\tborderColor: 'rgba(0,0,0,0.5)',\n\t\t\t'&:hover': {\n\t\t\t\tborderColor: '#6A0572',\n\t\t\t},\n\t\t},\n\t\ttextField: {\n\t\t\t'& > *': {\n\t\t\t\twidth: '100%',\n\t\t\t},\n\t\t},\n\t\tloginButton: {\n\t\t\tmarginTop: '30px',\n\t\t},\n\t\ttitle: { textAlign: 'left' },\n\t\tsuccessMessage: { color: theme.palette.success.main },\n\t\terrorMessage: { color: theme.palette.error.main },\n\t})\n)\n\ninterface FormStatus {\n  type: string\n  message: string\n}\n\ninterface FormStatusProps {\n  [key: string]: FormStatus\n}\n\ninterface BookingFormFields {\n  email: string\n}\n\nconst formStatusProps: FormStatusProps = {\n\terror: {\n\t\tmessage: 'Something went wrong. Please try again.',\n\t\ttype: 'error',\n\t},\n\tsuccess: {\n\t\tmessage: 'Organisation details saved!',\n\t\ttype: 'success',\n\t},\n}\n\nconst mapStateToProps = (state: AppState) => ({\n\tupdatingBookings: state.bookingData.updatingBookings,\n})\n  \ntype StateProps = ReturnType<typeof mapStateToProps>\n\n\ninterface Props {\n\tselectedSlot: BookingAttributesType|null\n\thandleCloseBookingForm: () => void\n}\n\ninterface DispatchProps { \n\tstartAction: () => void\n\taddBooking: (booking:Booking) => void\n}\n\nconst BookingForm = ({ \n\tselectedSlot, \n\thandleCloseBookingForm,\n\tupdatingBookings,\n\tstartAction,\n\taddBooking\n}: StateProps & DispatchProps & Props):React.ReactElement => {\n\n\tconst [formStatus, setFormStatus] = useState<FormStatus>({\n\t\tmessage: '',\n\t\ttype: '',\n\t})\n\tconst [showFormStatus, setShowFormStatus] = useState(false)\n\tconst classes = stylesInUse()\n\n\tconst AccountSchema = Yup.object().shape({\n\t\temail: Yup.string().required('Please enter your email.')\n\t})\n    \n\tconst saveMutation = useMutation(saveBooking, { \n\t\tonError: () => {\n\t\t\tsetFormStatus(formStatusProps.error)\n\t\t\tsetShowFormStatus(true)\n\t\t},\n\t\tonSuccess: () => {\n\t\t\tsetFormStatus(formStatusProps.success)\n\t\t\tsetShowFormStatus(true)\n\t\t\tstartAction()\n\t\t}\n\t})\n\n\tconst saveBookingForm = (formData: BookingFormFields) => {\n\t\t\n\t\tif (!selectedSlot) {\n\t\t\treturn\n\t\t}\n\n\t\tconst date = selectedSlot.date ? selectedSlot.date : new Date()\n\t\tconst timeStrParts = selectedSlot.time.split(':')\n\t\tdate.setHours(parseInt(timeStrParts[0]))\n\t\tdate.setMinutes(parseInt(timeStrParts[1]))\n\n\t\tconst dateTime = date.toISOString()\n\n\t\tsaveMutation.mutate({\n\t\t\temail: formData.email,\n\t\t\tdate: dateString(date),\n\t\t\tdateTime: dateTime,\n\t\t\tslotNumber: selectedSlot.slotNumber,\n\t\t\tservice_id: selectedSlot.service.id,\n\t\t})\n\t}\n\n\tuseEffect(() => {\n\t\t\n\t\tconst booking = saveMutation.data?.data\n\t\n\t\tif (\n\t\t\tsaveMutation.isSuccess &&\n\t\t\t!saveMutation.isLoading && \n\t\t\tbooking && \n\t\t\tupdatingBookings\n\t\t) {\n\t\t\taddBooking(booking)\n\t\t\thandleCloseBookingForm()\n\t\t}\n\n\t}, [saveMutation, updatingBookings])\n    \n\treturn (\n\t\t<Formik\n\t\t\tinitialValues={{\n\t\t\t\temail: '',\n\t\t\t}}\n\t\t\tonSubmit={(values: BookingFormFields, actions) => {\n\t\t\t\tsaveBookingForm(values)\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tactions.setSubmitting(false)\n\t\t\t\t}, 400)\n\t\t\t}}\n\t\t\tvalidationSchema={AccountSchema}\n\t\t>\n\t\t\t{(props: FormikProps<BookingFormFields>) => {\n\t\t\t\tconst {\n\t\t\t\t\thandleBlur,\n\t\t\t\t\thandleChange,\n\t\t\t\t\tvalues,\n\t\t\t\t\tisSubmitting,\n\t\t\t\t\ttouched,\n\t\t\t\t\terrors,\n\t\t\t\t} = props\n\n\t\t\t\treturn (\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t<Form>\n\t\t\t\t\t\t<Grid container direction=\"row\">\n\t\t\t\t\t\t\t<Grid item className={classes.textField} xs={8}>\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\tid=\"email\"\n\t\t\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\t\tlabel=\"Your email\"\n\t\t\t\t\t\t\t\t\tvalue={values.email}\n\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\tonBlur={handleBlur}\n\t\t\t\t\t\t\t\t\thelperText={\n\t\t\t\t\t\t\t\t\t\ttouched.email && errors.email\n\t\t\t\t\t\t\t\t\t\t\t? errors.email\n\t\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\terror={touched.email && errors.email ? true : false}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t\t<Grid item className={classes.loginButton} xs={6}>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\t\t\t\t\tclassName={classes.containedBtn}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{' '}\n                                        Make booking\n\t\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t\t{showFormStatus && (\n\t\t\t\t\t\t\t\t\t<div className=\"formStatus\">\n\t\t\t\t\t\t\t\t\t\t{formStatus.type === 'success' ? (\n\t\t\t\t\t\t\t\t\t\t\t<p className={classes.successMessage}>\n\t\t\t\t\t\t\t\t\t\t\t\t{formStatus.message}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t) : formStatus.type === 'error' ? (\n\t\t\t\t\t\t\t\t\t\t\t<p className={classes.errorMessage}>\n\t\t\t\t\t\t\t\t\t\t\t\t{formStatus.message}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Form>\n\t\t\t\t)\n\t\t\t}}\t\t\t\n\t\t</Formik>\n\t)\n}\n\nexport default connect(mapStateToProps, {\n\tstartAction,\n\taddBooking\n})(BookingForm)","import React from 'react'\n\nimport {\n\tDialog,\n\tDialogActions,\n\tDialogContent,\n\tDialogContentText,\n\tDialogTitle,\n\tButton\n} from '@material-ui/core'\nimport { BookingAttributesType } from '../types'\nimport BookingForm from './forms/Booking'\n\ninterface Props {\n    bookingFormOpen: boolean\n    handleCloseBookingForm: () => void\n    selectedSlot: BookingAttributesType|null\n}\n\nconst BookingFormDialog = ({ \n\tbookingFormOpen, \n\thandleCloseBookingForm,\n\tselectedSlot, \n}: Props):React.ReactElement => {\n\treturn (\n\t\t<Dialog open={bookingFormOpen} onClose={handleCloseBookingForm} aria-labelledby=\"form-dialog-title\">\n\t\t\t<DialogTitle id=\"form-dialog-title\">Make a booking</DialogTitle>\n\t\t\t<DialogContent>\n\t\t\t\t<DialogContentText>\n\t\t\t\t\t{selectedSlot && `To book ${selectedSlot.service.name} on ${selectedSlot?.date?.toDateString()} at ${selectedSlot?.time}, add your email below.`}\n\t\t\t\t</DialogContentText>\n\t\t\t\t<BookingForm selectedSlot={selectedSlot} handleCloseBookingForm={handleCloseBookingForm} />\n\t\t\t</DialogContent>\n\t\t\t<DialogActions>\n\t\t\t\t<Button onClick={handleCloseBookingForm} color=\"primary\">\n            Cancel\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t)\n}\n\nexport default BookingFormDialog","import React from 'react'\n\nimport {\n\tDialog,\n\tDialogActions,\n\tDialogContent,\n\tDialogContentText,\n\tDialogTitle,\n\tButton,\n\tmakeStyles,\n\tcreateStyles,\n} from '@material-ui/core'\nimport { Service } from '../types'\n\nconst stylesInUse = makeStyles(() =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tminWidth: '500px'\n\t\t},\n\t})\n)\n\ninterface Props {\n    infoFormOpen: boolean\n    handleCloseInfoForm: () => void\n    service: Service|null\n}\n\nconst ServiceInfoDialog = ({ \n\tinfoFormOpen, \n\thandleCloseInfoForm,\n\tservice\n}: Props):React.ReactElement => {\n\n\tif (!service) {\n\t\treturn <></>\n\t}\n\n\tconst classes = stylesInUse()\n\n\treturn (\n\t\t<Dialog open={infoFormOpen} onClose={handleCloseInfoForm} aria-labelledby=\"form-dialog-title\">\n\t\t\t<DialogTitle id=\"form-dialog-title\">{service.name}</DialogTitle>\n\t\t\t<DialogContent className={classes.root}>\n\t\t\t\t<DialogContentText>\n\t\t\t\t\t{service.description}\n\t\t\t\t</DialogContentText>\n\t\t\t\t\n\t\t\t</DialogContent>\n\t\t\t<DialogActions>\n\t\t\t\t<Button onClick={handleCloseInfoForm} color=\"primary\" variant=\"contained\">\n            Close\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t)\n}\n\nexport default ServiceInfoDialog","import React, { useState, useEffect } from 'react'\nimport { connect } from 'react-redux'\n\nimport { useQuery } from 'react-query'\nimport { \n\tgetAccountById,\n\tgetBookingsByAccountIdAndDateStr\n} from '../services/queries'\n\nimport { \n\tuseParams, \n} from 'react-router-dom'\n\nimport { \n\tsetAccounts, \n} from '../store/actions/accounts'\n\nimport { \n\tsetBookings, \n} from '../store/actions/bookings'\n\nimport { AppState } from '../store/types'\n\nimport { Account, Service, BookingAttributesType, Booking } from '../types'\n\nimport {\n\tContainer,\n\tcreateStyles,\n\tmakeStyles,\n} from '@material-ui/core'\n\nimport { Info as InfoIcon } from '@material-ui/icons'\n\nimport DatePicker from './forms/DatePicker'\nimport TimeSlotList from './TimeSlotList'\nimport BookingFormDialog from './BookingFormDialog'\nimport ServiceInfoDialog from './ServiceInfoDialog'\n\nimport { dateString } from '../utils/helpers'\n\nconst stylesInUse = makeStyles(() =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tbackground: '#eee',\n\t\t\tposition: 'relative',\n\t\t\tjustifyContent: 'center',\n\t\t\talignItems: 'center',\n\n\t\t},\n\t\tgridContainer: {\n\t\t\tdisplay: 'flex',\n\t\t\twidth: '100%',\n\t\t\tflexDirection: 'row',\n\t\t},\n\t\tgridItem: {\n\t\t\tminWidth: '200px',\n\t\t\tmaxWidth: '50%',\n\t\t\twidth: '100%',\n\t\t\tflex: 'auto',\n\t\t\tmargin: '5px'\n\t\t},\n\t\theader: {\n\t\t\tbackground: '#6A0572',\n\t\t\tjustifyContent: 'center',\n\t\t\talignItems: 'center',\n\t\t\tpaddingTop: '20px',\n\t\t\tpaddingBottom: '30px',\n\t\t\tcolor:'#ffffff'\n\t\t},\n\t\tcontent: {\n\n\t\t},\n\t\theading_1: {\n\t\t\tfontSize: '3rem',\n\t\t\tposition: 'relative',\n\t\t\tfontWeight: 'bold',\n\t\t\tletterSpacing: -1,\n\t\t\tmargin: '1rem 0 0.5rem 0',\n\t\t},\n\t\theading_2: {\n\t\t\tfontSize: '1.2rem',\n\t\t\tfontWeight: 'bold',\n\t\t\tmarginBottom: '1rem',\n\t\t\ttextAlign: 'center'\n\t\t},\n\t\tcontainedBtn: {\n\t\t\tbackgroundColor: '#6A0572',\n\t\t\tpadding: '12px 20px',\n\t\t\tfontWeight: 'bold',\n\t\t\tcolor: '#ffffff',\n\t\t\tmargin: '0 0.5em',\n\t\t\twidth: 'auto',\n\t\t},\n\t\trow: {\n\t\t\tpadding: '15px 0',\n\t\t\tbackground: '#ddd'\n\t\t},\n\t\tinfoIcon: {\n\t\t\tmargin: '0 4px 0',\n\t\t\tposition: 'relative',\n\t\t\ttop: '2px',\n\t\t\tcursor: 'pointer'\n\t\t}\n\t})\n)\n\n\ninterface RouteParams {\n\taccountId: string|undefined\n}\n\nconst mapStateToProps = (state: AppState) => ({\n\taccountdata: state.accountdata,\n\tbookingData: state.bookingData\n})\n  \ntype Props = ReturnType<typeof mapStateToProps>\n\ninterface DispatchProps { \n    setAccounts: (accounts:Account[]) => void\n\tsetBookings: (bookings: Booking[]) => void\n}\n\nconst Calendar = ({ \n\taccountdata, \n\tbookingData,\n\tsetAccounts, \n\tsetBookings\n}: Props & DispatchProps):React.ReactElement => {\n\n\tconst [bookingFormOpen, setbookingFormOpen] = useState<boolean>(false)\n\tconst [infoFormOpen, setInfoFormOpen] = useState<boolean>(false)\n\tconst [selectedService, setSelectedService] = useState<Service|null>(null)\n\tconst [selectedSlot, setSelectedSlot] = useState<BookingAttributesType|null>(null)\n\tconst now = new Date()\n\n\tconst handleSelectDate = (slot:BookingAttributesType) => {\n\t\tsetSelectedSlot(slot)\n\t\tsetbookingFormOpen(true)\n\t}\n\n\tconst handleCloseBookingForm = () => {\n\t\tsetSelectedSlot(null)\n\t\tsetbookingFormOpen(false)\n\t}\n\n\tconst handleToggleInfoForm = (service:Service|null) => {\n\t\tsetSelectedService(service)\n\t\tsetInfoFormOpen(!infoFormOpen)\n\t}\n\n\tconst { accountId } = useParams<RouteParams>()\n\tconst account = (accountdata && accountId) && accountdata.accounts.find(acc => acc.id === parseInt(accountId)) \n\n\tconst classes = stylesInUse()\n\n\tconst queryAccount = useQuery(['getAccountById', accountId], () => getAccountById(accountId), { \n\t\tenabled: !account\n\t})\n\n\tconst queryAccountBookings = useQuery(\n\t\t['getBookingsByAccountIdAndDateStr', \n\t\t\t{ accountId, date: dateString(bookingData.selectedDate) }], \n\t\t() => getBookingsByAccountIdAndDateStr({ accountId, date: dateString(bookingData.selectedDate) }), { \n\t\t\tenabled: !!accountId\n\t\t})\n\n\tuseEffect(() => {\n\t\tif (\n\t\t\t!account &&\n\t\t\tqueryAccount.isSuccess && \n            queryAccount.data.data\n\t\t) {\n\t\t\tsetAccounts([queryAccount.data.data])\n\t\t}\n\n\t\tif (\n\t\t\taccount &&\n\t\t\tqueryAccountBookings.isSuccess && \n            queryAccountBookings.data.data\n\t\t) {\n\t\t\tsetBookings(queryAccountBookings.data.data)\n\t\t}\n\n\t}, [queryAccount, queryAccountBookings, account])\n\n\tconst timeToSeconds = (timeStr:string):number => {\n\t\tconst timeStrArr = timeStr.split(':')\n\t\treturn parseInt(timeStrArr[0]) * 60 * 60 + parseInt(timeStrArr[1]) * 60\n\t}\n\n\tconst timeSlotCount = (service:Service):number => {\n\t\tconst startTimeInSeconds = timeToSeconds(service.startTime)\n\t\tconst endTimeInSeconds = timeToSeconds(service.endTime)\n\t\tconst timeSlotLenInSeconds = service.timeSlotLen * 60\n\t\treturn (endTimeInSeconds - startTimeInSeconds) / timeSlotLenInSeconds\n\t}\n\n\tconst makeServiceTimeSlots = (service:Service):BookingAttributesType[] => {\n\t\tconst timeUnits = timeSlotCount(service)\n\t\tconst res = []\n\t\tfor (let i = 0; i < timeUnits; i++) {\n\n\t\t\tconst timeStrParts = service.startTime.split(':')\n\t\t\tconst increment = service.timeSlotLen * i  \n\t\t\tconst hours = `${Math.floor(parseInt(timeStrParts[0]) + increment/60)}`\n\t\t\tconst mins = `${increment % 60}`\n\t\t\tconst time = `${hours.length === 1 ? 0 : ''}${hours}:${mins}${mins.length === 1 ? 0 : ''}` \n\n\t\t\tconst selectedTime = new Date(bookingData.selectedDate)\n\t\t\tselectedTime.setHours(parseInt(hours))\n\t\t\tselectedTime.setMinutes(parseInt(mins))\n\n\t\t\tconst reservations = bookingData.bookings.length > 0 \n\t\t\t\t? bookingData.bookings.filter(booking => \n\t\t\t\t\tbooking.slotNumber === i && \n\t\t\t\t\tbooking.service?.id === service.id &&\n\t\t\t\t\tdateString(bookingData.selectedDate) === booking.date) : []\n\t\t\tconst isReserved =  selectedTime < now || reservations.length >= service.maxBookings \n\n\t\t\tres.push({\n\t\t\t\tid: i,\n\t\t\t\tslotNumber: i,\n\t\t\t\tisReserved,\n\t\t\t\ttime,\n\t\t\t\tservice: service,\n\t\t\t\tdate: bookingData.selectedDate\n\t\t\t})\n\t\t}\n\t\treturn res\n\t}\n\n\tconst services = account ? account.services : []\n \n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<div className={classes.header}>\n\t\t\t\t<Container maxWidth=\"xl\">\n\t\t\t\t\t<h1 className={classes.heading_1}>{account ? `Booking calendar for ${account.name}` : 'Booking calendar'}</h1>\n\t\t\t\t</Container>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div className={classes.row}>\n\t\t\t\t<Container maxWidth=\"xl\">\n\t\t\t\t\t<DatePicker />\n\t\t\t\t</Container>\n\t\t\t</div>\n\n\t\t\t<div className={classes.content}>\n\t\t\t\t<Container maxWidth=\"xl\">\n\t\t\t\t\t\n\t\t\t\t\t<div className={classes.gridContainer}>\n\t\t\t\t\t\t{services.map((service) => {\n\t\t\t\t\t\t\tconst slots = makeServiceTimeSlots(service)\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div key={service.id} className={classes.gridItem}>\n\t\t\t\t\t\t\t\t\t<h2 className={classes.heading_2}>\n\t\t\t\t\t\t\t\t\t\t{service.name}\n\t\t\t\t\t\t\t\t\t\t<InfoIcon \n\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleToggleInfoForm(service)} \n\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\" \n\t\t\t\t\t\t\t\t\t\t\tfontSize=\"small\"\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.infoIcon}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t\t\t\t<TimeSlotList \n\t\t\t\t\t\t\t\t\t\tslots={slots}\n\t\t\t\t\t\t\t\t\t\tservice={service}\n\t\t\t\t\t\t\t\t\t\tselectedSlot={selectedSlot}\n\t\t\t\t\t\t\t\t\t\thandleSelectDate={handleSelectDate}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t</Container>\n\t\t\t</div>\n\t\t\t\n\t\t\t<BookingFormDialog \n\t\t\t\tbookingFormOpen={bookingFormOpen}\n\t\t\t\thandleCloseBookingForm={handleCloseBookingForm}\n\t\t\t\tselectedSlot={selectedSlot}\n\t\t\t/>\n\n\t\t\t<ServiceInfoDialog \n\t\t\t\tinfoFormOpen={infoFormOpen}\n\t\t\t\thandleCloseInfoForm={() => handleToggleInfoForm(null)}\n\t\t\t\tservice={selectedService}\n\t\t\t/>\n\t\t\t\n\t\t</div>\n\t)\n}\n\nexport default connect(mapStateToProps, {\n\tsetAccounts,\n\tsetBookings\n})(Calendar)","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { Route } from 'react-router-dom'\nimport { useQuery } from 'react-query'\n\nimport { AppState } from '../store/types'\nimport { setToken, setUser, logoutUser } from '../store/actions/user'\n\nimport { me, getAccounts } from '../services/queries'\n\nimport { setAccounts, doneAction } from '../store/actions/accounts'\n\nimport Header from './Header'\nimport Home from '../pages/Home'\nimport Register from './forms/Register'\nimport Login from './forms/Login'\nimport Dashboard from '../pages/Dashboard'\nimport EditAccount from '../pages/EditAccount'\nimport ManageAccountUsers from '../pages/ManageAccountUsers'\nimport ManageAccount from '../pages/ManageAccount'\nimport ManageBookings from '../pages/ManageBookings'\nimport EditService from '../pages/EditService'\nimport Calendar from './Calendar'\nimport Loader from './Loader'\n\nimport { Account, UserType } from '../types'\n    \nconst mapStateToProps = (state: AppState) => ({\n\ttoken: state.userdata.token,\n\tuser: state.userdata.user,\n\tloggedOut: state.userdata.loggedOut,\n\taccountdata: state.accountdata\n})\n  \ntype Props = ReturnType<typeof mapStateToProps>;\n\ninterface DispatchProps { \n    setToken: (token:string) => void\n    setUser: (user:UserType|undefined) => void\n\tlogoutUser: () => void \n\tsetAccounts: (accounts:Account[]) => void\n\tdoneAction: () => void\n}\n\nconst Controller = ({ \n\ttoken, \n\tloggedOut,\n\taccountdata,\n\tuser,\n\tsetToken, \n\tsetUser, \n\tlogoutUser,\n\tsetAccounts,\n\tdoneAction\n}: Props & DispatchProps):React.ReactElement => {\n    \n\tconst queryMe = useQuery(['me', token], () => me(token), { \n\t\tenabled: !!token,\n\t\tonError: () => {\n\t\t\tlocalStorage.removeItem('access_token')\n\t\t\tlogoutUser()\n\t\t},\n\t})\n\n\tconst queryAccounts = useQuery(['getAccounts', accountdata], getAccounts, { \n\t\tenabled: accountdata.accounts.length === 0 && !!user,\n\t\tonError: () => doneAction()\n\t})\n    \n\tuseEffect(() => {\n\t\tsetToken(localStorage.getItem('access_token') ?? '')\n\t\tif (queryMe.isSuccess) {\n\t\t\tsetUser({ username: queryMe.data?.data?.username, email: queryMe.data?.data?.email })\n\t\t}\n\n\t\tif (\n\t\t\tqueryAccounts.isSuccess && \n            accountdata.accounts.length === 0 && \n            queryAccounts.data.data\n\t\t) {\n\t\t\tsetAccounts(queryAccounts.data.data)\n\t\t}\n\n\t}, [queryMe, queryAccounts])\n\n\tif (loggedOut) {\n\t\twindow.location.href = '/'\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<Header />\n\n\t\t\t<Route exact path=\"/\" component={Home} />\n\t\t\t\n\t\t\t<Route exact path=\"/dashboard\" component={Dashboard} />\n\n\t\t\t<Route exact path=\"/add-account\" component={EditAccount} />\n\t\t\t<Route path='/account/:id/edit' component={EditAccount} />\n\t\t\t<Route path='/account/:accountId/users' component={ManageAccountUsers} />\n\t\t\t\n\t\t\t<Route path='/account/:accountId/services/add' component={EditService} />\n\t\t\t<Route path='/account/:accountId/services/:serviceId/edit' component={EditService} />\n\t\t\t<Route exact path='/account/:accountId/manage' component={ManageAccount} />\n\t\t\t<Route path='/account/:accountId/bookings' component={ManageBookings} />\n\t\t\t\n\t\t\t\n\t\t\t<Route path='/account/:accountId/calendar' component={Calendar} />\n\n\t\t\t<Route exact path=\"/register\" component={Register} />\n\t\t\t<Route exact path=\"/login\" component={Login} />\n\t\t\t\n\t\t\t{accountdata.updatingAccounts && !!user && <Loader />}\n\t\t\t\n\t\t</div>\n\t)\n}\n\nexport default connect(mapStateToProps, {\n\tsetToken,\n\tsetUser,\n\tlogoutUser,\n\tsetAccounts,\n\tdoneAction\n})(Controller)","import React from 'react'\nimport { Provider } from 'react-redux'\nimport { QueryClient, QueryClientProvider } from 'react-query'\n\nimport {\n\tThemeProvider,\n\tcreateMuiTheme\n} from '@material-ui/core'\n\nconst theme = createMuiTheme({\n\tpalette: {\n\t\tprimary: {\n\t\t\tmain: '#6A0572',\n\t\t},\n\t\tsecondary: {\n\t\t\tmain: '#06BCC1',\n\t\t},\n\t},\n})\n\nimport configureStore from './store/store'\n\nimport Controller from './components/Controller'\n\nconst store = configureStore()\n\nconst queryClient = new QueryClient()\n\nfunction App(): React.ReactElement  {\n\n\treturn (\n\t\t<Provider store={store}>\n\t\t\t<QueryClientProvider client={queryClient}>\n\t\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t\t<Controller />\n\t\t\t\t</ThemeProvider>\n\t\t\t</QueryClientProvider>\n\t\t</Provider>\n\t)\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { BrowserRouter as Router } from 'react-router-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<Router>\n\t\t\t<App />\n\t\t</Router>\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n)\n\n"],"sourceRoot":""}